slavingUtil=function(){function v(c){function d(a,b,c,d){d=d?!1:!0;!0===a.isMachineField?e.setCurrentLineItemValue(a.machineName,a.fieldName,b,c,d):a.isMultiSelectField?e.setFieldValues(a.fieldName,b,c,d):e.setFieldValue(a.fieldName,b,c,d)}function a(a){null!==b.getFieldOptions()&&null===b.getFieldOptions().get(a.machineName,a.fieldName,a.lineNum)&&b.getFieldOptions().put(a.machineName,a.fieldName,a.lineNum,[]);return b.getFieldOptions().get(a.machineName,a.fieldName,a.lineNum)}var e=c.currentRecord,
b=c.util;this.setFieldNoSlaving=function(a,c){b.setFieldNoSlaving(a.machineName,a.fieldName,a.lineNum,c)};this.getValue=function(a){var b="";!0===a.isMachineField?a.ln&&-1!==a.ln?(b=e.getLineItemValue(a.machineName,a.fieldName,a.ln),b=null===b||void 0===b?"":b):b=e.getCurrentLineItemValue(a.machineName,a.fieldName):b=a.isMultiSelectField?e.getFieldValues(a.fieldName):e.getFieldValue(a.fieldName);return b};this.setValue=d;this.setSelectValue=function(a,b,c,k){b||""===b?d(a,b,k):!0===a.isMachineField?
e.setCurrentLineItemText(a.machineName,a.fieldName,c,k,!0):e.setText({fieldId:a.fieldName,value:b,fireFieldChange:k,noslaving:!0})};this.removeOption=function(b,c){var d=a(b);if(0<d.length)if(c||0===c){var e;a:{for(e=0;e<d.length;e++)if(d[e].id==c)break a;e=-1}d.splice(e,1)}else d.splice(0,d.length)};this.insertOption=function(b,c,d){(b=a(b))&&b instanceof Array&&b.push({text:d,id:c})};this.isEditableSublist=b.isEditableSublist;this.isFieldMultiSelect=b.isFieldMultiSelect;this.returnEmptyIfNull=x;
this.isValEmpty=y;this.getCurrentLineItemIndex=function(a){return e.getCurrentSublistIndex({sublistId:a})};this.triggerPostSourcing=b.postSourcing}function u(){function c(a){return!0===a.isMachineField?nlapiGetLineItemField(a.machineName,a.fieldName,a.lineNum):nlapiGetField(a.fieldName)}function d(a,c,b){a=getFormElement(a,getFieldName(c));null!=a&&(null!=b?deleteOneSelectOption(a,b):deleteAllSelectOptions(a,window))}this.setFieldNoSlaving=function(a,d){var b=c(a);b&&(b.noslaving=d)};this.getValue=
function(a){var c="";return c=!0===a.isMachineField?a.ln?x(nlapiGetLineItemValue(a.machineName,a.fieldName,a.ln)):nlapiGetCurrentLineItemValue(a.machineName,a.fieldName):a.isMultiSelectField?nlapiGetFieldValues(a.fieldName):nlapiGetFieldValue(a.fieldName)};this.setValue=function(a,c,b){!0===a.isMachineField?nlapiSetCurrentLineItemValue(a.machineName,a.fieldName,c,b,!0):a.isMultiSelectField?nlapiSetFieldValues(a.fieldName,c,b,!0):nlapiSetFieldValue(a.fieldName,c,b,!0)};this.setSelectValue=function(a,
c,b,d){!0===a.isMachineField?nlapiSetCurrentLineItemSelectValue(a.machineName,a.fieldName,c,b,d,getSlavingAsync()):nlapiSetSelectValue(a.fieldName,b,d,getSlavingAsync())};this.removeOption=function(a,c){if(!0===a.isMachineField)d(document.forms[a.machineName+"_form"],a.fieldName,c);else{var b=a.fieldName,f="undefined"!=typeof ftabs&&null!=ftabs[getFieldName(b)]?document.forms[ftabs[getFieldName(b)]+"_form"]:document.forms[0];d(f,b,c)}};this.insertOption=function(a,c,b){if(!0===a.isMachineField)a=
getFormElement(document.forms[a.machineName+"_form"],getFieldName(a.fieldName));else{a=a.fieldName;var d="undefined"!=typeof ftabs&&null!=ftabs[getFieldName(a)]?document.forms[ftabs[getFieldName(a)]+"_form"]:document.forms[0];a=getFormElement(d,getFieldName(a))}null!=a&&addSelectOption(document,a,b,c)};this.isEditableSublist=isEditMachine;this.isFieldMultiSelect=function(a,d,b){return(a=c({isMachineField:!!a,machineName:a,fieldName:d,lineNum:b}))?"multiselect"===a.getType():!1};this.serverCall=nsServerCall;
this.returnEmptyIfNull=emptyIfNull;this.isValEmpty=y;this.getCurrentLineItemIndex=nlapiGetCurrentLineItemIndex}function z(c,d,a){var e=a?new v(a):new u,b=a?!1:!0,f=d.hasOwnProperty("lineNum")&&null!=d.lineNum?d.lineNum:null,m=d.sublistName,h=A(c[g.QUERY_URL]),k=h[B.URL],h=h[B.PAYLOAD];if("T"===c[g.EDIT]){if((a=a?a.currentRecord.id:e.getValue({fieldName:"id"}))||0===a)h.id=String(a);"T"!==c[g.DISPLAY_ONLY]&&(h.e="T")}h.q=d.queryFieldName;h.si=d.queryFieldValue;m&&(h.machine=m);0!=d.fieldspec.length&&
(h.f=d.fieldspec);"T"===c[g.MULTILINE]&&0<f&&(h.ln=String(f));if(!C(b,c,f,h,e))return null;c[g.MASTER]&&""!==c[g.MASTER]&&(d=c[g.MASTER],c=d[g.FIELD_OBJECT.NAME],d=d.hasOwnProperty(g.FIELD_OBJECT.MACHINE)?d[g.FIELD_OBJECT.MACHINE]:null,h["si_"+c]=e.getValue({isMachineField:null!==d,machineName:d,fieldName:c,ln:f}));return{url:k,payload:h}}function C(c,d,a,e,b){d=d[g.AUX_FIELDS];for(var f=0;d&&f<d.length;f++){var m=d[f],h=m.hasOwnProperty(g.FIELD_OBJECT.NAME)?m[g.FIELD_OBJECT.NAME]:"",k=m.hasOwnProperty(g.FIELD_OBJECT.MACHINE)?
m[g.FIELD_OBJECT.MACHINE]:null,q=m.hasOwnProperty(g.FIELD_OBJECT.HTML_REF)?m[g.FIELD_OBJECT.HTML_REF]:null,k=b.getValue({isMachineField:null!==k,machineName:k,fieldName:h,ln:a});c&&!k&&0!==k&&""!==k&&(k=eval(q));if(D(m,k,"T"===m[g.FIELD_OBJECT.REQUIRED]))return!1;e["si_"+h]=k}return!0}function A(c){var d={};if(-1!==c.indexOf("?")){var a=c.split("?");c=a[0];if(0<a[1].length)for(var a=a[1].split("\x26"),e=0;e<a.length;e++)if(0<a[e].length){var b=a[e].split("\x3d");d[b[0]]=String(b[1])}}return{url:c,
payload:d}}function D(c,d,a){var e=!0;c.hasOwnProperty(g.FIELD_OBJECT.REQUIRED_SCRIPT)&&(e=eval(c[g.FIELD_OBJECT.REQUIRED_SCRIPT])?!0:!1);c.hasOwnProperty(g.FIELD_OBJECT.IS_REQUIRED)&&c.isRequired&&(e=!0);c=d&&0!=d.length?!0:!1;return a&&e&&!c}function r(c){c=c.replace(/\\/g,"\\\\");c=c.replace(/'/g,"\\'");return c=c.replace(/"/g,'\\"')}function w(c){return"[object Function]"===Object.prototype.toString.call(c)}function E(c,d,a){var e=d.hasOwnProperty(l.FIRE_FIELDCHANGE),b=d.hasOwnProperty(l.IS_CLIENT_SLAVING);
c.setFieldNoSlaving(a,!e);var f=d[l.OPTIONS];if(f){var m=c.getValue(a),h=!1;c.removeOption(a);for(var k=0;k<f.length;k++){var q=f[k];c.insertOption(a,q[0],q[1]);m===q[0]&&(h=!0)}c.isValEmpty(d[l.VALUE])&&!c.isValEmpty(m)&&h&&c.setValue(a,m,!1)}if(null==d[l.NO_OVERRIDE]||c.isValEmpty(c.getValue(a)))if(f="boolean"===typeof d[l.CONDITION]?d[l.CONDITION]:eval(d[l.CONDITION]),!d.hasOwnProperty(l.CONDITION)||f)d.hasOwnProperty(l.TEXT)?c.setSelectValue(a,d[l.VALUE],d[l.TEXT],e,b):d.hasOwnProperty(l.VALUE)&&
c.setValue(a,d[l.VALUE],e,b)}function F(c,d){var a="undefined"!=typeof ftabs&&null!=ftabs[getFieldName(c)]?document.forms[ftabs[getFieldName(c)]+"_form"]:document.forms[0],a=getFormElement(a,getFieldName(c));return null!=a?"multiselect"===d?getMultiDropdown(a,window).getValues():getDropdown(a,window).getValues():null}function G(c,d){var a="undefined"!=typeof ftabs&&null!=ftabs[getFieldName(c)]?document.forms[ftabs[getFieldName(c)]+"_form"]:document.forms[0],a=getFormElement(a,getFieldName(c));return null!=
a?"multiselect"===d?getMultiDropdown(a,window).textArray:getDropdown(a,window).getTexts():null}function H(c,d,a){c=getFormElement(document.forms[c+"_form"],getFieldName(d));return null!=c?"multiselect"===a?getMultiDropdown(c,window).getValues():getDropdown(c,window).getValues():null}function I(c,d,a){c=getFormElement(document.forms[c+"_form"],getFieldName(d));return null!=c?"multiselect"===a?getMultiDropdown(c,window).textArray:getDropdown(c,window).getTexts():null}function y(c){if(null===c||void 0===
c)return!0;c=String(c);return 0===c.length||!/\S/.test(c)}function x(c){return null!=c?c:""}var g={QUERY_URL:"queryurl",EDIT:"edit",DISPLAY_ONLY:"displayonly",AUX_FIELDS:"auxfields",MULTILINE:"ln",MASTER:"master",FIELD_OBJECT:{NAME:"name",MACHINE:"machine",HTML_REF:"htmlReference",REQUIRED:"required",REQUIRED_SCRIPT:"requiredScript",IS_REQUIRED:"isRequired"}},B={URL:"url",PAYLOAD:"payload"},l={NAME:"name",MACHINE_NAME:"machine",FIRE_FIELDCHANGE:"firechange",IS_CLIENT_SLAVING:"isClientSlaving",OPTIONS:"options",
VALUE:"value",TEXT:"text",NO_OVERRIDE:"nooverride",CONDITION:"condition"};return{cleanupQueryURL:A,getQueryRequest:z,getURL:function(c,d){var a=z(c,d,void 0),e=a.url,a=a.payload;-1==e.indexOf("?")&&(e+="?");var b=!0,f;for(f in a)b?b=!1:e+="\x26",e=0===f.indexOf("si_")||"q"===f||"si"===f||"id"===f?e+f+"\x3d"+encodeURIComponent(emptyIfNull(a[f])):e+f+"\x3d"+emptyIfNull(a[f]);return e},processSlavingValues:function(c,d,a){for(var e=d?new v(d):new u,b=0;c&&b<c.length;b++){var f=c[b],m=f[l.NAME],h=f.hasOwnProperty(l.MACHINE_NAME),
k=h?f[l.MACHINE_NAME]:null,q=h?e.getCurrentLineItemIndex(k):-1,h={isMachineField:h,machineName:k,fieldName:m,lineNum:q};h.isMultiSelectField=e.isFieldMultiSelect(k,m,q);if(w(f))a?a(f.toString()+";"+f.name+"();"):f(e);else try{E(e,f,h)}catch(g){if(e instanceof u)e.serverCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",["Excepion in processing values",g.msg+",path \x3d  "+(d?"":window.location.pathname)]);else throw g;}finally{null==d&&e.setFieldNoSlaving(h,!1)}}},verifySlavingValues:function(c,
d){try{for(var a=0;c&&a<c.length;a++)for(var e=0;d&&e<d.length;e++){var b=d[e];if(!(w(b)||b.name!=c[a][0]||null!=b.machine&&b.machine!=c[a][1]||null==b.machine&&""!=c[a][1])){var f=b.options,m=nlapiGetLineItemField(b.machine,b.name);if(null!=b.machine){if(null!=f){var h=H(b.machine,b.name,m.type),k=I(b.machine,b.name,m.type);if(h.length!=f.length)nsServerCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",["Json option Length mismatch","Options length do not match. Field name:"+b.name+
" ,path \x3d "+window.location.pathname]);else for(var g=0;f&&g<f.length;g++){var l=f[g],u=r(h[g]),t=r(k[g]),t=t.replace("\n","");if(l[0]!=u){nsServerCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",["Json option Value mismatch","Options slaving value do not match. Field name:"+b.name+" jsonValue \x3d"+l[0]+" legacyValue \x3d "+h[g]+" ,path \x3d "+window.location.pathname]);break}if(l[1]!=t){nsServerCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",["Json option Value mismatch",
"Options slaving text do not match. Field name:"+b.name+" jsonValue \x3d"+l[1]+" legacyValue \x3d "+k[g]+" ,path \x3d "+window.location.pathname]);break}}}if(null==b.nooverride&&(null==b.condition||eval(b.condition))){var n=nlapiGetCurrentLineItemValue(b.machine,b.name),n=r(n);null!=b.value&&b.value!=n&&nsServerCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",["Json Value mismatch","Value slaving result do not match. Field name:"+b.name+", jsonText \x3d "+b.value+", actualValue  \x3d "+
n+" ,path \x3d "+window.location.pathname]);if(null!=b.text){var p=nlapiGetCurrentLineItemText(b.machine,b.name),p=r(p);b.text!=p&&nsServerCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",["Json Value mismatch","Value slaving result do not match. Field name:"+b.name+", jsonText \x3d "+b.text+", actualValue  \x3d "+p+" ,path \x3d "+window.location.pathname])}}}else{n=nlapiGetFieldValue(b.name);n=r(n);f=b.options;m=nlapiGetField(b.name);if(null!=f)if(h=F(b.name,m.type),k=G(b.name,
m.type),h.length!=f.length)nsServerCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",["Json option Length mismatch","Options length do not match. Field name:"+b.name+" ,path \x3d "+window.location.pathname]);else for(g=0;f&&g<f.length;g++){l=f[g];u=r(h[g]);t=r(k[g]);t=t.replace("\n","");if(l[0]!=u){nsServerCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",["Json option Value mismatch","Options slaving value do not match. Field name:"+b.name+" jsonValue \x3d"+l[0]+
" legacyValue \x3d "+h[g]+" ,path \x3d "+window.location.pathname]);break}if(l[1]!=t){nsServerCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",["Json option Value mismatch","Options slaving text do not match. Field name:"+b.name+" jsonValue \x3d"+l[1]+" legacyValue \x3d "+t[g]+" ,path \x3d "+window.location.pathname]);break}}null!=b.nooverride||null!=b.condition&&!eval(b.condition)||(null!=b.value&&b.value!=n&&nsServerCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",
["Json Value mismatch","Value slaving result do not match. Field name:"+b.name+", jsonText \x3d "+b.value+", actualValue  \x3d "+n+" ,path \x3d "+window.location.pathname]),null!=b.text&&(p=nlapiGetFieldText(b.name),p=r(p),b.text!=p&&nsServerCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",["Json Value mismatch","Value slaving result do not match. Field name:"+b.name+", jsonText \x3d "+b.text+", actualValue  \x3d "+p+" ,path \x3d "+window.location.pathname])))}}}}catch(v){nsServerCall("/app/common/scripting/nlapijsonhandler.nl",
"logSlavingError",["Excepion in verifying values",v.msg+" ,path \x3d "+window.location.pathname])}},redrawEditMachines:function(c){for(var d in c){var a=c[d];if(null!=a.edit&&(null==a.nooverride||1==document.forms[0].elements["next"+d+"idx"].value)){for(var e=a.data,b="",f=0;e&&f<e.length;f++){for(var g=e[f],h=0;g&&h<g.length;h++)""!=b&&(b+=String.fromCharCode(1)),b+=g[h];f!=e.length-1&&(b+=String.fromCharCode(2))}document.forms[0].elements[d+"data"].value=b;clearLineArray(name);document.forms[0].elements["next"+
d+"idx"].value=null==e?1:e.length+1;document.forms[0].elements[d+"valid"].value="T";setMachineContentUpdated(d,!0);clearLineArray(name);null!=parent.document.forms.main_form.elements[d+"loaded"]&&(parent.document.forms.main_form.elements[d+"loaded"].value="T");null!=parent.document.forms.main_form.elements[d+"dotted"]&&(parent.document.forms.main_form.elements[d+"dotted"].value="T");null!=window[d+"_machine"]&&(window[d+"_machine"].refresheditmachine(!0),window[d+"_machine"].recalc());e=parent.document.getElementById(d+
"lnkdot");null!=e&&(e.style.display="")}w(a.metadata)&&a.metadata.call()}}}}();"function"==typeof Object.freeze&&(slavingUtil=Object.freeze(slavingUtil));
//# sourceMappingURL=/assets/legacy_slavingutil/426354954.map