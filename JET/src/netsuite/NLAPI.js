var isRUMEnabled=typeof(NLRUM)!=="undefined";var callClientScript=(function(){var b=null;function a(d,c){if(!!window&&!!window.location&&!!window.location.href&&/(\?|&)withcurrentrecord\b/.test(window.location.href)){return true;}var e=true;if(includedVersion2plusScript()){fetchClientScripts();e=runClientScript(d,c);}else{e=oldScriptCall(d,c);}return e;}return a;})();var fetchClientScripts=(function(){var a=false;function b(f){if(!a&&includedVersion2plusScript()){require.initDebug(f);require.forceSync(true);require.setInternal(true);try{require(["N"],function(){});require(["N/msgRouter"],function(h){msgRouter=h;});}finally{require.setInternal(false);}for(var d=0;d<_clientScriptContext.superScriptList.length;d++){var e=_clientScriptContext.superScriptList[d];if(e.version==="1.0"){moduleKeeper[d]=JSON.parse(e.scriptInfo);}else{var c=require;if(e.scriptInfo.indexOf("N/")!==0){var g=JSON.parse(e.amdConfig);g.context=e.scriptInfo;c=require.config(g);}c([e.scriptInfo],function(i,h){moduleKeeper[i]=h;}.bind(undefined,d));}}require.forceSync(false);a=true;}}return b;})();function includedVersion2plusScript(){return(typeof(require)!=="undefined")&&(typeof(_clientScriptContext)!=="undefined")&&(_clientScriptContext.superScriptList.length>0);}function organizeArgs(d,e,c){function b(f){if(isNaN(f)){return f;}else{f=parseInt(f,10);return(f<0)?f:f-1;}}var a;switch(d){case"pageInit":a=[{currentRecord:e,mode:c[0]}];break;case"saveRecord":a=[{currentRecord:e}];break;case"lineInit":case"validateDelete":case"validateInsert":case"validateLine":a=[{currentRecord:e,sublistId:c[0]}];break;case"recalc":a=[{currentRecord:e,sublistId:c[0],operation:c[1]}];break;case"postSourcing":a=[{currentRecord:e,sublistId:c[0],fieldId:c[1],line:b(c[2])}];break;case"validateField":case"fieldChanged":a=[{currentRecord:e,sublistId:c[0],fieldId:c[1],line:b(c[2]),column:b(c[3])}];break;default:a=[];}return a;}var triggerInfo={pageInit:{fieldId:"nlapiPI",needsReturn:false},saveRecord:{fieldId:"nlapiSR",needsReturn:true},lineInit:{fieldId:"nlapiLI",needsReturn:false},validateDelete:{fieldId:"nlapiVD",needsReturn:true},validateInsert:{fieldId:"nlapiVI",needsReturn:true},validateLine:{fieldId:"nlapiVL",needsReturn:true},postSourcing:{fieldId:"nlapiPS",needsReturn:false},recalc:{fieldId:"nlapiRC",needsReturn:false},validateField:{fieldId:"nlapiVF",needsReturn:true},fieldChanged:{fieldId:"nlapiFC",needsReturn:false}};if(Object.freeze){triggerInfo=Object.freeze(triggerInfo);}function oldScriptCall(c,b){var h=triggerInfo[c];var e=document.forms.main_form.elements[h.fieldId];var g=h.needsReturn;var f=true;if((e!=null)&&(e.value.length>0)){var a=e.value.split(String.fromCharCode(1));for(var d=0;f&&d<a.length;d++){if(isRUMEnabled&&!isValEmpty(a[d])){NLRUM.clientScriptBegin(c,fScriptIds[d]);}f=nsapiCallUserScript(c,fScriptIds[d],a[d],b);f=g?f:true;if(isRUMEnabled&&!isValEmpty(a[d])){NLRUM.clientScriptEnd(c,fScriptIds[d],b,nlapiGetRecordType(),"1.0");}}}return f;}function runClientScript(t,b){var b=b||[];var x=true;var y=nsapiIsInternal();var d=require.config;try{nsapiSetIsInternal(false);var F=triggerInfo[t].needsReturn;var A=moduleKeeper[moduleKeeper.length-2];var l=moduleKeeper[moduleKeeper.length-1];var f=l.get();msgRouter.pushQueue(f);try{var k=organizeArgs(t,f,b);for(var z=0;z<moduleKeeper.length-2;z++){var q=_clientScriptContext.superScriptList[z];if(q.isLibraryModule||q.excludeFromClientScriptExecution){continue;}var g=moduleKeeper[z];var p=(typeof(q.version)!=="undefined")?q.version:"1.0";var o=q.scriptId;if(nlapiGetContext().usage){nlapiGetContext().usage[o]=0;}var B=window.NLScriptId;window.NLScriptId=o;try{A.setupScriptRun(q);var G=((p==="2.0")&&(t==="recalc"))?"sublistChanged":t;if(!!g&&g.hasOwnProperty(G)){var n=(p==="1.0"&&G==="fieldChanged"&&document.forms.main_form.elements.nlapiFC!=null)?(document.forms.main_form.elements.nlapiFC.value!==""):true;if(n){var E=g[G];var H;if(typeof(E)==="function"){H=E;}else{if(typeof(E)==="string"){namespacePaths=E.split(".");H=this[namespacePaths[0]];namespacePaths=namespacePaths.splice(1);for(var w in namespacePaths){if(namespacePaths.hasOwnProperty(w)){H=H[namespacePaths[w]];}}}}var s=(p==="2.0")?k:(function(j){var e=[];for(var I=0;I<j.length;I++){e.push(typeof j[I]==="undefined"?null:j[I]);}return e;})(b);if(typeof(H)==="function"){if(typeof(nlapi)!=="undefined"&&nlapi&&nlapi.async){nlapi.async.prepareForAsync({info:q,version:p,record:f,trigger:G,args:b});}try{if(isRUMEnabled){NLRUM.clientScriptBegin(G,o);}require.config=C;x=!!H.apply(null,s);if(isRUMEnabled){NLRUM.clientScriptEnd(G,o,b,nlapiGetRecordType(),p);}}finally{if(typeof(nlapi)!=="undefined"&&nlapi&&nlapi.async){nlapi.async.unloadAsync();}require.config=d;}if(F&&!x){break;}}}}}finally{window.NLScriptId=B;}}}finally{msgRouter.popQueue();}}catch(D){var m=o;var u=D.getCode!=null&&typeof(D.getCode)=="function"?D.getId():null;var a=D.getCode!=null&&typeof(D.getCode)=="function"?D.getCode():typeof(D)=="string"?new String(D):typeof(D)=="object"&&D.name&&D.message?"JS_EXCEPTION":"UNEXPECTED_ERROR";if(a=="UNEXPECTED_ERROR"&&u!=null){a+=" (id="+u+")";}var h=D.getDetails!=null&&typeof(D.getDetails)=="function"?emptyIfNull(D.getDetails()):typeof(D)=="string"?"":typeof(D)=="object"&&D.name&&D.message?D.name+" "+D.message:D.toString();var c=D.getCode!=null&&typeof(D.getCode)=="function"&&D.suppressnotification===true;var v=o!="customform";alert(window.nsScriptErrorMsg+"\n\n"+m+" ("+t+")\n"+(isValEmpty(nlapiGetContext().getBundleId())?"":" ("+nlapiGetContext().getBundleId()+")")+"\n\n"+a+"\n"+h);if(v){nsServerCall(nsJSONProxyURL,"logError",[a,h,u,m,o,c,nlapiGetRecordType(),nlapiGetRecordId()]);}throw D;}finally{nsapiUpdateMachines();nsapiSetIsInternal(y);}return x;function r(e){return Object.prototype.toString.call(e)==="[object String]"&&(e.indexOf("/")>=0||e==="N"||e==="N.js");}function C(i){if(i&&i.context&&r(i.context)){var e=nsServerCall(nsJSONProxyURL,"getErrorMessage",["INVALID_CONFIGURATION_UNABLE_TO_CHANGE_REQUIRE_CONFIGURATION_FOR_1",i.context,null,null,null]);throw nlapiCreateError("INVALID_CONFIGURATION_UNABLE_TO_CHANGE_REQUIRE_CONFIGURATION_FOR_1",e);}return d(i);}}function nlapiPageInit(b){var a=NS.form.isInited();try{NS.form.setInited(true);window.loadcomplete=true;if(document.forms.main_form.elements.wfPI!=null&&document.forms.main_form.elements.wfPI.value.length>0){nsapiCallScript("pageInit","internal",document.forms.main_form.elements.wfPI.value,[b]);}if(document.forms.main_form.elements.nsapiPI!=null&&document.forms.main_form.elements.nsapiPI.value.length>0){nsapiCallScript("pageInit","internal",document.forms.main_form.elements.nsapiPI.value,[b]);}callClientScript("pageInit",[b]);}finally{NS.form.setInited(a);}}function enableDisabledFields(b){if(b){for(var a in nsDisabledFields){if(nsDisabledFields[a]){disableField(getFormElement(document.forms.main_form,a),false);}nsDisabledFields[a]=false;}}}function nlapiSaveRecord(){var a=true;if(document.forms.main_form.elements.wfSR!=null&&document.forms.main_form.elements.wfSR.value.length>0){a=nsapiCallScript("saveRecord","internal",document.forms.main_form.elements.wfSR.value);if(!a){return false;}}if(document.forms.main_form.elements.nsapiSR!=null&&document.forms.main_form.elements.nsapiSR.value.length>0){a=nsapiCallScript("saveRecord","internal",document.forms.main_form.elements.nsapiSR.value);if(!a){return false;}}a=a&&callClientScript("saveRecord");return a;}function nlapiValidateField(g,d,f,e,b){if(!window.loadcomplete||document.page_is_resetting){return false;}var h=true;if(g!=null&&f==null&&e==null){f=nlapiGetCurrentLineItemIndex(g);}var c=nsapiResolveField(g,d,f,e);if(c==null){return h;}if(b!=null){optwin=b;}var i=c.checkvalid;try{c.checkvalid=false;if(document.forms.main_form.elements.wfVF!=null&&document.forms.main_form.elements.wfVF.value.length>0){h=nsapiCallScript("validateField","internal",document.forms.main_form.elements.wfVF.value,[g,d,f,e]);if(!h){return false;}}if(document.forms.main_form.elements.nsapiVF!=null&&document.forms.main_form.elements.nsapiVF.value.length>0){h=nsapiCallScript("validateField","internal",document.forms.main_form.elements.nsapiVF.value,[g,d,f,e]);if(!h){return false;}}h=h&&callClientScript("validateField",[g,d,f,e]);return h;}finally{optwin=null;c.checkvalid=i;if(!h){if(typeof(ftabs)!="undefined"){var a=ftabs[getFieldName(d)];if(a!=null&&a!="main"&&!isTabShown(a)){ShowTab(a,true);}}if(!c.donotfocus){setFieldFocus(c);if(c.select!=null){c.select();}}}}}function nlapiFieldChanged(g,c,b,f,h){if(!window.loadcomplete||document.page_is_resetting){return;}var e=NS.form.isInited();var a=NS.form.setInited;try{NS.form.setInited(true);NS.form.setInited=function(i){a.call(NS.form,i);e=i;};if(g!=null&&b==null&&f==null){b=nlapiGetCurrentLineItemIndex(g);}var d=nsapiResolveField(g,c,b,f);if(d==null){return;}if(h!=null){optwin=h;}if(document.forms.main_form.elements.wfFC!=null&&document.forms.main_form.elements.wfFC.value.length>0){nsapiCallScript("fieldChanged","internal",document.forms.main_form.elements.wfFC.value,[g,c,b,f]);}if(document.forms.main_form.elements.nsapiFC!=null&&document.forms.main_form.elements.nsapiFC.value.length>0){nsapiCallScript("fieldChanged","internal",document.forms.main_form.elements.nsapiFC.value,[g,c,b,f]);}nsFireUserOnChange(g,c,b,f);}finally{NS.form.setInited=a;NS.form.setInited(e);optwin=null;}}function nsFireUserOnChange(d,b,a,c){callClientScript("fieldChanged",[d,b,a,c]);}function nlapiPostSourcing(d,b,a){if(!window.loadcomplete||document.page_is_resetting){return;}var c=NS.form.isInited();try{NS.form.setInited(true);a=d!=null&&a==null?nlapiGetCurrentLineItemIndex(d):a;if(document.forms.main_form.elements.wfPS!=null&&document.forms.main_form.elements.wfPS.value.length>0){nsapiCallScript("postSourcing","internal",document.forms.main_form.elements.wfPS.value,[d,b,a]);}if(document.forms.main_form.elements.nsapiPS!=null&&document.forms.main_form.elements.nsapiPS.value.length>0){nsapiCallScript("postSourcing","internal",document.forms.main_form.elements.nsapiPS.value,[d,b,a]);}callClientScript("postSourcing",[d,b,a]);}finally{NS.form.setInited(c);}}function nlapiLineInit(a){try{if(document.forms.main_form.elements.nsapiLI!=null&&document.forms.main_form.elements.nsapiLI.value.length>0){nsapiCallScript("lineInit","internal",document.forms.main_form.elements.nsapiLI.value,[a]);}callClientScript("lineInit",[a]);}finally{optwin=null;}}function nlapiLineCommit(b,a){try{if(document.forms.main_form.elements.nsapiLC!=null&&document.forms.main_form.elements.nsapiLC.value.length>0){nsapiCallScript("lineCommit","internal",document.forms.main_form.elements.nsapiLC.value,[b,a]);}}finally{optwin=null;}}function nlapiPostDeleteLine(b,a){try{if(document.forms.main_form.elements.nsapiPD!=null&&document.forms.main_form.elements.nsapiPD.value.length>0){nsapiCallScript("postDeleteLine","internal",document.forms.main_form.elements.nsapiPD.value,[b,a]);}}finally{optwin=null;}}function nlapiValidateDelete(a){try{var b=true;if(document.forms.main_form.elements.nsapiVD!=null&&document.forms.main_form.elements.nsapiVD.value.length>0){b=nsapiCallScript("validateDelete","internal",document.forms.main_form.elements.nsapiVD.value,[a]);}b=b&&callClientScript("validateDelete",[a]);return b;}finally{optwin=null;}}function nlapiValidateInsert(a){try{var b=true;if(document.forms.main_form.elements.nsapiVI!=null&&document.forms.main_form.elements.nsapiVI.value.length>0){b=nsapiCallScript("validateInsert","internal",document.forms.main_form.elements.nsapiVI.value,[a]);}b=b&&callClientScript("validateInsert",[a]);return b;}finally{optwin=null;}}function nlapiValidateLine(a){try{var b=true;if(document.forms.main_form.elements.nsapiVL!=null&&document.forms.main_form.elements.nsapiVL.value.length>0){b=nsapiCallScript("validateLine","internal",document.forms.main_form.elements.nsapiVL.value,[a]);if(!b){return false;}}b=b&&callClientScript("validateLine",[a]);return b;}finally{optwin=null;}}function nlapiRecalc(type,localRecalc,operation){try{if(localRecalc){eval(isEditMachine(type)?type+"_machine.recalc(!window.loadcomplete)":type+"RecalcMachine(true)");return;}operation=operation!=null?operation:"commit";if(document.forms.main_form.elements.nsapiRC!=null&&document.forms.main_form.elements.nsapiRC.value.length>0){nsapiCallScript("recalc","internal",document.forms.main_form.elements.nsapiRC.value,[type,operation]);}callClientScript("recalc",[type,operation]);}finally{optwin=null;}}var nlapiSetFieldValue=(function(){function c(o,r,q,u,g){nsapiAssertTrue(!isSubrecordField(null,o),"SSS_INVALID_OPERATION_USING_SUBRECORD_FIELD");var n=" applied unapplied total lastmodifieddate createddate datecreated roi openingbalance ";if(nsapiIsInternal()||n.indexOf(" "+getFieldName(o)+" ")==-1){var j=typeof(ftypes)!="undefined"&&ftypes[getFieldName(o)]!=null?ftypes[getFieldName(o)]:null;r=process_currency_field_value(r,j);var h=typeof(ftabs)!="undefined"&&ftabs[getFieldName(o)]!=null?document.forms[ftabs[getFieldName(o)]+"_form"]:document.forms.main_form;if(h==null){h=document.forms.qadd_form;}var e=getFormElement(h,getFieldName(o));if(e==null){e=getFormElement(h,getFieldName(o)+"_send");}if(e!=null){var w=getSlavingAsync();try{if(u){setSlavingAsync(false);}var s="",v="";if(g&&!Array.isArray(r)&&(isNumericField(e)||isCurrencyField(e))){r=NLStringToNumber(r);}if(isPopupSelect(e)||isPopupMultiSelect(e)||isDisplayOnlySelect(e)){var m=r;if(Array.isArray(r)){m=r.join(String.fromCharCode(5));}var l=NLEntryForm_querySelectText(o,null,null,m);for(var t in l){if(l.hasOwnProperty(t)){s=l[t]!=null?(s!=""?s+String.fromCharCode(5):"")+t:s;v=l[t]!=null?(v.length>0?v+String.fromCharCode(5):"")+l[t]:v;}}}else{s=r;v=null;}setFormValue(e,s,v);if(document.getElementById(o+"_val")!=null){var k=s;if(j=="checkbox"){k=(s=="T"?nsYesString:nsNoString);}else{if(isNumericField(e)||isCurrencyField(e)){k=NLNumberToString(s);}}setInlineTextValue(document.getElementById(o+"_val"),k);}if(e.type!="hidden"&&nlapiGetField(o).getType()=="radio"){e=getSelectedRadio(e);}nsapiFireOnChange(e,q,g);}finally{setSlavingAsync(w);}}else{if(document.getElementById(o+"_val")!=null){e=document.getElementById(o+"_val");if(isNumericField(e)||isCurrencyField(e)){r=NLNumberToString(r);}setInlineTextValue(e,r);}else{if(typeof fieldtosubrecordmap!="undefined"){var f=fieldtosubrecordmap["main_"+o];if(f!=null&&f.length>0){var p=fieldtosubrecordfieldmap["main_"+o+"_"+f];if(p!=null&&p.length>0){var d=nlapiLoadSubrecord(f);if(d){d.setFieldValue(p,r);nsFireUserOnChange(null,o,null,null);}}}}}}}}function a(f,h,d,e){var g=false;c(f,h,d,e,g);}function b(f,h,d,e){var g=true;c(f,h,d,e,g);}a.v2=b;return a;}());var nlapiSetSelectValue=(function(){function a(g,j,i,l,d,h){nsapiAssertTrue(!isSubrecordField(null,g),"SSS_INVALID_OPERATION_USING_SUBRECORD_FIELD");var e=typeof(ftabs)!="undefined"&&ftabs[getFieldName(g)]!=null?document.forms[ftabs[getFieldName(g)]+"_form"]:document.forms.main_form;var f=getFormElement(e,getFieldName(g));if(f!=null){var k=getSlavingAsync();try{if(d){setSlavingAsync(false);}setFormValue(f,j,i);nsapiFireOnChange(f,l,h);}finally{setSlavingAsync(k);}}}function c(f,i,g,d,e){var h=false;a(f,i,g,d,e,h);}function b(f,i,g,d,e){var h=true;a(f,i,g,d,e,h);}c.v2=b;return c;}());var nlapiSetMatrixValue=(function(){function b(h,e,g,j,m,d,i){nsapiAssertTrue(!isSubrecordField(h,e),"SSS_INVALID_OPERATION_USING_SUBRECORD_FIELD");nsapiCheckArgs([h,e,g],["type","name","column"],"nlapiSetMatrixValue");if(hasEncodedMatrixField(h,e,g)){var l=getFormValue(document.forms.main_form.elements[h+"header"]);var f=l!=null?getFormElement(nvl(document.forms[h+"_form"],document.forms.main_form),l+g):null;if(f==null){f=getFormElement(document.forms[h+"_form"],l+g+"_send");}if(f!=null){if(i&&(isNumericField(f)||isCurrencyField(f))){j=NLStringToNumber(j);}var k=getSlavingAsync();try{if(d){setSlavingAsync(false);}setFormValue(f,j);nsapiFireOnChange(f,m,i);}finally{setSlavingAsync(k);}}}}function c(i,f,h,j,d,e){var g=false;b(i,f,h,j,d,e,g);}function a(i,f,h,j,d,e){var g=true;b(i,f,h,j,d,e,g);}c.v2=a;return c;}());function nlapiSetFieldValues(d,c,a,b){nsapiAssertTrue(!isSubrecordField(null,d),"SSS_INVALID_OPERATION_USING_SUBRECORD_FIELD");var e=nlapiGetField(d);if(e==null||e.getType()!="multiselect"){return;}nlapiSetFieldValue(d,c!=null?c.join(String.fromCharCode(5)):"",a,b);}var nlapiSetFieldText=(function(){function b(k,o,s,e,q){var m=nlapiGetField(k);if(m==null||m.getType().indexOf("select")==-1){return;}o=resolveDeprecatedFieldText(k,o);var f=typeof(ftabs)!="undefined"&&ftabs[getFieldName(k)]!=null?document.forms[ftabs[getFieldName(k)]+"_form"]:document.forms.main_form;var g=getFormElement(f,getFieldName(k));if(isPopupSelect(g)){var j=getFormElement(f,getFieldName(k)+"_display");var h=!isValEmpty(o)&&o.charAt(o.length-1)=="%";try{j.value=h||(!isValEmpty(o)&&o.charAt(o.length-1)=="\\")?o.substring(0,o.length-1):o;NLPopupSelect_setExactMatchQuery(j,!h);var r=getSlavingAsync();try{if(e){setSlavingAsync(false);}nsapiFireOnChange(j,s,q);}finally{setSlavingAsync(r);}}finally{NLPopupSelect_setExactMatchQuery(j,false);}}else{if(m.getType()=="multiselect"){var d=[];var l=o!=null?(""+o).split(String.fromCharCode(5)):[];for(var n=0;n<l.length;n++){d[n]=getSelectValueForText(g,l[n]);}nlapiSetFieldValues(k,d,s,e);}else{if(m.isHidden()){if(isValEmpty(o)){nlapiSetFieldValue(k,o,s,e);}else{var p=NLEntryForm_querySelectValue(k,null,o);if(nlapiGetContext().getCompany()==="NLCORP"){nsServerCall(nsJSONProxyURL,"logErrorDbAudit",["NLEntryForm_querySelectValue triggered on hidden field: "+k,"recordType: "+nlapiGetRecordType()+", recordId: "+nlapiGetRecordId()+", cf: "+nlapiGetFieldValue("customform")+", scriptId: "+nlapiGetContext().getScriptId()],null,"GET");}nlapiSetFieldValue(k,p!=null?p[o]:"",s,e);}}else{nlapiSetFieldValue(k,getSelectValueForText(g,o),s,e);}}}}function c(g,e,d,f){var h=false;b(g,e,d,f,h);}function a(g,e,d,f){var h=true;b(g,e,d,f,h);}c.v2=a;return c;}());var nlapiSetFieldTexts=(function(){function c(h,k,q,e,o){var j=nlapiGetField(h);if(j==null||j.getType()!="multiselect"){return null;}var f=typeof(ftabs)!="undefined"&&ftabs[getFieldName(h)]!=null?document.forms[ftabs[getFieldName(h)]+"_form"]:document.forms.main_form;var g=getFormElement(f,getFieldName(h));if(!isMultiSelect(g)&&!isPopupMultiSelect(g)){return;}if(k==null||k.length==0){nlapiSetFieldValues(h,[],q,e);}else{if(isPopupMultiSelect(g)||isDisplayOnlySelect(g)){var p=getSlavingAsync();try{if(e){setSlavingAsync(false);}var d="",n="";var m=NLEntryForm_querySelectValue(h,null,k.join(String.fromCharCode(5)));for(var l in m){if(m.hasOwnProperty(l)){d=m[l]!=null?(d!=""?d+String.fromCharCode(5):"")+m[l]:d;n=m[l]!=null?(n!=""?n+String.fromCharCode(5):"")+l:n;}}setFormValue(g,d,n);nsapiFireOnChange(g,q,o);}finally{setSlavingAsync(p);}}else{var d=[];for(var l=0;l<k.length;l++){d[l]=getSelectValueForText(g,k[l]);}nlapiSetFieldValues(h,d,q,e);}}}function b(f,h,d,e){var g=false;c(f,h,d,e,g);}function a(f,h,d,e){var g=true;c(f,h,d,e,g);}b.v2=a;return b;}());function nlapiGetFieldValue(d){nsapiAssertTrue(!isSubrecordField(null,d),"SSS_INVALID_OPERATION_USING_SUBRECORD_FIELD");if(typeof fieldtosubrecordmap!="undefined"){var h=fieldtosubrecordmap["main_"+d];if(h!=null&&h.length>0){var c=fieldtosubrecordfieldmap["main_"+d+"_"+h];if(c!=null&&c.length>0){var b=nlapiLoadSubrecord(h);if(b){return b.getFieldValue(c);}}}}var f=typeof(ftabs)!="undefined"&&ftabs[getFieldName(d)]!=null?document.forms[ftabs[getFieldName(d)]+"_form"]:document.forms.main_form;if(f==null){f=document.forms.qadd_form;}var a=typeof(ftypes)!="undefined"&&ftypes[getFieldName(d)]!=null?ftypes[getFieldName(d)]:null;var e=getFormElement(f,getFieldName(d));if(e==null){e=getFormElement(f,getFieldName(d)+"_send");}var g;if(e==null&&document.getElementById(d+"_val")!=null){e=document.getElementById(d+"_val");g=getInlineTextValue(e);if(isNumericField(e)||isCurrencyField(e)){g=NLStringToNumber(g);}}else{g=getFormValue(e);}return isValEmpty(g)&&a=="checkbox"?"F":g;}function nlapiGetFieldValues(a){nsapiAssertTrue(!isSubrecordField(null,a),"SSS_INVALID_OPERATION_USING_SUBRECORD_FIELD");var d=nlapiGetField(a);if(d==null||d.getType()!="multiselect"){return null;}if(d.isHidden()){return nlapiGetFieldValue(a).split(String.fromCharCode(5));}var c=typeof(ftabs)!="undefined"&&ftabs[getFieldName(a)]!=null?document.forms[ftabs[getFieldName(a)]+"_form"]:document.forms.main_form;var b=getFormElement(c,getFieldName(a));if(b==null){b=getFormElement(c,getFieldName(a)+"_send");}return isMultiSelect(b)||isPopupMultiSelect(b)?getFormValue(b,true):null;}function nlapiGetFieldTextOrValue(a){var b=false;if(a.indexOf(".")>0){a=a.substr(0,a.indexOf("."));b=true;}var c=nlapiGetField(a);if(c==null){return null;}else{if(b||c.getType().indexOf("select")==-1){return nlapiGetFieldValue(a);}else{return nlapiGetFieldText(a);}}}function nlapiGetFieldText(a){var f=nlapiGetField(a);if(f==null||f.getType().indexOf("select")==-1){return null;}if(document.getElementById(a+"_displayval")!=null){return getInlineTextValue(document.getElementById(a+"_displayval"));}var c=typeof(ftabs)!="undefined"&&ftabs[getFieldName(a)]!=null?document.forms[ftabs[getFieldName(a)]+"_form"]:document.forms.main_form;var b=getFormElement(c,getFieldName(a));if(b!=null){if(f.isHidden()){var d=nlapiGetFieldValue(a);if(isValEmpty(d)){return"";}else{var e=NLEntryForm_querySelectText(a,null,null,d);if(nlapiGetContext().getCompany()==="NLCORP"){nsServerCall(nsJSONProxyURL,"logErrorDbAudit",["NLEntryForm_querySelectText triggered on hidden field: "+a,"recordType: "+nlapiGetRecordType()+", recordId: "+nlapiGetRecordId()+", cf: "+nlapiGetFieldValue("customform")+", scriptId: "+nlapiGetContext().getScriptId()],null,"GET");}return e!=null?e[d]:"";}}if(f.getType()=="multiselect"){return getSelectText(b,true).join(String.fromCharCode(5));}return getSelectText(b);}return null;}function nlapiGetMatrixValue(c,a,b){nsapiAssertTrue(!isSubrecordField(c,a),"SSS_INVALID_OPERATION_USING_SUBRECORD_FIELD");nsapiCheckArgs([c,a,b],["type","name","column"],"nlapiGetMatrixValue");if(hasEncodedMatrixField(c,a,b)){var d=getFormValue(document.forms.main_form.elements[c+"header"]);if(d!=null){return getFormValue(getFormElement(nvl(document.forms[c+"_form"],document.forms.main_form),d+b));}}return null;}function nlapiGetFieldTexts(d){var e=nlapiGetField(d);if(e==null||e.getType()!="multiselect"){return null;}if(e.isHidden()){var b=nlapiGetFieldValue(d);if(isValEmpty(b)){return[];}else{var g=[];var h=NLEntryForm_querySelectText(d,null,null,b);for(var f in h){if(h.hasOwnProperty(f)){g.push(h[f]);}}return g;}}else{if(document.getElementById(d+"_displayval")!=null){var j=getInlineTextValue(document.getElementById(d+"_displayval"));return isValEmpty(j)?[]:j.split("\n");}}var a=typeof(ftabs)!="undefined"&&ftabs[getFieldName(d)]!=null?document.forms[ftabs[getFieldName(d)]+"_form"]:document.forms.main_form;var c=getFormElement(a,getFieldName(d));return isMultiSelect(c)||isPopupMultiSelect(c)?getSelectText(c,true):null;}function nlapiSetCurrentLineItemValues(e,d,c,a,b){nlapiSetCurrentLineItemValue(e,d,c!=null?c.join(String.fromCharCode(5)):"",a,b);}var nlapiSetCurrentLineItemValue=(function(){function c(n,g,p,r,d,o){nsapiAssertTrue(!isSubrecordField(n,g),"SSS_INVALID_OPERATION_USING_SUBRECORD_FIELD");if(hasEncodedField(n,g)){p=process_currency_field_value(p,getEncodedFieldType(n,g));var m=isEditMachine(n)?"":emptyIfNull(nlapiGetCurrentLineItemIndex(n));var f=getFormElement(document.forms[n.toLowerCase()+"_form"],getFieldName(g)+m);var q=getSlavingAsync();try{if(d){setSlavingAsync(false);}if(o&&(isNumericField(f)||isCurrencyField(f))){p=NLStringToNumber(p);}var t=null;if(isPopupSelect(f)||isPopupMultiSelect(f)){var l=NLEntryForm_querySelectText(g,n,m,p);for(var j in l){if(l.hasOwnProperty(j)){t=(t!=null?t+String.fromCharCode(5):"")+l[j];}}}setFormValue(f,p,t);nsapiFireOnChange(f,r,o);}finally{setSlavingAsync(q);}}else{if(hasEncodedField(n,"options")){if(optwin!=null){var f=optwin.document.forms[0].elements[getFieldName(g)];setFormValue(f,p);nsapiFireOnChange(f,r,o);}else{var s=document.forms[n.toLowerCase()+"_form"].options;s.value=setnamevaluelistvalue(s.value,g,p);syncnamevaluelist(s);}}else{if(typeof fieldtosubrecordmap!="undefined"){var e=fieldtosubrecordmap[n+"_"+g];if(e!=null&&e.length>0){var h=fieldtosubrecordfieldmap[n+"_"+g+"_"+e];if(h!=null&&h.length>0){var k=nlapiLoadCurrentLineItemSubrecord(n,e,true);if(k){k.setFieldValue(h,p);nsFireUserOnChange(n,g,m,null);}}}}}}}function a(h,f,i,d,e){var g=false;c(h,f,i,d,e,g);}function b(h,f,i,d,e){var g=true;c(h,f,i,d,e,g);}a.v2=b;return a;}());var nlapiSetCurrentLineItemSelectValue=(function(){function b(h,f,k,j,m,d,i){nsapiAssertTrue(!isSubrecordField(h,f),"SSS_INVALID_OPERATION_USING_SUBRECORD_FIELD");if(hasEncodedField(h,f)){var g=isEditMachine(h)?"":emptyIfNull(nlapiGetCurrentLineItemIndex(h));var e=getFormElement(document.forms[h.toLowerCase()+"_form"],getFieldName(f)+g);var l=getSlavingAsync();try{if(d){setSlavingAsync(false);}if(i&&(isNumericField(e)||isCurrencyField(e))){k=NLStringToNumber(k);}setFormValue(e,k,j);nsapiFireOnChange(e,m,i);}finally{setSlavingAsync(l);}}}function a(i,f,j,g,d,e){var h=false;b(i,f,j,g,d,e,h);}function c(i,f,j,g,d,e){var h=true;b(i,f,j,g,d,e,h);}a.v2=c;return a;}());function nlapiSetCurrentLineItemMatrixValue(e,c,d,f,a,b){nsapiAssertTrue(!isSubrecordField(e,c),"SSS_INVALID_OPERATION_USING_SUBRECORD_FIELD");nsapiCheckArgs([e,c,d],["type","fldnam","column"],"nlapiSetCurrentLineItemMatrixValue");if(hasEncodedMatrixField(e,c,d)){nlapiSetCurrentLineItemValue(e,getMatrixFieldName(e,c,d),f,a,b);}}var nlapiSetCurrentLineItemText=(function(){function a(j,h,i,m,d,k){var e;if(hasEncodedField(j,h)){e=getFormElement(document.forms[j.toLowerCase()+"_form"],getFieldName(h));}else{if(optwin!=null){e=optwin.document.forms[0].elements[getFieldName(h)];}else{return;}}if(isPopupSelect(e)){var g=e.form.elements[getFieldName(h)+"_display"];var f=!isValEmpty(i)&&i.charAt(i.length-1)=="%";try{g.value=f||(!isValEmpty(i)&&i.charAt(i.length-1)=="\\")?i.substring(0,i.length-1):i;NLPopupSelect_setExactMatchQuery(g,!f);var l=getSlavingAsync();try{if(d){setSlavingAsync(false);}nsapiFireOnChange(g,m,k);}finally{setSlavingAsync(l);}}finally{NLPopupSelect_setExactMatchQuery(g,false);}}else{nlapiSetCurrentLineItemValue(j,h,getSelectValueForText(e,i),m,d);}}function b(i,g,e,d,f){var h=false;a(i,g,e,d,f,h);}function c(i,g,e,d,f){var h=true;a(i,g,e,d,f,h);}b.v2=c;return b;}());function nlapiGetCurrentLineItemValue(f,d){nsapiAssertTrue(!isSubrecordField(f,d),"SSS_INVALID_OPERATION_USING_SUBRECORD_FIELD");if(hasEncodedField(f,d)){if(isEditMachine(f)){return getFormValue(getFormElement(document.forms[f.toLowerCase()+"_form"],getFieldName(d)));}else{var c=nlapiGetCurrentLineItemIndex(f);if(getEncodedFieldType(f,d)=="radio"){return getRadioValue(getFormElement(document.forms[f.toLowerCase()+"_form"],getFieldName(d)))==c?"T":"F";}if(d.indexOf("_display")>0){var e=d.replace("_display","")+c;var h=getFormElement(document.forms[f.toLowerCase()+"_form"],e);if(isPopupSelect(h)||isPopupMultiSelect(h)){d=e.toLowerCase()+"_display";}else{d=getFieldName(d)+c;}}else{d=getFieldName(d)+c;}return getFormValue(getFormElement(document.forms[f.toLowerCase()+"_form"],d));}}else{if(hasEncodedField(f,"options")){if(optwin!=null){return optwin.getFormValue(optwin.document.forms[0].elements[getFieldName(d)]);}else{return getnamevaluelistvalue(document.forms[f.toLowerCase()+"_form"].options.value,d);}}else{if(typeof fieldtosubrecordmap!="undefined"){var g=fieldtosubrecordmap[f+"_"+d];if(g!=null&&g.length>0){var b=fieldtosubrecordfieldmap[f+"_"+d+"_"+g];if(b!=null&&b.length>0){var a=nlapiLoadCurrentLineItemSubrecord(f,g,false);if(a){return a.getFieldValue(b);}}}}}}return null;}function nlapiGetCurrentLineItemMatrixValue(c,a,b){nsapiAssertTrue(!isSubrecordField(c,a),"SSS_INVALID_OPERATION_USING_SUBRECORD_FIELD");nsapiCheckArgs([c,a,b],["type","fldnam","column"],"nlapiGetCurrentLineItemMatrixValue");if(hasEncodedMatrixField(c,a,b)){return nlapiGetCurrentLineItemValue(c,getMatrixFieldName(c,a,b));}else{return null;}}function nlapiGetCurrentLineItemText(d,b){if(hasEncodedField(d,b)){var a=isEditMachine(d)?"":nlapiGetCurrentLineItemIndex(d);var c=getFormElement(document.forms[d.toLowerCase()+"_form"],getFieldName(b)+a);if(c!=null){var e=nlapiGetLineItemField(d,b);if(e!=null&&e.getType()=="multiselect"){return getSelectText(c,true).join(String.fromCharCode(5));}else{return getSelectText(c);}}else{return null;}}else{if(hasEncodedField(d,"options")){if(optwin!=null){return optwin.getSelectText(optwin.document.forms[0].elements[getFieldName(b)]);}else{return getnamevaluelistdisplayvalue(document.forms[d.toLowerCase()+"_form"].options.value,b);}}else{return null;}}}function nlapiGetCurrentLineItemTexts(d,b){var e=nlapiGetLineItemField(d,b);if(e==null||e.getType()!="multiselect"){return null;}if(hasEncodedField(d,b)){var a=isEditMachine(d)?"":nlapiGetCurrentLineItemIndex(d);var c=getFormElement(document.forms[d.toLowerCase()+"_form"],getFieldName(b)+a);if(c!=null){return getSelectText(c,true);}else{return null;}}}function nlapiFindLineItemValue(b,a,c){nsapiAssertTrue(!isSubrecordField(b,a),"SSS_INVALID_OPERATION_USING_SUBRECORD_FIELD");nsapiCheckArgs([b,a],["type","fldnam"],"nlapiFindLineItemValue");if(hasEncodedField(b,a)){return findEncodedValue(b,a,c);}return -1;}function nlapiFindLineItemMatrixValue(c,a,d,b){nsapiAssertTrue(!isSubrecordField(c,a),"SSS_INVALID_OPERATION_USING_SUBRECORD_FIELD");nsapiCheckArgs([c,a,b],["type","fldnam","column"],"nlapiFindLineItemMatrixValue");if(hasEncodedMatrixField(c,a,b)){a=getMatrixFieldName(c,a,b);}if(hasEncodedField(c,a)){return findEncodedValue(c,a,d);}return -1;}function nlapiSourceField(fldnam,fieldspec){nsapiCheckArgs([fldnam,fieldspec],["fldnam","fieldspec"],"nlapiSourceField");var fieldspecArg=fieldspec===false?false:typeof(fieldspec)=="string"?"'"+fieldspec+"'":(fieldspec===true?true:"");if(eval("typeof(Sync"+fldnam+")")=="function"){var slavingOrig=getSlavingAsync();try{setSlavingAsync(false);eval("Sync"+fldnam+"("+fieldspecArg+")");}finally{setSlavingAsync(slavingOrig);}}}function nlapiSourceLineItemField(type,fldnam,fieldspec,linenum){var slavingOrig=getSlavingAsync();var linenumArg=isEditMachine(type)?"":", "+linenum;var fieldspecArg=fieldspec===false?false:typeof(fieldspec)=="string"?"'"+fieldspec+"'":true;try{setSlavingAsync(false);if(eval("typeof(Sync"+fldnam+type+")")=="function"){eval("Sync"+fldnam+type+"("+fieldspecArg+linenumArg+")");}else{if(eval("typeof(Sync"+fldnam+")")=="function"){eval("Sync"+fldnam+"("+fieldspecArg+linenumArg+")");}}}finally{setSlavingAsync(slavingOrig);}}function nlapiFireOnChange(a){var c=typeof(ftabs)!="undefined"&&ftabs[getFieldName(a)]!=null?document.forms[ftabs[getFieldName(a)]+"_form"]:document.forms.main_form;var b=getFormElement(c,getFieldName(a));if(b==null){b=getFormElement(c,getFieldName(a)+"_send");}if(b!=null){if(nlapiGetField(a).getType()=="radio"){b=getSelectedRadio(b);}nsapiFireOnChange(b,true);}}function nlapiFireLineItemOnChange(d,b,a){var e=document.forms[d+"_form"];var c=getFormElement(e,getFieldName(b));if(c!=null){a=isEditMachine(d)?"":a;if(nlapiGetLineItemField(d,b,a).getType()=="radio"){c=getSelectedRadio(c);}nsapiFireOnChange(c,true);}}function nlapiSetLineItemValue(e,d,c,f){nsapiAssertTrue(!isSubrecordField(e,d),"SSS_INVALID_OPERATION_USING_SUBRECORD_FIELD");if(c==null||c<0||c>nlapiGetLineItemCount(e)){return;}if(nsapiIsInternal()||e!="item"||/(description|(revrec).+|(custcol).+)/.test(getFieldName(d))){f=process_currency_field_value(f,getEncodedFieldType(e,d));if(hasEncodedField(e,d)){setEncodedValue(e.toLowerCase(),c,getFieldName(d),f);if(isEditMachine(e)){nsUpdatedMachines[e.toLowerCase()]=1;}else{if(nsapiGetCurrentSegment(e)==nsapiGetSegmentForLine(e,c)){setFormValues(e,c,document.forms[e+"_form"],d);}}}else{if(hasEncodedField(e,"options")){setEncodedValue(e.toLowerCase(),c,"options",setnamevaluelistvalue(getEncodedValue(e,c,"options"),d,f));nsUpdatedMachines[e.toLowerCase()]=1;}else{if(typeof fieldtosubrecordmap!="undefined"){var g=fieldtosubrecordmap[e+"_"+d];if(g!=null&&g.length>0){var b=fieldtosubrecordfieldmap[e+"_"+d+"_"+g];if(b!=null&&b.length>0){var a=nlapiLoadLineItemSubrecord(e,g,c);if(a){a.setFieldValue(b,f);nsFireUserOnChange(e,d,c,null);}}}}}}}}function nlapiSetLineItemMatrixValue(d,b,a,c,e){nsapiAssertTrue(!isSubrecordField(d,b),"SSS_INVALID_OPERATION_USING_SUBRECORD_FIELD");if(hasEncodedMatrixField(d,b,c)){nlapiSetLineItemValue(d,getMatrixFieldName(d,b,c),a,e);}}function nlapiGetLineItemValue(e,d,c){nsapiAssertTrue(!isSubrecordField(e,d),"SSS_INVALID_OPERATION_USING_SUBRECORD_FIELD");if(hasEncodedField(e,d)){return getEncodedValue(e.toLowerCase(),c,getFieldName(d));}else{if(hasEncodedField(e,"options")){return getnamevaluelistvalue(getEncodedValue(e.toLowerCase(),c,"options"),d);}else{if(typeof fieldtosubrecordmap!="undefined"){var f=fieldtosubrecordmap[e+"_"+d];if(f!=null&&f.length>0){var b=fieldtosubrecordfieldmap[e+"_"+d+"_"+f];if(b!=null&&b.length>0){var a=nlapiLoadLineItemSubrecord(e,f,c);if(a){return a.getFieldValue(b);}}}}}}return null;}function nlapiGetLineItemMatrixValue(d,b,a,c){nsapiAssertTrue(!isSubrecordField(d,b),"SSS_INVALID_OPERATION_USING_SUBRECORD_FIELD");if(hasEncodedMatrixField(d,b,c)){return nlapiGetLineItemValue(d,getMatrixFieldName(d,b,c),a);}return null;}function nlapiGetLineItemText(c,b,a){var d=getFormElement(document.forms[c.toLowerCase()+"_form"],getFieldName(b));if(a!=null&&!isEditMachine(c)){d=getFormElement(document.forms[c.toLowerCase()+"_form"],getFieldName(b)+a);}if(d==null){return null;}else{if(!isNLDropDown(d)&&d.type=="hidden"){return getEncodedValue(c.toLowerCase(),a,getFieldName(b)+"_display");}else{return getlisttext(d,getEncodedValue(c.toLowerCase(),a,getFieldName(b)));}}}function nlapiGetLineItemTexts(c,b,a){var e=nlapiGetLineItemField(c,b);if(e==null||e.getType()!="multiselect"){return null;}var d=nlapiGetLineItemText(c,b,a);if(d!=null){return d.split(String.fromCharCode(5));}else{return null;}}function nlapiGetCurrentLineItemIndex(a){return getFormValue(getFormElement(document.forms[a.toLowerCase()+"_form"],"lineindex"));}function nlapiSetLineItemTotal(b,c){var a=NLNumberToString(c);if(hasLineItemGroup(b)&&document.getElementById(b+"_total")!=null){document.getElementById(b+"_total").innerHTML=a;}else{if(undefined==window.hiddenLineItemTotal){window.hiddenLineItemTotal={};}window.hiddenLineItemTotal[b+"_total"]=a;}}function nlapiGetLineItemTotal(b){var a=null;var c=b+"_total";if(hasLineItemGroup(b)&&document.getElementById(c)!=null){a=document.getElementById(c).innerHTML;}else{if(undefined!=window.hiddenLineItemTotal&&undefined!=window.hiddenLineItemTotal[c]){a=hiddenLineItemTotal[c];}}if(a.length!=null){return NLStringToNumber(a);}return null;}function nlapiGetField(b){if(typeof(ftabs)=="undefined"&&typeof(ftypes)=="undefined"){var c=document.getElementById(b+"_fs");var a=(isSelect(c)||isPopupSelect(c));return new nlobjField(getFieldName(b),a?"select":"text");}var e=typeof(ftabs)!="undefined"&&ftabs[getFieldName(b)]!=null?new nlobjField(getFieldName(b),ftypes[getFieldName(b)]):null;if(e==null&&document.forms.main_form.elements[b]!=null){e=new nlobjField(getFieldName(b),ftypes[getFieldName(b)]!=null?ftypes[getFieldName(b)]:"text");}if(e!=null){var c=getFormElement(document.forms[(ftabs[getFieldName(b)]!=null?ftabs[getFieldName(b)]+"_form":"main_form")],getFieldName(b));if(c!=null){e.formId=(document.forms[(ftabs[getFieldName(b)]!=null?ftabs[getFieldName(b)]+"_form":"main_form")]).id;e.uifield=c;e.noslaving=c.noslaving;e.disabled=getFieldDisabled(c);e.required=getRequired(c);e.readonly=isDisplayOnlyField(c);e.hidden=c.type=="hidden"&&!(isSelect(c)||isPopupSelect(c)||isMultiSelect(c)||isPopupMultiSelect(c)||isRichTextEditor(c)||isFormattedNumericField(c));e.label=getLabel(b+"_fs");e.popup=isPopupSelect(c)||isPopupMultiSelect(c);var d=fparents[getFieldName(b)];if(!isValEmpty(d)){e.parent=d.indexOf(".")!=-1?nlapiGetLineItemField(d.substring(0,d.indexOf(".")),d.substring(d.indexOf(".")+1)):nlapiGetField(d);}}else{e=null;}}return e;}function toggleFieldGroupVisibility(b){if(!!NS&&!!NS.jQuery&&!!b){var d=NS.jQuery(b.uifield).closest(".uir-fieldgroup-content");var a=d.siblings(".uir-field-group-row").find(".fgroup_title");var c=d.find(".uir-field-wrapper:visible").length>0;if(c&&a.is(":hidden")){display(a.get(0),true);}else{if(!c&&a.is(":visible")){display(a.get(0),false);}}}}function isFormattedNumericField(a){return(isNumericField(a)||isCurrencyField(a))&&getNLNumericOrCurrencyDisplayField(a)!=null;}function nlapiGetSubList(a){if(hasLineItemGroup(a)){var b=new nlobjSubList(a);return b;}return null;}function nlapiGetMatrixField(e,b,d){if(hasEncodedMatrixField(e,b,d)){var g=getFormValue(document.forms.main_form.elements[e+"header"]);var c=g!=null?getFormElement(nvl(document.forms[e+"_form"],document.forms.main_form),g+d):null;if(c==null){return;}var a=g+d;var f=typeof(ftabs)!="undefined"&&ftabs[a]!=null?new nlobjField(a,ftypes[a]):null;if(f!=null){var c=getFormElement(document.forms[e+"_form"],a);if(c!=null){f.uifield=c;f.noslaving=c.noslaving;f.disabled=getFieldDisabled(c);f.required=getRequired(c);f.readonly=isDisplayOnlyField(c);f.hidden=c.type=="hidden"&&!(isSelect(c)||isPopupSelect(c)||isMultiSelect(c)||isPopupMultiSelect(c)||isRichTextEditor(c));f.label=getLabel(a+"_fs");}else{f=null;}}return f;}return null;}function nlapiGetLineItemField(e,b,a){var f=hasEncodedField(e,b)?new nlobjField(getFieldName(b),getEncodedFieldType(e,b),e):null;if(f!=null){var c=getFormElement(document.forms[e+"_form"],getFieldName(b)+(a!=null&&!isEditMachine(e)?a:""));if(c!=null){if(a!=null){f.linenum=a;}f.uifield=c;f.noslaving=c.noslaving;f.disabled=getFieldDisabled(c);f.required=getRequired(c);f.readonly=false;f.hidden=c.type=="hidden"&&!(isSelect(c)||isPopupSelect(c)||isMultiSelect(c)||isPopupMultiSelect(c));f.label=getEncodedFieldLabel(e,b);f.popup=isPopupSelect(c)||isPopupMultiSelect(c);var d=getEncodedFieldParent(e,b);if(!isValEmpty(d)){f.parent=d.indexOf(".")!=-1?nlapiGetLineItemField(e,d.substring(d.indexOf(".")+1),a):nlapiGetField(d);}}else{f=null;}}return f;}function nlapiGetLineItemMatrixField(d,b,c,a){if(hasEncodedMatrixField(d,b,c)){return nlapiGetLineItemField(d,getMatrixFieldName(d,b,c),a!=null?a:nlapiGetCurrentLineItemIndex(d));}return null;}function nlapiSetFieldMandatory(a,c){var b=typeof(ftabs)!="undefined"&&ftabs[getFieldName(a)]!=null?document.forms[ftabs[getFieldName(a)]+"_form"]:document.forms.main_form;if(nsapiIsInternal()||/cust(entity|item|body|column|record|itemnumber|page|event).+/.test(a)){setRequired(getFormElement(b,getFieldName(a)),c);}}function nlapiGetFieldMandatory(a){var b=typeof(ftabs)!="undefined"&&ftabs[getFieldName(a)]!=null?document.forms[ftabs[getFieldName(a)]+"_form"]:document.forms.main_form;return getRequired(getFormElement(b,getFieldName(a)));}function nlapiSetLineItemMandatory(type,fldnam,required,linenum){var form=document.forms[type+"_form"];if(nsapiIsInternal()||/cust(entity|item|body|column|record|itemnumber|page|event).+/.test(fldnam)){var fld=getFormElement(form,getFieldName(fldnam));if(fld==null){fld=getFormElement(form,getFieldName(fldnam)+linenum);}if(isEditMachine(type)){eval(String(type)+"_machine").setElementRequired(fldnam,required);}else{setRequired(fld,required);}}}function nlapiGetLineItemMandatory(d,b,a){var e=document.forms[d+"_form"];var c=getFormElement(e,getFieldName(b));if(c==null){c=getFormElement(e,getFieldName(b)+a);}return getRequired(c);}function nlapiSetFieldDisabled(a,c){var b=typeof(ftabs)!="undefined"&&ftabs[getFieldName(a)]!=null?document.forms[ftabs[getFieldName(a)]+"_form"]:document.forms.main_form;disableField(getFormElement(b,getFieldName(a)),c);if(typeof(ftabs)=="undefined"||ftabs[getFieldName(a)]==null||ftabs[getFieldName(a)]=="main"){nsDisabledFields[a]=c;}}function nlapiGetFieldDisabled(a){var b=typeof(ftabs)!="undefined"&&ftabs[getFieldName(a)]!=null?document.forms[ftabs[getFieldName(a)]+"_form"]:document.forms.main_form;return getFieldDisabled(getFormElement(b,getFieldName(a)));}function nlapiSetLineItemDisabled(d,b,e,a){var c=getFormElement(document.forms[d.toLowerCase()+"_form"],getFieldName(b));if(c==null){c=getFormElement(document.forms[d.toLowerCase()+"_form"],getFieldName(b)+a);}disableField(c,e);}function nlapiGetLineItemDisabled(d,b,a){var c=getFormElement(document.forms[d.toLowerCase()+"_form"],getFieldName(b));if(c==null){c=getFormElement(document.forms[d.toLowerCase()+"_form"],getFieldName(b)+a);}return getFieldDisabled(c);}function nlapiDisableField(a,b){nlapiSetFieldDisabled(a,b);}function nlapiDisableLineItemField(b,a,c){nlapiSetLineItemDisabled(b,a,c);}function nlapiSetFieldLabel(a,b){nsapiCheckArgs([a],["fldnam"],"nlapiSetFieldLabel");setLabel(a+"_fs",b);}function nlapiSetFieldVisibility(b,a){nsapiCheckArgs([b,a],["fldnam","show"],"nlapiSetFieldVisibility");setFieldAndLabelVisibility(b+"_fs",a);}function nlapiSetFieldDisplay(b,a){nsapiCheckArgs([b,a],["fldnam","show"],"nlapiSetFieldDisplay");showFieldAndLabel(b+"_fs",a);toggleFieldGroupVisibility(nlapiGetField(b));if(typeof(ftabs)!="undefined"){var c=ftabs[getFieldName(b)];ns_tabUtils.updateTabVisibility(c);}}function nlapiSetFieldReadOnly(a,d){var c=typeof(ftabs)!="undefined"&&ftabs[getFieldName(a)]!=null?document.forms[ftabs[getFieldName(a)]+"_form"]:document.forms.main_form;var b=getFormElement(c,getFieldName(a));setFieldReadOnly(b,d);}function nlapiGetFieldReadOnly(a){var c=typeof(ftabs)!="undefined"&&ftabs[getFieldName(a)]!=null?document.forms[ftabs[getFieldName(a)]+"_form"]:document.forms.main_form;var b=getFormElement(c,getFieldName(a));return b!=null&&b.type=="textarea"?b.readOnly:false;}function nlapiSetLineItemDisplay(b,a){nsapiCheckArgs([b,a],["type","show"],"nlapiSetLineItemDisplay");hideMachine(b,!a);}function nlapiSetLineItemLabel(type,fldnam,label){nsapiCheckArgs([type,fldnam],["type","fldnam"],"nlapiSetLineItemLabel");if(isEditMachine(type)){var mch=eval(String(type)+"_machine");mch.setFormElementLabel(fldnam,label);}}function nlapiGetFieldLabel(a){nsapiCheckArgs([a],["fldnam"],"nlapiGetFieldLabel");return getLabel(a+"_fs");}function nlapiGetLineItemCount(a){return hasLineItemGroup(a)?getFormValue(getFormElement(document.forms.main_form,"next"+a.toLowerCase()+"idx"))-1:-1;}function nlapiGetMatrixCount(b,a){return hasEncodedMatrixField(b,a,1)?getFormValue(getFormElement(document.forms.main_form,b.toLowerCase()+"headercount")):-1;}function nlapiGetRecordType(){return getFormValue(getFormElement(document.forms.main_form,"baserecordtype"));}function nlapiGetRecordId(){return getFormValue(getFormElement(document.forms.main_form,"id"));}function nlapiFormatCurrency(a){return format_currency(a);}function nlapiStringToDate(b,c){if(isValEmpty(b)){return null;}var a=stringtodate(b,window.dateformat,true,c);if(a==null){a=stringtotime(null,b);}return a;}function nlapiDateToString(a,b){if(b=="timeofday"){return gettimestring(a);}else{if(b=="datetime"){return getdatetimestring(a);}else{if(b=="datetimetz"){return getdatetimetzstring(a);}else{return getdatestring(a);}}}}function nlapiAddDays(a,b){return adddays(new Date(a.getTime()),parseInt(b));}function nlapiAddMonths(b,a){return addmonths(new Date(b.getTime()),parseInt(a));}function nlapiEncrypt(c,b,a){nsapiCheckArgs([c],["cleartext"],"nlapiEncrypt");if(b==null){b="sha1";}return nsServerCall(nsJSONProxyURL,"encrypt",[c,b,a!=null?a:null]);}function nlapiDecrypt(c,b,a){nsapiCheckArgs([c],["encryptedtext"],"nlapiDecrypt");if(b=="aes"||b=="base64"||b=="xor"){return nsServerCall(nsJSONProxyURL,"decrypt",[c,b,a!=null?a:null]);}return null;}function nlapiExchangeRate(a,d,c){nsapiCheckArgs([a,d],["fromCurrency","toCurrency"],"nlapiExchangeRate");nsapiCheckUsage();var b=nsServerCall(nsJSONProxyURL,"exchangeRate",[a,d,c!=null?c:nlapiDateToString(new Date())]);nsapiLogUsage("nlapiExchangeRate");return b;}function nlapiEscapeXML(a){if(a==null){return null;}a=""+a;return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;");}function nlapiNanoTime(){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");}function nlapiRefreshPortlet(){if(typeof window.nlportlet=="object"&&window.nlportlet.type=="form"){window.nlportlet.refreshfn();}else{nlapiCreateError("SSS_INVALID_RECORD_TYPE");}}function nlapiResizePortlet(){if(typeof window.nlportlet=="object"&&window.nlportlet.type=="form"){window.nlportlet.resizefn();}else{nlapiCreateError("SSS_INVALID_RECORD_TYPE");}}function nlapiRefreshLineItems(a){if(isEditMachine(a)){var c=nsapiIsInternal();var b=getSlavingAsync();try{setSlavingAsync(false);nsapiSetIsInternal(true);nsapiCallScript("refreshLineItem","internal",a+"_machine.buildtable()");}finally{setSlavingAsync(b);nsapiSetIsInternal(c);}}else{if(!hasLineItemGroup(a)){nsapiCallScript("refreshLineItem","internal",'refreshmachine("'+a+'" )');}}}function nlapiSelectLineItem(b,a,d){var e=nsapiIsInternal();var c=getSlavingAsync();try{setSlavingAsync(false);nsapiSetIsInternal(true);if(d==true){nsapiSelectSegmentForLine(b,a);}if(hasMachine(b)){nsapiCallScript("selectLineItem","internal",b+"_machine.viewline("+a+")");}else{if(hasLineItemGroup(b)){nsapiCallScript("selectLineItem","internal",'setFormValue( document.forms["'+b+'_form"].elements["lineindex"], '+a+" )");}}}finally{setSlavingAsync(c);nsapiSetIsInternal(e);}}function nlapiCommitLineItem(a){var c=nsapiIsInternal();var b=getSlavingAsync();try{setSlavingAsync(false);nsapiSetIsInternal(true);if(isEditMachine(a)){nsapiCallScript("commitLineItem","internal",a+"_machine.addline()");}else{if(hasLineItemGroup(a)){nsapiCallScript("commitLineItem","internal",'setEncodedValues( "'+a+'", nlapiGetCurrentLineItemIndex("'+a+'") )');}}}finally{setSlavingAsync(b);nsapiSetIsInternal(c);}}function nlapiInsertLineItem(b,a){if(a!=undefined){nlapiSelectLineItem(b,a);}var d=nsapiIsInternal();var c=getSlavingAsync();try{setSlavingAsync(false);nsapiSetIsInternal(true);if(isEditMachine(b)){nsapiCallScript("insertLineItem","internal",b+"_machine.insertline()");}}finally{setSlavingAsync(c);nsapiSetIsInternal(d);}}function nlapiRemoveLineItem(c,a){if(a!=undefined){nlapiSelectLineItem(c,a);}var e=nsapiIsInternal();var d=getSlavingAsync();var b=NS.form.isInited();try{NS.form.setInited(true);setSlavingAsync(false);nsapiSetIsInternal(true);if(isEditMachine(c)){nsapiCallScript("deleteLineItem","internal",c+"_machine.deleteline()");}}finally{NS.form.setInited(b);setSlavingAsync(d);nsapiSetIsInternal(e);}}function nlapiCancelLineItem(a){var c=nsapiIsInternal();var b=getSlavingAsync();try{setSlavingAsync(false);nsapiSetIsInternal(true);if(isEditMachine(a)){nsapiCallScript("cancelLineItem","internal",a+"_machine.clearline()");}}finally{setSlavingAsync(b);nsapiSetIsInternal(c);}}function nlapiSelectNewLineItem(a){var c=nsapiIsInternal();var b=getSlavingAsync();try{setSlavingAsync(false);nsapiSetIsInternal(true);if(isEditMachine(a)){nsapiCallScript("selectNewLineItem","internal",a+"_machine.clearline()");}}finally{setSlavingAsync(b);nsapiSetIsInternal(c);}}function nlapiIsLineItemChanged(a){return isMachineChanged(a);}function nlapiInsertOption(a,c,d,b){nlapiInsertSelectOption(a,c,d,b);}function nlapiInsertSelectOption(a,e,f,c){nsapiAssertTrue(a!=null&&a.indexOf("custpage")==0,"SSS_INVALID_OPERATION");var d=typeof(ftabs)!="undefined"&&ftabs[getFieldName(a)]!=null?document.forms[ftabs[getFieldName(a)]+"_form"]:document.forms[0];var b=getFormElement(d,getFieldName(a));if(b!=null){addSelectOption(document,b,f,e,c);}}function nlapiInsertLineItemOption(d,a,f,g,c){nsapiAssertTrue(d!=null&&a!=null&&a.indexOf("custpage")==0,"SSS_INVALID_OPERATION");var e=document.forms[d+"_form"];var b=getFormElement(e,getFieldName(a));if(b!=null){addSelectOption(document,b,g,f,c);}}function nlapiRemoveOption(a,b,c){nlapiRemoveSelectOption(a,b,c);}function nlapiRemoveSelectOption(fldnam,value){nsapiAssertTrue(fldnam!=null&&fldnam.indexOf("custpage")==0,"SSS_INVALID_OPERATION");var form=typeof(ftabs)!="undefined"&&ftabs[getFieldName(fldnam)]!=null?document.forms[ftabs[getFieldName(fldnam)]+"_form"]:document.forms[0];var fld=getFormElement(form,getFieldName(fldnam));if(fld!=null){eval(value!=null?"deleteOneSelectOption( fld, value )":"deleteAllSelectOptions( fld, window )");}}function nlapiRemoveLineItemOption(type,fldnam,value){nsapiAssertTrue(type!=null&&fldnam!=null&&fldnam.indexOf("custpage")==0,"SSS_INVALID_OPERATION");var form=document.forms[type+"_form"];var fld=getFormElement(form,getFieldName(fldnam));if(fld!=null){eval(value!=null?"deleteOneSelectOption( fld, value )":"deleteAllSelectOptions( fld, window )");}}function nlapiGetUser(){return nlapiGetFieldValue("nluser");}function nlapiGetRole(){return nlapiGetFieldValue("nlrole");}function nlapiGetDepartment(){return nlapiGetFieldValue("nldept");}function nlapiGetLocation(){return nlapiGetFieldValue("nlloc");}function nlapiGetSubsidiary(){return nlapiGetFieldValue("nlsub");}function nlapiLoadRecord(k,b,a){nsapiCheckArgs([k,b],["type","id"],"nlapiLoadRecord");nsapiCheckType(k,"nlapiLoadRecord",true);nsapiCheckUsage();if(a!=null){for(var m in a){if(a.hasOwnProperty(m)){nsapiAssertTrue(arrayContains(nsapiGetRecord(k).initializedefaults,m),"SSS_INVALID_INITIALIZE_DEFAULT_VALUE");}}}try{var h=nsStringToXML("<nlapiRequest type='nlapiLoadRecord'></nlapiRequest>");var i=h.documentElement;i.setAttribute("id",b);i.setAttribute("recordType",k);if(a!=null){var o=nsSetChildValue(i,"loadParams");for(var l in a){if(a.hasOwnProperty(l)){nsSetChildValue(o,nsapiModifyLoadArg(l),a[l]);}}}var n=nsXmlToString(h);var g=new NLXMLHttpRequest();var f=g.requestURL(nsProxyURL,n);var d=nsStringToXML(f.getBody());var p=nsSelectNode(d,"/nlapiResponse/record");var c=nsapiExtractRecord(p);c.logOperation("loadRecord",{id:b,initializeDefaults:a});nsapiAssertTrue(k.toLowerCase()==c.getRecordType().toLowerCase()||(k.toLowerCase()=="assemblyitem"&&/.*assemblyitem/.test(c.getRecordType().toLowerCase()))||(k.toLowerCase()=="inventoryitem"&&/.*inventoryitem/.test(c.getRecordType().toLowerCase()))||(k.toLowerCase()=="customer"&&/(prospect|lead|customer)/.test(c.getRecordType().toLowerCase())),"SSS_RECORD_TYPE_MISMATCH");nsapiLogUsage("nlapiLoadRecord",k);return c;}catch(j){throw nlapiCreateError(j);}}function nlapiCreateRecord(j,a){nsapiCheckArgs([j],["type"],"nlapiCreateRecord");nsapiCheckType(j,"nlapiCreateRecord",true);nsapiCheckUsage();if(a!=null){for(var l in a){if(a.hasOwnProperty(l)){nsapiAssertTrue(arrayContains(nsapiGetRecord(j).initializedefaults,l),"SSS_INVALID_INITIALIZE_DEFAULT_VALUE");}}}try{var g=nsStringToXML("<nlapiRequest type='nlapiCreateRecord'></nlapiRequest>");var h=g.documentElement;h.setAttribute("recordType",j);if(a!=null){var n=nsSetChildValue(h,"loadParams");for(var k in a){if(a.hasOwnProperty(k)){nsSetChildValue(n,nsapiModifyLoadArg(k),a[k]);}}}var m=nsXmlToString(g);var f=new NLXMLHttpRequest();var d=f.requestURL(nsProxyURL,m);var c=nsStringToXML(d.getBody());var o=nsSelectNode(c,"/nlapiResponse/record");var b=nsapiExtractRecord(o);b.logOperation("createRecord",{initializeDefaults:a});nsapiAssertTrue(j.toLowerCase()==b.getRecordType().toLowerCase(),"SSS_RECORD_TYPE_MISMATCH");nsapiLogUsage("nlapiCreateRecord",j);return b;}catch(i){throw nlapiCreateError(i);}}function nlapiCopyRecord(k,b,a){nsapiCheckArgs([k,b],["type","id"],"nlapiCopyRecord");nsapiCheckType(k,"nlapiCopyRecord",true);nsapiCheckUsage();if(a!=null){for(var m in a){if(a.hasOwnProperty(m)){nsapiAssertTrue(arrayContains(nsapiGetRecord(k).initializedefaults,m),"SSS_INVALID_INITIALIZE_DEFAULT_VALUE");}}}try{var h=nsStringToXML("<nlapiRequest type='nlapiCopyRecord'></nlapiRequest>");var i=h.documentElement;i.setAttribute("id",b);i.setAttribute("recordType",k);if(a!=null){var o=nsSetChildValue(i,"loadParams");for(var l in a){if(a.hasOwnProperty(l)){nsSetChildValue(o,nsapiModifyLoadArg(l),a[l]);}}}var n=nsXmlToString(h);var g=new NLXMLHttpRequest();var f=g.requestURL(nsProxyURL,n);var d=nsStringToXML(f.getBody());var p=nsSelectNode(d,"/nlapiResponse/record");var c=nsapiExtractRecord(p);c.logOperation("copyRecord",{id:b,initializeDefaults:a});nsapiAssertTrue(k.toLowerCase()==c.getRecordType().toLowerCase()||(k.toLowerCase()=="customer"&&/(prospect|lead|customer)/.test(c.getRecordType().toLowerCase())),"SSS_RECORD_TYPE_MISMATCH");nsapiLogUsage("nlapiCopyRecord",k);return c;}catch(j){throw nlapiCreateError(j);}}function nlapiTransformRecord(m,a,f,h){nsapiCheckArgs([m,a,f],["type","id","transformType"],"nlapiTransformRecord");nsapiCheckType(m,"nlapiTransformRecord",true);nsapiCheckUsage();nsapiAssertTrue(arrayContains(nsapiGetRecord(m).transformtypes,f),"SSS_INVALID_TRANSFORM_TYPE");if(h!=null){for(var n in h){if(h.hasOwnProperty(n)){nsapiAssertTrue(arrayContains(nsapiGetRecord(f).transformdefaults,n),"SSS_INVALID_TRANSFORM_DEFAULT_VALUE");}}}try{var i=nsStringToXML("<nlapiRequest type='nlapiTransformRecord'></nlapiRequest>");var j=i.documentElement;j.setAttribute("id",a);j.setAttribute("recordType",m);j.setAttribute("transformType",f);if(h!=null){var p=nsSetChildValue(j,"loadParams");for(var l in h){if(h.hasOwnProperty(l)){nsSetChildValue(p,nsapiModifyLoadArg(l),h[l]);}}}var o=nsXmlToString(i);var g=new NLXMLHttpRequest();var d=g.requestURL(nsProxyURL,o);var c=nsStringToXML(d.getBody());var q=nsSelectNode(c,"/nlapiResponse/record");var b=nsapiExtractRecord(q);b.logOperation("transformRecord",{type:m,id:a,transformType:f,transformDefaults:h});nsapiAssertTrue(f.toLowerCase()==b.getRecordType().toLowerCase(),"SSS_RECORD_TYPE_MISMATCH");nsapiLogUsage("nlapiTransformRecord",f);return b;}catch(k){throw nlapiCreateError(k);}}function nlapiVoidTransaction(a,b){nsapiCheckArgs([a,b],["type","id"],"nlapiVoidTransaction");nsapiCheckUsage();return nsServerCall(nsJSONProxyURL,"voidTransaction",[a,b]);}function nlapiSubmitRecord(g,m,a){nsapiCheckArgs([g],["record"],"nlapiSubmitRecord");nsapiCheckUsage();if(!(g instanceof nlobjRecord)){throw nlapiCreateError("SSS_INVALID_RECORD_OBJ","The record is not a valid object.");}try{var h=nsStringToXML("<nlapiRequest type='nlapiSubmitRecord'></nlapiRequest>");var i=h.documentElement;i.setAttribute("enableSourcing",""+(m===true||(m!=null&&m.enableSourcing===true)?true:false));i.setAttribute("disableTriggers",""+(m!=null&&m.disableTriggers===true?true:false));i.setAttribute("ignoreMandatoryFields",""+(a===true||(m!=null&&m.ignoreMandatoryFields===true)?true:false));var b=nsapiSerializeRecord(g);i.appendChild(b.documentElement.cloneNode(true));var k=nsXmlToString(h);var f=new NLXMLHttpRequest();var d=f.requestURL(nsProxyURL,k);var c=nsStringToXML(d.getBody());var l=nsSelectValue(c,"/nlapiResponse/id");nsapiLogUsage("nlapiSubmitRecord",g.getRecordType());return l;}catch(j){throw nlapiCreateError(j);}}function nlapiSubmitField(l,a,g,n,o){nsapiCheckArgs([l,a,g],["type","id","fields"],"nlapiSubmitField");nsapiCheckType(l,"nlapiSubmitField");nsapiCheckUsage();try{var f=nsStringToXML("<nlapiRequest type='nlapiSubmitField'></nlapiRequest>");var h=f.documentElement;h.setAttribute("recordType",l);h.setAttribute("id",a);h.setAttribute("enableSourcing",""+(o===true||(o!=null&&o.enableSourcing===true)?true:false));h.setAttribute("disableTriggers",""+(o!=null&&o.disableTriggers===true?true:false));if(g instanceof String||typeof(g)=="string"){var k=nsSetChildValue(h,"field");nsSetChildValue(k,"name",g);nsSetChildValue(k,"value",n);}else{for(var d=0;g!=null&&d<g.length;d++){var k=nsSetChildValue(h,"field");nsSetChildValue(k,"name",g[d]);nsSetChildValue(k,"value",n!=null?n[d]:null);}}var m=nsXmlToString(f);var c=new NLXMLHttpRequest();var b=c.requestURL(nsProxyURL,m);nsapiLogUsage("nlapiSubmitField",l);}catch(j){throw nlapiCreateError(j);}}function nlapiDeleteRecord(a,c){nsapiCheckArgs([a,c],["type","id"],"nlapiDeleteRecord");nsapiCheckType(a,"nlapiDeleteRecord",true);nsapiCheckUsage();try{nsServerCall(nsJSONProxyURL,"deleteRecord",[a,c]);nsapiLogUsage("nlapiDeleteRecord",a);}catch(b){throw nlapiCreateError(b);}}function nlapiGetSearchColumns(g,f,j){nsapiCheckArgs([g],["type"],"nlapiGetSearchColumns");nsapiCheckType(g,"nlapiGetSearchColumns");try{var d=nsServerCall(nsJSONProxyURL,"getSearchColumns",[g,f,j]);var c=new Array();for(var b=0;d!=null&&b<d.length;b++){var a=nsapiUnmarshalSearchColumn(d[b]);c.push(a);}return c.length==0?null:c;}catch(h){throw nlapiCreateError(h);}}function nsapiUnmarshalSearchFilter(b){var a=new nlobjSearchFilter(b.name,b.join,b.operator,b.values);a.formula=b.formula;a.summarytype=b.summarytype;a.isor=b.isor;a.isnot=b.isnot;a.leftparens=b.leftparens;a.rightparens=b.rightparens;return a;}function nsapiUnmarshalSearchColumn(b){var a=new nlobjSearchColumn(b.name,b.join,b.summary);a.label=b.label;a.type=b.type;a.functionid=b.functionid;a.formula=b.formula;a.sortdir=b.sortdir;a.whenorderedby=b.whenorderedby;a.whenorderedbyjoin=b.whenorderedbyjoin;return a;}function nlapiSearchRecord(i,a,j,d){if(i){nsapiCheckSearchType(i,"nlapiSearchRecord");}nsapiCheckUsage();a=a!=null&&!isNaN(parseInt(a))?parseInt(a):a!=null?a:null;try{var b=nsapiMarshalSearchFiltersOrExpression(nsapiNormalizeFilters(j));var c=nsapiMarshalSearchColumns(d);var f=nsServerCall(nsJSONProxyURL,"searchRecord",[i,a,b,c],null,"POST");var h=nsapiExtractSearchResults(f,d);nsapiLogUsage("nlapiSearchRecord",isValEmpty(a)&&nsapiIsLookup(j)?i:null);return h!=null&&h.length>0?h:null;}catch(g){throw nlapiCreateError(g);}}function nlapiCreateSearch(c,b,a){nsapiCheckArgs([c],["type"],"nlapiCreateSearch");nsapiCheckSearchType(c,"nlapiCreateSearch");nsapiCheckUsage();b=nsapiNormalizeFilters(b);var d=nsapiParseSearchFilterExpression(b);return new nlobjSearch(c,-1,d,a);}function nlapiLoadSearch(b,c){nsapiCheckArgs([c],["id"],"nlapiLoadSearch");if(b){nsapiCheckSearchType(b,"nlapiLoadSearch");}nsapiCheckUsage();c=c!=null&&!isNaN(parseInt(c))?parseInt(c):c!=null?c:null;var a=new nlobjSearch(b,c,null,null);a._load();return a;}function nsapiParseSearchFilterExpression(c){if(nsapiIsFlatSearchFilterList(c)){return c;}nsapiCheckSearchFilterExpression(c,"filters");var b=nsapiMarshalSearchFiltersOrExpression(c);var a=nsServerCall(nsJSONProxyURL,"parseSearchFilterExpression",[b],null,"POST");return nsapiUnmarshalArray(a,"filter",nsapiUnmarshalSearchFilter);}function nsapiJSONRPCMap(){return{javaClass:"java.util.HashMap"};}function nsapiMarshalSearchFiltersOrExpression(b){if(typeof b==="undefined"||b===null){return null;}nsapiAssertTrue(isArray(b),"SSS_INVALID_SRCH_FILTER_EXPR");var a=nsapiMap(b,function(d){if(nsapiIsSearchFilterObject(d)){return nsapiMarshalSearchFilter(d);}var c=nsapiJSONRPCMap();if(isArray(d)){c.arrayValue=nsapiMarshalSearchFiltersOrExpression(d);}else{c.stringValue=d;}return c;});return a;}function nsapiUnmarshalSearchFilterExpression(a){return nsapiMap(a,function(b){if(b.hasOwnProperty("stringValue")){return b.stringValue;}if(b.hasOwnProperty("arrayValue")){return nsapiUnmarshalSearchFilterExpression(b.arrayValue);}return nsapiUnmarshalSearchFilter(b);});}function nsapiMarshalSearchFilter(a){return a._marshal();}function nsapiMarshalSearchFilters(a){a=isArray(a)?a:a!=null&&a instanceof nlobjSearchFilter?[a]:null;nsapiCheckArray(a,"filters",nlobjSearchFilter);return(a!=null)?nsapiMap(a,nsapiMarshalSearchFilter):[];}function nsapiMarshalSearchColumns(b){b=nsapiColumnsAsArray(b);nsapiCheckArray(b,"columns",nlobjSearchColumn);var d=[];for(var a=0;b!=null&&a<b.length;a++){b[a].userindex=a+1;var c=b[a]._marshal();d.push(c);}return d;}function nsapiColumnsAsArray(a){return isArray(a)?a:a!=null&&a instanceof nlobjSearchColumn?[a]:null;}function nlapiLookupField(j,b,f,k){nsapiCheckArgs([j,b,f],["type","id","columns"],"nlapiLookupField");nsapiCheckType(j,"nlapiLookupField");var d=new Array();if(isArray(f)){for(var h=0;h<f.length;h++){var e=f[h];if(e.toLowerCase()!="recordtype"){var a=e.indexOf(".")!=-1?e.substring(e.indexOf(".")+1):e;var c=e.indexOf(".")!=-1?e.substring(0,e.indexOf(".")):null;d[d.length]=new nlobjSearchColumn(a,c);}}}else{if(f.toLowerCase()!="recordtype"){var a=f.indexOf(".")!=-1?f.substring(f.indexOf(".")+1):f;var c=f.indexOf(".")!=-1?f.substring(0,f.indexOf(".")):null;d[0]=new nlobjSearchColumn(a,c);}}var l=nlapiSearchRecord(j,null,new nlobjSearchFilter("internalid",null,"anyof",b),d);var g=null;if(l!=null&&l.length>0){g=new Object();if(isArray(f)){for(var h=0;h<f.length;h++){var a=f[h].indexOf(".")!=-1?f[h].substring(f[h].indexOf(".")+1):f[h];var c=f[h].indexOf(".")!=-1?f[h].substring(0,f[h].indexOf(".")):null;g[f[h]]=a.toLowerCase()=="recordtype"?l[0].getRecordType():k?l[0].getText(a,c):l[0].getValue(a,c);}}else{var a=f.indexOf(".")!=-1?f.substring(f.indexOf(".")+1):f;var c=f.indexOf(".")!=-1?f.substring(0,f.indexOf(".")):null;g=a.toLowerCase()=="recordtype"?l[0].getRecordType():k?l[0].getText(a,c):l[0].getValue(a,c);}}return g;}function nlapiSearchGlobal(a){nsapiCheckArgs([a],["keywords"],"nlapiSearchGlobal");nsapiCheckUsage();try{var d=nsServerCall(nsJSONProxyURL,"searchGlobal",[a]);var c=nsapiExtractSearchResults(d);nsapiLogUsage("nlapiSearchGlobal");return c!=null&&c.length>0?c:null;}catch(b){throw nlapiCreateError(b);}}function nlapiSearchDuplicate(b,a,i){nsapiCheckArgs([b,a!=null?a:i],["type",a!=null?"fields":"id"],"nlapiSearchDuplicate");nsapiCheckUsage();try{var h=new Object();for(var g in a){if(a.hasOwnProperty(g)){nsapiAssertTrue(a[g]!=null,"SSS_INVALID_SRCH_FILTER",g);h[g]=a[g];}}var f=nsServerCall(nsJSONProxyURL,"searchDuplicate",[b,isNaN(parseInt(i))?-1:parseInt(i),h]);var d=nsapiExtractSearchResults(f);nsapiLogUsage("nlapiSearchGlobal");return d!=null&&d.length>0?d:null;}catch(c){throw nlapiCreateError(c);}}function nlapiResolveURL(b,a,g,f){nsapiCheckArgs([b,a],["type","identifier"],"nlapiResolveURL");try{if(f!=null&&typeof(f)=="boolean"&&/(suitelet|record)/.test(b.toLowerCase())){f=b.toLowerCase()=="suitelet"?(f?"external":"internal"):(f?"edit":"view");}var c=nsServerCall(nsJSONProxyURL,"resolveURL",[b,a,g,f]);return c;}catch(d){throw nlapiCreateError(d);}}function nlapiSetRedirectURL(d,b,g,f,e){nsapiCheckArgs([d,b],["type","identifier"],"nlapiSetRedirectURL");var a=nlapiResolveURL(d,b,g,f);for(var c in e){if(e.hasOwnProperty(c)){a=addParamToURL(a,c,e[c]);}}nsapiSetRedirectURL(a);}function nsapiSetRedirectURL(a){setFormValue(document.forms.main_form.elements.customwhence,a);}function nlapiSendEmail(g,n,o,j,c,l,d,a,f,h,b){nsapiCheckArgs([g,n,o,j],["author","recipient","subject","body"],"nlapiSendEmail");nsapiCheckUsage();try{var i=nsStringToXML("<nlapiRequest type='nlapiSendEmail'></nlapiRequest>");var k=i.documentElement;nsSetChildValue(k,"author",g);nsSetChildValue(k,"recipient",n);nsSetChildValue(k,"subject",o);nsSetChildValue(k,"body",j);c=isArray(c)?c:c!=null?[""+c]:null;l=isArray(l)?l:l!=null?[""+l]:null;nsSetChildValues(k,"cc",c);nsSetChildValues(k,"bcc",l);if(d!=null&&d.transaction!=null){nsSetChildValue(k,"transaction",d.transaction);}if(d!=null&&d.entity!=null){nsSetChildValue(k,"entity",d.entity);}if(d!=null&&d.recordtype!=null){nsSetChildValue(k,"recordtype",d.recordtype);}if(d!=null&&d.record!=null){nsSetChildValue(k,"record",d.record);}if(d!=null&&d.activity!=null){nsSetChildValue(k,"activity",d.activity);}if(typeof f!=="boolean"){f=false;}if(typeof h!=="boolean"){h=false;}if(typeof b==="string"){nsSetChildValue(k,"replyTo",b);}k.setAttribute("notifySenderOnBounce",f);k.setAttribute("internalOnly",h);new NLXMLHttpRequest().requestURL(nsProxyURL,nsXmlToString(i));(f)?nsapiLogUsage("nlapiSendEmail_trackBouncesUpcharge"):nsapiLogUsage("nlapiSendEmail");}catch(m){throw nlapiCreateError(m);}}function nlapiSendFax(d,f,c,a,b){nsapiCheckArgs([d,f,c,a],["author","recipient","subject","body"],"nlapiSendFax");nsapiCheckUsage();try{var i=nsStringToXML("<nlapiRequest type='nlapiSendFax'></nlapiRequest>");var h=i.documentElement;nsSetChildValue(h,"author",d);nsSetChildValue(h,"recipient",f);nsSetChildValue(h,"subject",c);nsSetChildValue(h,"body",a);if(b!=null&&b.transaction!=null){nsSetChildValue(h,"transaction",b.transaction);}if(b!=null&&b.entity!=null){nsSetChildValue(h,"entity",b.entity);}if(b!=null&&b.recordtype!=null){nsSetChildValue(h,"recordtype",b.recordtype);}if(b!=null&&b.record!=null){nsSetChildValue(h,"record",b.record);}if(b!=null&&b.activity!=null){nsSetChildValue(h,"activity",b.activity);}new NLXMLHttpRequest().requestURL(nsProxyURL,nsXmlToString(i));nsapiLogUsage("nlapiSendFax");}catch(g){throw nlapiCreateError(g);}}function nlapiAttachRecord(d,g,b,c,a){nsapiCheckArgs([d,g,b,c],["type","id","type2","id2"],"nlapiAttachRecord");nsapiCheckType(d,"nlapiAttachRecord",d!="file");nsapiCheckType(b,"nlapiAttachRecord",true);nsapiCheckUsage();try{nsServerCall(nsJSONProxyURL,"attachRecord",[d,g,b,c,nsapiExtractMap(a)]);nsapiLogUsage("nlapiAttachRecord");}catch(f){throw nlapiCreateError(f);}}function nlapiDetachRecord(d,g,b,c,a){nsapiCheckArgs([d,g,b,c],["type","id","type2","id2"],"nlapiDetachRecord");nsapiCheckType(d,"nlapiDetachRecord",d!="file");nsapiCheckType(b,"nlapiDetachRecord",true);nsapiCheckUsage();try{nsServerCall(nsJSONProxyURL,"detachRecord",[d,g,b,c,nsapiExtractMap(a)]);nsapiLogUsage("nlapiDetachRecord");}catch(f){throw nlapiCreateError(f);}}function nlapiRequestURL(b,o,c,p,a){nsapiCheckArgs([b],["url"],"nlapiRequestURL");nsapiAssertTrue(b.indexOf("/")==0||b.indexOf("http")==0,"SSS_INVALID_URL");if(!isValEmpty(a)){nsapiAssertTrue(a=="PUT"||a=="POST"||a=="GET"||a=="DELETE"||a=="HEAD","SSS_INVALID_HTTPMETHOD");}nsapiCheckUsage();try{var q=document.location.protocol+"//"+document.location.host;var h=true;if(b.indexOf("/")!=0&&b.indexOf(q)!=0){var l=nsStringToXML("<nlapiRequest type='nlapiRequestURL'></nlapiRequest>");var m=l.documentElement;nsSetChildValue(m,"url",b);nsSetChildValue(m,"method",a);if(nsInstanceofDocument(o)){nsSetChildValue(m,"body",nsXmlToString(o));}else{if(o instanceof String||typeof o=="string"){nsSetChildValue(m,"body",o);}else{for(var j in o){if(o.hasOwnProperty(j)){var f=nsSetChildValue(m,"param");nsSetChildValue(f,"name",j);nsSetChildValue(f,"value",o[j]);}}}}for(var j in c){if(c.hasOwnProperty(j)){nsapiAssertTrue(!isValEmpty(j),"SSS_INVALID_HEADER");var k=nsSetChildValue(m,"header");nsSetChildValue(k,"name",j);nsSetChildValue(k,"value",c[j]);}}b=nsProxyURL;o=nsXmlToString(l);h=false;}var g=new NLXMLHttpRequest();if(p instanceof Function){g.setResponseHandler(function(e){nsapiAjaxResponse(e,p);});}var d=g.requestURL(b,o,h?c:null,p instanceof Function,a);if(d!=null){d=nsapiAjaxResponse(d);}nsapiLogUsage("nlapiRequestURL");return d;}catch(n){throw nlapiCreateError(n);}}function nlapiLogExecution(c,g,b){nsapiCheckArgs([c],["type"],"nlapiLogExecution");try{var a=document.getElementById("consolewindow");if(a!=null){buildLogConsole(c.toLowerCase(),g,b);}else{var f=nlapiGetContext().getScriptId();if(!!window.NLScriptIdForLogging&&!!window.NLDeploymentIdForLogging){nsServerCall(nsJSONProxyURL,"logExecutionWithDeployment",[window.NLScriptIdForLogging,window.NLDeploymentIdForLogging,c,g,b!=null?b.toString():null]);}else{if(!isValEmpty(f)&&f!="customform"){nsServerCall(nsJSONProxyURL,"logExecution",[f,nlapiGetRecordType(),c,g,b!=null?b.toString():null]);}}}}catch(d){throw nlapiCreateError(d);}}function nlapiStringToXML(c){nsapiCheckArgs([c],["text"],"nlapiStringToXML");try{var a=nsStringToXML(c);return a;}catch(b){throw nlapiCreateError(b);}}function nlapiXMLToString(a){nsapiCheckArgs([a],["xml"],"nlapiXMLToString");try{var c=nsXmlToString(a);return c;}catch(b){throw nlapiCreateError(b);}}function nlapiSelectValue(c,a){nsapiCheckArgs([c,a],["node","xpath"],"nlapiSelectValue");try{var b=nsSelectValue(c,a);return b;}catch(d){throw nlapiCreateError(d);}}function nlapiSelectValues(c,a){nsapiCheckArgs([c,a],["node","xpath"],"nlapiSelectValues");try{var b=nsSelectValues(c,a);return b;}catch(d){throw nlapiCreateError(d);}}function nlapiSelectNode(c,a){nsapiCheckArgs([c,a],["node","xpath"],"nlapiSelectNode");try{var b=nsSelectNode(c,a);return b;}catch(d){throw nlapiCreateError(d);}}function nlapiSelectNodes(c,a){nsapiCheckArgs([c,a],["node","xpath"],"nlapiSelectNodes");try{var b=nsSelectNodes(c,a);return b;}catch(d){throw nlapiCreateError(d);}}var nsContextObj=null;function nlapiGetContext(){try{if(nsContextObj==null){nsContextObj=new nlobjContext();}return nsContextObj;}catch(a){throw nlapiCreateError(a);}}function nlapiServerCall(e,d,c,a,b){return nsServerCall(e,d,c,a,b);}function nlapiLocalCall(b,a){nsapiAssertTrue(a!=null&&!isNaN(parseInt(a)),"SSS_INVALID_ARGUMENT","timeoutinmillis: "+a);var c=new Object();c.trigger=nsapiQueryScript("trigger");c.scriptid=nsapiQueryScript("scriptid");if(a==-1){return nsapiCallScript(c.trigger,c.scriptid,b);}return setTimeout(function(){nsapiCallScript(c.trigger,c.scriptid,b);},a);}function nlapiChangeCall(c){setWindowChanged(window,false);window.onbeforeunload=null;var a=document.location.href;for(var b in c){if(c.hasOwnProperty(b)){a=addParamToURL(a,b,c[b],true);}}document.location=a;}function nlapiCreateError(c,a,b){if((!arguments.callee.caller||arguments.callee.caller.name!="nlapiGetContext")&&nlapiGetContext().getCompany()=="3510556"){clientScriptErrorDebug(c+" "+a);}window.errorObj=new nlobjError(c,a,b);return window.errorObj;}function nlobjRecord(a,b){this.type=a;this.id=b!=null?b:null;this.fields=new Object();this.fieldnames=new Array();this.lineitems=new Object();this.linetypes=new Object();this.linefields=new Object();this.matrixfields=new Object();this.currentlineitems=new Object();this.currentlineitemindexes=new Object();this.initialized=false;this.operations=new Array();}nlobjRecord.prototype.getId=function(){return this.id;};nlobjRecord.prototype.getRecordType=function(){return this.type;};nlobjRecord.prototype.setFieldValue=function(a,b){this.fields[a]=b;this.logOperation("setFieldValue",{field:a,value:b});};nlobjRecord.prototype.setFieldValues=function(b,a){this.fields[b]=a;this.logOperation("setFieldValues",{field:b,value:a});};nlobjRecord.prototype.getFieldValue=function(a){return this.fields[a]!=null?this.fields[a]:null;};nlobjRecord.prototype.getFieldValues=function(a){return this.fields[a]!=null?this.fields[a]:null;};nlobjRecord.prototype.getAllFields=function(){var b=new Array();for(var c in this.fields){if(this.fields.hasOwnProperty(c)){b[b.length++]=c;}}for(var a=0;a<this.fieldnames.length;a++){arrayAdd(b,this.fieldnames[a]);}return b;};nlobjRecord.prototype.getAllLineItems=function(){var a=new Array();for(var b in this.lineitems){if(this.lineitems.hasOwnProperty(b)){a[a.length++]=b;}}return a;};nlobjRecord.prototype.getAllLineItemFields=function(a){var d=this.linefields[a];if(d==null){return null;}var c=new Array();for(var b=0;b<this.linefields[a].length;b++){c[c.length++]=this.linefields[a][b];}return c;};nlobjRecord.prototype.setLineItemValue=function(d,b,a,c){nsapiAssertTrue(a>0&&a-1<=this.getLineItemCount(d),"SSS_INVALID_SUBLIST_OPERATION");if(a-1==this.getLineItemCount(d)){this.selectNewLineItem(d);}else{if(a<=this.getLineItemCount(d)){this.selectLineItem(d,a);}}this.setCurrentLineItemValue(d,b,c);this.commitLineItem(d);};nlobjRecord.prototype.setAndCommitLineItemValue=function(f,c,b,d){var e=this.lineitems[f];if(e==null){e=new Array();this.lineitems[f]=e;}var a=e[b];if(a==null){a=new Array(1);e[b]=a;}a[c]=d;};nlobjRecord.prototype.insertLineItem=function(b,a){nsapiAssertTrue(this.linetypes[b]=="edit","SSS_INVALID_SUBLIST_OPERATION");if(this.getCurrentLineItemIndex(b)==-1){if(a-1==this.getLineItemCount(b)||isNaN(parseInt(a))){this.selectNewLineItem(b);}else{if(a<=this.getLineItemCount(b)){this.selectLineItem(b,a);}}}var c=this.lineitems[b];if(c==null){c=new Array(1);this.lineitems[b]=c;}c.splice(a,0,new Array());this.logOperation("insertLineItem",{type:b});};nlobjRecord.prototype.removeLineItem=function(b,a){nsapiAssertTrue(this.linetypes[b]=="edit","SSS_INVALID_SUBLIST_OPERATION");if(this.getCurrentLineItemIndex(b)==-1){if(a-1==this.getLineItemCount(b)||isNaN(parseInt(a))){this.selectNewLineItem(b);}else{if(a<=this.getLineItemCount(b)){this.selectLineItem(b,a);}}}var c=this.lineitems[b];if(c==null||this.getLineItemCount(b)<a){return;}c.splice(a,1);this.logOperation("removeLineItem",{type:b});if(this.getCurrentLineItemIndex(b)!=-1){this.currentlineitems[b]=null;this.currentlineitemindexes[b]=null;}};nlobjRecord.prototype.getLineItemValue=function(f,c,b){var d=null;var e=this.lineitems[f];if(e!=null){var a=e[b];if(a!=null){d=a[c];}}return d!=null?d:null;};nlobjRecord.prototype.getLineItemCount=function(b){var a=this.lineitems[b];return a!=null?a.length-1:0;};nlobjRecord.prototype.setLineItemMatrixValue=function(d,b,a,c,e){if(this.isMatrixField(d,b)){this.setLineItemValue(d,this.getMatrixFieldName(d,b,c),a,e);}};nlobjRecord.prototype.getLineItemMatrixValue=function(d,b,a,c){if(this.isMatrixField(d,b)){return this.getLineItemValue(d,this.getMatrixFieldName(d,b,c),a);}return null;};nlobjRecord.prototype.findLineItemValue=function(c,b,d){for(var a=1;a<=this.getLineItemCount(c);a++){if(d==this.getLineItemValue(c,b,a)){return a;}}return -1;};nlobjRecord.prototype.findLineItemMatrixValue=function(c,a,b,d){if(this.isMatrixField(c,a)){return this.findLineItemValue(c,this.getMatrixFieldName(c,a,b),d);}return -1;};nlobjRecord.prototype.setMatrixValue=function(c,a,b,d){if(this.isMatrixField(c,a)){this.fields[this.getFieldValue(c+"header")+b]=d;this.logOperation("setMatrixValue",{type:c,field:name,column:b,value:d});}};nlobjRecord.prototype.getMatrixValue=function(c,a,b){return this.isMatrixField(c,a)?this.getFieldValue(this.getFieldValue(c+"header")+b):null;};nlobjRecord.prototype.getMatrixCount=function(b,a){return this.isMatrixField(b,a)?this.getFieldValue(this.getFieldValue(b+"headercount")):null;};nlobjRecord.prototype.selectLineItem=function(c,a){nsapiAssertTrue(this.linetypes[c]!=null&&a>0&&a<=this.getLineItemCount(c),"SSS_INVALID_SUBLIST_OPERATION");this.currentlineitems[c]=new Object();this.currentlineitemindexes[c]=a;var d=this.getAllLineItemFields(c);for(var b=0;b<d.length;b++){this.currentlineitems[c][d[b]]=this.getLineItemValue(c,d[b],a);}this.logOperation("selectLineItem",{type:c,linenum:a});};nlobjRecord.prototype.selectNewLineItem=function(a){nsapiAssertTrue(this.linetypes[a]!=null&&this.linetypes[a]=="edit","SSS_INVALID_SUBLIST_OPERATION");this.currentlineitems[a]=new Object();this.currentlineitemindexes[a]=this.getLineItemCount(a)+1;this.logOperation("selectNewLineItem",{type:a});};nlobjRecord.prototype.cancelLineItem=function(a){nsapiAssertTrue(this.getCurrentLineItemIndex(a)!=-1,"SSS_INVALID_SUBLIST_OPERATION");this.currentlineitems[a]=null;this.currentlineitemindexes[a]=null;this.logOperation("cancelLineItem",{type:a});};nlobjRecord.prototype.commitLineItem=function(c){nsapiAssertTrue(this.getCurrentLineItemIndex(c)!=-1,"SSS_INVALID_SUBLIST_OPERATION");var d=this.getAllLineItemFields(c);var a=this.getCurrentLineItemIndex(c);for(var b=0;b<d.length;b++){this.setAndCommitLineItemValue(c,d[b],a,this.currentlineitems[c][d[b]]);}this.currentlineitems[c]=null;this.currentlineitemindexes[c]=null;this.logOperation("commitLineItem",{type:c});};nlobjRecord.prototype.getCurrentLineItemIndex=function(a){return this.currentlineitems[a]!=null?this.currentlineitemindexes[a]:-1;};nlobjRecord.prototype.getCurrentLineItemValue=function(b,a){nsapiAssertTrue(this.getCurrentLineItemIndex(b)!=-1,"SSS_INVALID_SUBLIST_OPERATION");return this.currentlineitems[b][a];};nlobjRecord.prototype.setCurrentLineItemValue=function(b,a,c){nsapiAssertTrue(this.getCurrentLineItemIndex(b)!=-1,"SSS_INVALID_SUBLIST_OPERATION");this.currentlineitems[b][a]=c;this.logOperation("setCurrentLineItemValue",{type:b,field:a,value:c});};nlobjRecord.prototype.setCurrentLineItemMatrixValue=function(c,a,b,d){nsapiAssertTrue(this.getCurrentLineItemIndex(c)!=-1,"SSS_INVALID_SUBLIST_OPERATION");this.currentlineitems[c][this.getMatrixFieldName(c,a,b)]=d;this.logOperation("setCurrentLineItemMatrixValue",{type:c,field:a,column:b,value:d});};nlobjRecord.prototype.getCurrentLineItemMatrixValue=function(c,a,b){nsapiAssertTrue(this.getCurrentLineItemIndex(c)!=-1,"SSS_INVALID_SUBLIST_OPERATION");return this.currentlineitems[c][this.getMatrixFieldName(c,a,b)];};nlobjRecord.prototype.setFieldText=function(a,b){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjRecord.prototype.setFieldTexts=function(a,b){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjRecord.prototype.getFieldText=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjRecord.prototype.getFieldTexts=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjRecord.prototype.getLineItemText=function(c,b,a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjRecord.prototype.getCurrentLineItemText=function(b,a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjRecord.prototype.setCurrentLineItemText=function(b,a,c){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjRecord.prototype.getField=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjRecord.prototype.getSublist=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjRecord.prototype.getMatrixField=function(b,a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjRecord.prototype.getLineItemField=function(c,b,a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjRecord.prototype.getLineItemField=function(c,b,a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjRecord.prototype.getFieldDisabled=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjRecord.prototype.getFieldMandatory=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjRecord.prototype.getFieldDisplay=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjRecord.prototype.getFieldVisibility=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjRecord.prototype.getFieldLabel=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjRecord.prototype.getLineItemDisplay=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjRecord.prototype.getLineItemDisabled=function(c,b,a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjRecord.prototype.getLineItemMandatory=function(c,b,a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjRecord.prototype.getLineItemLabel=function(b,a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjRecord.prototype.isMatrixField=function(b,a){return this.getFieldValue(b+"matrixfields")!=null&&arrayIndexOf(this.getFieldValue(b+"matrixfields").split(","),a)!=-1;};nlobjRecord.prototype.getMatrixFieldName=function(c,a,b){return this.isMatrixField(c,a)?a+"_"+b+"_":null;};nlobjRecord.prototype.logOperation=function(a,b){if(this.initialized){this.operations.push({operation:a,args:b});}};nlobjRecord.prototype.getDateTimeValue=function(d,e){if(e==null){return this.getFieldValue(d);}else{var b=this.getFieldValue(d);var c=nlapiGetContext();var a=c.getPreference("TIMEZONE");if(a==e){return b;}else{return nsServerCall(nsJSONProxyURL,"calculateGetDateTimeWithTimeZone",[b,e]);}}};nlobjRecord.prototype.setDateTimeValue=function(d,f,e){if(e==null){return this.setFieldValue(d,f);}else{var c=nlapiGetContext();var a=c.getPreference("TIMEZONE");if(a==e){return this.setFieldValue(d,f);}else{var b=nsServerCall(nsJSONProxyURL,"calculateSetDateTimeWithNewTimeZone",[f,e]);return this.setFieldValue(d,b);}}};nlobjRecord.prototype.calculateTax=function(){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};function nlobjSearch(b,d,c,a){this.type=b;this.searchId=d;this.scriptId=null;this.filters=c==null?null:(isArray(c)?c.slice():[c]);this.columns=a==null?null:(isArray(a)?a.slice():[a]);this.isPublic=false;}nlobjSearch.prototype._load=function(){var a=nsServerCall(nsJSONProxyURL,"loadSearch",[this.type,this.searchId]);this.isPublic=a.ispublic;this.searchId=a.searchId;this.scriptId=a.scriptid;this.type=a.type;this.filters=nsapiUnmarshalArray(a,"filter",nsapiUnmarshalSearchFilter);this.columns=nsapiUnmarshalArray(a,"column",nsapiUnmarshalSearchColumn);};function nsapiUnmarshalArray(a,e,g){var h=[];var d=a[e+"count"];for(var c=0;c<d;++c){var b=a[e+c];var f=g(b);h.push(f);}return h;}nlobjSearch.prototype._clone=function(){var c;var b=[];for(c=0;this.filters&&c<this.filters.length;++c){b.push(this.filters[c]._clone());}var a=[];for(c=0;this.columns&&c<this.columns.length;++c){a.push(this.columns[c]._clone());}var d=new nlobjSearch(this.type,this.searchId,b,a);d.scriptId=this.scriptId;d.isPublic=this.isPublic;d.type=this.type;return d;};nlobjSearch.prototype.runSearch=function(){return new nlobjSearchResultSet(this._clone());};nlobjSearch.prototype.saveSearch=function(f,g){try{var b=nsapiMarshalSearchFilters(this.filters);var a=nsapiMarshalSearchColumns(this.columns);var d=nsServerCall(nsJSONProxyURL,"saveSearch",[f,g,this.type,this.searchId,b,a,this.isPublic],null,"POST");return d;}catch(c){throw nlapiCreateError(c);}};nlobjSearch.prototype.deleteSearch=function(){try{nsapiAssertTrue(this.searchId&&this.searchId!=-1,"SSS_CANT_DELETE_AD_HOC_SEARCH");nsServerCall(nsJSONProxyURL,"deleteSearch",[this.type,this.searchId]);}catch(a){throw nlapiCreateError(a);}};nlobjSearch.prototype.getFilters=function(){return this.filters;};nlobjSearch.prototype.setFilters=function(a){this.filters=a==null?null:(isArray(a)?a.slice():[a]);};nlobjSearch.prototype.addFilter=function(a){if(!this.filters){this.filters=[a];}else{this.filters.push(a);}};nlobjSearch.prototype.addFilters=function(b){if(b){for(var a=0;a<b.length;++a){this.addFilter(b[a]);}}};nlobjSearch.prototype.getFilterExpression=function(){var a=nsapiMarshalSearchFilters(this.filters);var b=nsServerCall(nsJSONProxyURL,"buildSearchFilterExpression",[a],null,"POST");return nsapiUnmarshalSearchFilterExpression(b);};nlobjSearch.prototype.setFilterExpression=function(a){a=nsapiNormalizeFilters(a);nsapiAssertTrue(!nsapiIsFlatSearchFilterList(a),"SSS_INVALID_SRCH_FILTER_EXPR");this.filters=nsapiParseSearchFilterExpression(a);};nlobjSearch.prototype.getColumns=function(){return this.columns;};nlobjSearch.prototype.setColumns=function(a){this.columns=a==null?null:(isArray(a)?a.slice():[a]);};nlobjSearch.prototype.addColumn=function(a){if(!this.columns){this.columns=[a];}else{this.columns.push(a);}};nlobjSearch.prototype.addColumns=function(b){if(b){for(var a=0;a<b.length;++a){this.addColumn(b[a]);}}};nlobjSearch.prototype.setRedirectURLToSearch=function(){try{var c=nsapiMarshalSearchFilters(this.filters);var b=nsapiMarshalSearchColumns(this.columns);var a=nsServerCall(nsJSONProxyURL,"prepareSearchPage",[this.type,this.searchId,c,b]);nsapiSetRedirectURL(a);}catch(d){throw nlapiCreateError(d);}};nlobjSearch.prototype.setRedirectURLToSearchResults=function(){try{var c=nsapiMarshalSearchFilters(this.filters);var b=nsapiMarshalSearchColumns(this.columns);var a=nsServerCall(nsJSONProxyURL,"prepareSearchResults",[this.type,this.searchId,c,b]);nsapiSetRedirectURL(a);}catch(d){throw nlapiCreateError(d);}};nlobjSearch.prototype.getId=function(){return(!this.searchId||this.searchId==-1)?null:this.searchId;};nlobjSearch.prototype.getScriptId=function(){return this.scriptId;};nlobjSearch.prototype.getSearchType=function(){return this.type;};nlobjSearch.prototype.getIsPublic=function(){return this.isPublic;};nlobjSearch.prototype.setIsPublic=function(a){this.isPublic=a;};nlobjSearch.prototype._getResultsSlice=function(h,a){try{var d=nsapiMarshalSearchFilters(this.filters);var c=nsapiMarshalSearchColumns(this.columns);var b=nsServerCall(nsJSONProxyURL,"searchRecordSlice",[this.type,this.searchId,d,c,h,a]);var g=nsapiExtractSearchResults(b,this.columns);nsapiLogUsage("nlapiSearchRecord",isValEmpty(this.searchId)&&nsapiIsLookup(this.filters)?type:null);return g!=null&&g.length>0?g:null;}catch(f){throw nlapiCreateError(f);}};function nlobjSearchResultSet(a){this.search=a;}nlobjSearchResultSet.prototype.getColumns=function(){return this.search.getColumns();};nlobjSearchResultSet.prototype.getResults=function(b,a){nsapiAssertTrue(b>=0,"SSS_INVALID_SEARCH_RESULT_INDEX");nsapiAssertTrue((a-b)<=1000,"SSS_SEARCH_RESULT_LIMIT_EXCEEDED");if(b>=a){return[];}return this.search._getResultsSlice(b,a);};nlobjSearchResultSet.prototype.forEachResult=function(f){var d=50,b=true;for(var e=0;;e+=d){var c=this.getResults(e,e+d);if(!c){break;}for(var a=0;b&&a<c.length;++a){b=f(c[a]);}if(c.length<d){break;}}};function nlobjSearchFilter(c,e,b,d,a){nsapiCheckArgs([c],["name"],"nlobjSearchFilter");this.name=c;this.join=e;this.operator=b;this.values=new Array();this.addValue(d);this.addValue(a);this.formula=null;this.summarytype=null;this.isor=false;this.isnot=false;this.leftparens=0;this.rightparens=0;}nlobjSearchFilter.prototype._clone=function(){var a=new nlobjSearchFilter(this.name,this.join,this.operator,null,null);a.values=this.values.slice();a.formula=this.formula;a.summarytype=this.summarytype;a.isor=this.isor;a.isnot=this.isnot;a.leftparens=this.leftparens;a.rightparens=this.rightparens;return a;};nlobjSearchFilter.prototype.getName=function(){return this.name;};nlobjSearchFilter.prototype.getJoin=function(){return this.join;};nlobjSearchFilter.prototype.getOperator=function(){return this.operator;};nlobjSearchFilter.prototype.getSummaryType=function(){return this.summarytype;};nlobjSearchFilter.prototype.getFormula=function(){return this.formula;};nlobjSearchFilter.prototype.setFormula=function(a){this.formula=a;return this;};nlobjSearchFilter.prototype.setSummaryType=function(a){this.summarytype=a;return this;};nlobjSearchFilter.prototype.addValue=function(b){if(isArray(b)){for(var a=0;a<b.length;a++){if(b[a]!=null){this.values.push(b[a].toString());}}}else{if(b!=null){this.values.push(b.toString());}}};nlobjSearchFilter.prototype._marshal=function(){var a=nsapiJSONRPCMap();a.name=this.name;a.operator=this.operator;a.values=this.values.length==0?null:this.values;a.join=this.join;a.formula=this.formula;a.summarytype=this.summarytype;a.isor=this.isor;a.isnot=this.isnot;a.leftparens=this.leftparens;a.rightparens=this.rightparens;return a;};function nlobjSearchColumn(b,c,a){nsapiCheckArgs([b],["name"],"nlobjSearchColumn");this.name=b;this.join=c;this.summary=a;this.type=null;this.label=null;this.functionid=null;this.formula=null;this.sortdir=null;this.index=-1;this.userindex=-1;this.whenorderedby=null;this.whenorderedbyjoin=null;}nlobjSearchColumn.prototype._clone=function(){var a=new nlobjSearchColumn(this.name,this.join,this.summary);a.type=this.type;a.label=this.label;a.functionid=this.functionid;a.formula=this.formula;a.sortdir=this.sortdir;a.index=this.index;a.userindex=this.userindex;a.whenorderedby=this.whenorderedby;a.whenorderedbyjoin=this.whenorderedbyjoin;return a;};nlobjSearchColumn.prototype.getName=function(){return this.name;};nlobjSearchColumn.prototype.getJoin=function(){return this.join;};nlobjSearchColumn.prototype.getType=function(){return this.type;};nlobjSearchColumn.prototype.getSummary=function(){return this.summary;};nlobjSearchColumn.prototype.getFormula=function(){return this.formula;};nlobjSearchColumn.prototype.setFormula=function(a){this.formula=a;return this;};nlobjSearchColumn.prototype.getLabel=function(){return this.label;};nlobjSearchColumn.prototype.setLabel=function(a){this.label=a;return this;};nlobjSearchColumn.prototype.getFunction=function(){return this.functionid;};nlobjSearchColumn.prototype.setFunction=function(a){this.functionid=a;return this;};nlobjSearchColumn.prototype.getSort=function(){return this.sortdir;};nlobjSearchColumn.prototype.setSort=function(a){this.sortdir=a?"DESC":"ASC";return this;};nlobjSearchColumn.prototype.getWhenOrderedBy=function(){return this.whenorderedby;};nlobjSearchColumn.prototype.getWhenOrderedByJoin=function(){return this.whenorderedbyjoin;};nlobjSearchColumn.prototype.setWhenOrderedBy=function(a,b){this.whenorderedby=a;this.whenorderedbyjoin=b;return this;};nlobjSearchColumn.prototype._marshal=function(){var a=new Object();a.name=this.name;a.join=this.join;a.summary=this.summary;a.label=this.label;a.type=this.type;a.functionid=this.functionid;a.formula=this.formula;a.sortdir=this.sortdir;a.whenorderedby=this.whenorderedby;a.whenorderedbyjoin=this.whenorderedbyjoin;a.userindex=this.userindex;return a;};function nlobjSearchResult(d,e,a,c){this.type=d;this.id=e;this.rawValues=a;this.rawColumns=c;this.valuesByIdx=[];this.valuesByKey=new Object();for(var b=0;a!=null&&b<a.length;b++){this.valuesByIdx[a[b].index]=a[b];this.valuesByKey[this.getKey(c[b].name,c[b].join,c[b].summary)]=a[b];}}nlobjSearchResult.prototype.getId=function(){return this.id;};nlobjSearchResult.prototype.getRecordType=function(){return this.type;};nlobjSearchResult.prototype.getValue=function(d,e,c){var a=null;if(typeof(d)=="string"){a=this.valuesByKey[this.getKey(d,e,c)];}else{if(d instanceof nlobjSearchColumn){var b=d;if(b.index!=-1){a=this.valuesByIdx[b.index];}if(a==null){a=this.valuesByKey[this.getKey(b.name,b.join,b.summary)];}}}return a!=null?a.value:null;};nlobjSearchResult.prototype.getText=function(d,e,c){var a=null;if(typeof(d)=="string"){a=this.valuesByKey[this.getKey(d,e,c)];}else{if(d instanceof nlobjSearchColumn){var b=d;if(b.index!=-1){a=this.valuesByIdx[b.index];}if(a==null){a=this.valuesByKey[this.getKey(b.name,b.join,b.summary)];}}}return a!=null?a.text:null;};nlobjSearchResult.prototype.getKey=function(b,c,a){return(c!=null?c.toLowerCase()+"_":"")+b.toLowerCase()+(a!=null?"_"+a.toLowerCase():"");};nlobjSearchResult.prototype.getAllColumns=function(){return this.rawColumns;};var nsDefaultContextObj=null;function nlobjContext(){var a=nsDefaultContextObj!=null?nsDefaultContextObj:nsServerCall(nsJSONProxyURL,"getContext");this.name=a.name;this.email=a.email;this.user=a.user;this.role=a.role;this.roleid=a.roleid;this.rolecenter=a.rolecenter;this.company=a.company;this.contact=a.contact;this.department=a.department;this.location=a.location;this.version=a.version;this.subsidiary=a.subsidiary;this.environment=a.environment;this.executioncontext=a.context;this.scriptprefs=null;this.usage=new Object();this.internal=true;this.totalBundleUsage=new Object();this.getTotalUsage=function(){var b=-1;var c=nsapiQueryScript("scriptid");if(c!=null&&c!="global"&&c!="internal"){b=fBundleIds[nsapiQueryScript("scriptid")];if(b==null||b==""){b=-1;}}if(this.totalBundleUsage[b]==null){this.totalBundleUsage[b]=nsServerCall(nsJSONProxyURL,"getTotalScriptGovernance",[b]);}return this.totalBundleUsage[b];};this.setUsage=function(d,c){var b=this.getScriptId();if(b!="global"&&b!="internal"){var e=parseInt(nsUsageCosts[d]);if(c!=null){e/=(nsapiGetRecord(c).type=="RECORD"?5:nsapiGetRecord(c).type=="BODY"?1:2);}this.usage[b]=(this.usage[b]!=null?this.usage[b]:0)+e;}};}nlobjContext.prototype.getName=function(){return this.name;};nlobjContext.prototype.getUser=function(){return this.user;};nlobjContext.prototype.getRole=function(){return this.role;};nlobjContext.prototype.getRoleId=function(){return this.roleid;};nlobjContext.prototype.getRoleCenter=function(){return this.rolecenter;};nlobjContext.prototype.getEmail=function(){return this.email;};nlobjContext.prototype.getContact=function(){return this.contact;};nlobjContext.prototype.getCompany=function(){return this.company;};nlobjContext.prototype.getDepartment=function(){return this.department;};nlobjContext.prototype.getLocation=function(){return this.location;};nlobjContext.prototype.getSubsidiary=function(){return this.subsidiary;};nlobjContext.prototype.getEnvironment=function(){return this.environment;};nlobjContext.prototype.getExecutionContext=function(){return this.executioncontext;};nlobjContext.prototype.getRemainingUsage=function(){return this.getTotalUsage()-(this.usage[this.getScriptId()]==null?0:parseInt(this.usage[this.getScriptId()]));};nlobjContext.prototype.getRemainingInstructions=function(){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjContext.prototype.getBundleId=function(){return fBundleIds[nsapiQueryScript("scriptid")];};nlobjContext.prototype.getScriptId=function(){return window.NLScriptId;};nlobjContext.prototype.getDeploymentId=function(){return fDeployIds[nsapiQueryScript("scriptid")];};nlobjContext.prototype.getScriptType=function(){return"CLIENT";};nlobjContext.prototype.getFeature=function(a){return nsServerCall(nsJSONProxyURL,"getFeature",[a]);};nlobjContext.prototype.getPreference=function(a){if(a.toLowerCase().indexOf("custscript")==0){this.scriptprefs=this.scriptprefs!=null?this.scriptprefs:nsServerCall(nsJSONProxyURL,"getScriptPrefs",[nlapiGetRecordType()]);return this.scriptprefs[a];}return nsServerCall(nsJSONProxyURL,"getPref",[a]);};nlobjContext.prototype.getPermission=function(a){return nsServerCall(nsJSONProxyURL,"getPerm",[a]);};nlobjContext.prototype.getSessionObject=function(a){return nsServerCall(nsJSONProxyURL,"getSessionObject",[a]);};nlobjContext.prototype.setSessionObject=function(a,b){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjContext.prototype.getAllSessionObjects=function(){return nsServerCall(nsJSONProxyURL,"getAllSessionObjects");};nlobjContext.prototype.getPercentComplete=function(){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjContext.prototype.setPercentComplete=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjContext.prototype.getRecordCount=function(){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjContext.prototype.setRecordCount=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjContext.prototype.getRecordCompletedCount=function(){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjContext.prototype.setRecordCompletedCount=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjContext.prototype.getRecordFailedCount=function(){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjContext.prototype.setRecordFailedCount=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjContext.prototype.getSetting=function(b,a){switch(b.toLowerCase()){case"script":return this.getPreference(a);case"feature":return this.getFeature(a)?"T":"F";case"preference":return this.getPreference(a);case"permission":return this.getPermission(a);case"session":return this.getSessionObject(a);throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");}return null;};nlobjContext.prototype.setSetting=function(b,a,c){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjContext.prototype.getVersion=function(){return this.version;};nlobjContext.prototype.isInternal=function(){return nsapiIsInternal();};nlobjContext.prototype.getColorPreferences=function(){return nsServerCall(nsJSONProxyURL,"getColorPreferences");};function nlobjError(c,a,b){this.id=null;this.code=c;this.details=a;this.stacktrace=stacktrace();this.suppressnotification=b;if(c instanceof nlobjError||c instanceof NLXMLResponseError){this.id=c.getId();this.code=c.getCode();this.details=c.getDetails();if(c instanceof nlobjError){this.stacktrace=c.getStackTrace();}}this.name=this.code;this.message=this.details;this.description=this.details;}nlobjError.prototype.getId=function(){return this.id;};nlobjError.prototype.getCode=function(){return this.code;};nlobjError.prototype.getDetails=function(){return this.details;};nlobjError.prototype.getStackTrace=function(){return this.stacktrace;};function nlobjServerResponse(d,a,e,b){this.code=d;this.body=a;this.headers=e;this.headerNames=new Array();for(var c in this.headers){if(this.headers.hasOwnProperty(c)){this.headerNames[this.headerNames.length]=c;}}this.error=b;this.contentType=this.getHeader("Content-Type");}nlobjServerResponse.prototype.getCode=function(){return this.code;};nlobjServerResponse.prototype.getBody=function(){return this.body;};nlobjServerResponse.prototype.getContentType=function(){return this.contentType;};nlobjServerResponse.prototype.getAllHeaders=function(){return this.headerNames;};nlobjServerResponse.prototype.getHeader=function(a){return this.headers[this.resolveHeaderName(a)]!=null?nullIfEmpty(this.headers[this.resolveHeaderName(a)][0]):null;};nlobjServerResponse.prototype.getHeaders=function(a){return this.headers[this.resolveHeaderName(a)];};nlobjServerResponse.prototype.getError=function(){return this.error;};nlobjServerResponse.prototype.resolveHeaderName=function(a){if(window.navigator.userAgent.indexOf("Safari")!=-1&&a!=null&&a.indexOf(nsHeaderPrefix)==0&&this.headers[a]==null){for(var b in this.headers){if(this.headers.hasOwnProperty(b)){if(b.toLowerCase()==a.toLowerCase()){return b;}}}}return a;};function nlobjField(b,c,a){this.name=b;this.type=c;this.noslaving=false;this.sublist=a;this.label=null;this.required=false;this.disabled=false;this.hidden=false;this.display=false;this.visible=false;this.popup=false;this.readonly=false;this.parent=null;this.uifield=null;this.linenum=-1;}nlobjField.prototype.getName=function(){return this.name;};nlobjField.prototype.getType=function(){return this.type;};nlobjField.prototype.getLabel=function(){return this.label!=null?this.label:"";};nlobjField.prototype.getSubList=function(){return this.sublist;};nlobjField.prototype.getParent=function(){return this.parent;};nlobjField.prototype.getLine=function(){return this.linenum;};nlobjField.prototype.getUIField=function(){return this.uifield;};nlobjField.prototype.noSlaving=function(){return this.noslaving;};nlobjField.prototype.isMandatory=function(){return this.required;};nlobjField.prototype.isDisabled=function(){return this.disabled;};nlobjField.prototype.isHidden=function(){return this.hidden;};nlobjField.prototype.isPopup=function(){return this.popup;};nlobjField.prototype.isDisplay=function(){return this.display;};nlobjField.prototype.isVisible=function(){return this.visible;};nlobjField.prototype.isReadOnly=function(){return this.readonly;};nlobjField.DISPLAY_TYPE={INLINE:"inline",HIDDEN:"hidden",READ_ONLY:"readonly",ENTRY:"entry",DISABLED:"disabled",NORMAL:"normal"};nlobjField.prototype.setDisplayType=function(a){nsapiCheckArgs([a],["displayType"],"nlobjField.setDisplayType");console.log("setDisplayType: "+a);switch(a.toLowerCase()){case nlobjField.DISPLAY_TYPE.INLINE:throw nlapiCreateError("SS_NOT_YET_SUPPORTED");break;case nlobjField.DISPLAY_TYPE.HIDDEN:if(this.readonly){showInlineField.apply(this,[false]);}else{nlapiSetFieldDisplay(this.name,false);}this.hidden=true;this.visible=false;this.display=false;break;case nlobjField.DISPLAY_TYPE.READ_ONLY:if(!this.type||this.type!=="textarea"){return;}nlapiDisableField(this.name,true);this.disabled=true;break;case nlobjField.DISPLAY_TYPE.ENTRY:if(this.hidden||this.disabled){return;}nlapiDisableField(this.name,false);nlapiSetFieldDisplay(this.name,true);this.hidden=false;this.visible=true;this.display=true;this.disabled=false;break;case nlobjField.DISPLAY_TYPE.DISABLED:nlapiDisableField(this.name,true);this.disabled=true;break;case nlobjField.DISPLAY_TYPE.NORMAL:nlapiDisableField(this.name,false);nlapiSetFieldDisplay(this.name,true);this.hidden=false;this.visible=true;this.display=true;this.disabled=false;break;default:break;}};nlobjField.prototype.setLabel=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjField.prototype.setAlias=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjField.prototype.setDefaultValue=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjField.prototype.setDisabled=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjField.prototype.setMandatory=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjField.prototype.setMaxLength=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjField.prototype.setLayoutType=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjField.prototype.setLinkText=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjField.prototype.setHelpText=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjField.prototype.setDisplaySize=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjField.prototype.setPadding=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjField.prototype.addSelectOption=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjField.prototype.getSelectOptions=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};function nlobjSubList(name){this.name=name;var thisType;if(isEditMachine(name)){thisType=eval(String(name)+"_machine").isinline?"inlineeditor":"editor";}else{thisType=getFormElement(document.forms.main_form,name+"matrixfields")!=null?"matrix":"list";}this.type=thisType;this.label=null;this.hidden=false;this.display=true;}nlobjSubList.prototype.getName=function(){return this.name;};nlobjSubList.prototype.getType=function(){return this.type;};nlobjSubList.prototype.getLabel=function(){return this.label;};nlobjSubList.prototype.isHidden=function(){return this.hidden;};nlobjSubList.prototype.isDisplay=function(){return this.display;};nlobjSubList.prototype.isChanged=function(){return wasMachineChanged(this.name);};nlobjSubList.prototype.setLabel=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjSubList.prototype.setHelpText=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjSubList.prototype.setDisplayType=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjSubList.prototype.setLineItemValue=function(c,a,b){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjSubList.prototype.setLineItemMatrixValue=function(d,a,b,c){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjSubList.prototype.setLineItemValues=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjSubList.prototype.getField=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjSubList.prototype.getAllFields=function(){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjSubList.prototype.getAllHeaderFields=function(){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjSubList.prototype.addField=function(b,c,a,d,e){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjSubList.prototype.addHeaderField=function(b,c,a,d){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjSubList.prototype.setAmountField=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjSubList.prototype.setUniqueField=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjSubList.prototype.getMatrixCount=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjSubList.prototype.addButton=function(c,b,a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjSubList.prototype.getButton=function(a){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjSubList.prototype.addRefreshButton=function(){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};nlobjSubList.prototype.addMarkAllButtons=function(){throw nlapiCreateError("SSS_NOT_YET_SUPPORTED");};function nsapiButtonCall(b,d,c,a){return nsapiCallUserScript(b,d,c,a);}function nsapiCallUserScript(b,e,c,a){var d=nsapiIsInternal();try{nsapiSetIsInternal(false);if(nlapiGetContext().usage){nlapiGetContext().usage[e]=0;}return nsapiCallScript(b,e,c,a);}finally{nsapiUpdateMachines();nsapiSetIsInternal(d);}}function nsapiCallScript(trigger,scriptid,func,args){var origScriptId=window.NLScriptId;window.NLScriptId=scriptid;if(typeof(nlapi)!=="undefined"&&nlapi&&nlapi.async){nlapi.async.prepareForAsync({id:scriptid,trigger:trigger,args:args});}try{if(isValEmpty(func)){return true;}var argstr="";if(typeof(func)!="function"&&(typeof(func)!="string"||func.indexOf("(")==-1)){for(var i=0;args!=null&&i<args.length;i++){argstr+=(i>0?", ":"")+(args[i]==null||typeof(args[i])=="undefined"?"null":typeof(args[i])!="string"?args[i]:"'"+args[i]+"'");}}if(nlapiGetContext().isInternal()){if(typeof(func)=="function"){return func();}else{if(typeof(func)=="string"&&func.indexOf("(")>0){return eval(func);}else{return eval(func+"("+argstr+")");}}}else{try{if(typeof(func)=="function"){return func();}else{if(typeof(func)=="string"&&func.indexOf("(")>0){return eval(func);}else{return eval(func+"("+argstr+")");}}}catch(e){var fn=typeof(func)=="function"?getFuncName(func):func.indexOf("(")>0?func.substring(0,func.indexOf("(")):func;var id=e.getCode!=null&&typeof(e.getCode)=="function"?e.getId():null;var code=e.getCode!=null&&typeof(e.getCode)=="function"?e.getCode():typeof(e)=="string"?new String(e):typeof(e)=="object"&&e.name&&e.message?"JS_EXCEPTION":"UNEXPECTED_ERROR";if(code=="UNEXPECTED_ERROR"&&id!=null){code+=" (id="+id+")";}var msg=e.getDetails!=null&&typeof(e.getDetails)=="function"?emptyIfNull(e.getDetails()):typeof(e)=="string"?"":typeof(e)=="object"&&e.name&&e.message?e.name+" "+e.message:e.toString();var suppressnotification=e.getCode!=null&&typeof(e.getCode)=="function"&&e.suppressnotification===true;var supportsLogging=scriptid!="customform";alert(window.nsScriptErrorMsg+"\n\n"+fn+" ("+trigger+")\n"+scriptid+""+(isValEmpty(nlapiGetContext().getBundleId())?"":" ("+nlapiGetContext().getBundleId()+")")+"\n\n"+code+"\n"+msg);if(supportsLogging){nsServerCall(nsJSONProxyURL,"logError",[code,msg,id,fn,scriptid,suppressnotification,nlapiGetRecordType(),nlapiGetRecordId()]);}throw e;}}}finally{if(typeof(nlapi)!=="undefined"&&nlapi&&nlapi.async){nlapi.async.unloadAsync();}window.NLScriptId=origScriptId;}}function nsapiIsInternal(){return nlapiGetContext().internal;}function nsapiSetIsInternal(a){nlapiGetContext().internal=a;}function nsapiQueryScript(b){var h=0;var g=!!window?window.NLScriptId:null;var f;for(var d=arguments.callee.caller;d!=null&&d.caller!=d;d=d.caller){if(h===50){nsServerCall(nsJSONProxyURL,"logErrorDbAudit",["Client SuiteScript - Infinite loop detected in nsapiQueryScript:  [arg0] - "+b,"[Client Side Stack Trace] - "+(Error().stack)],null,"GET");return null;}f=getFuncName(d);if(f.indexOf("nsapiCallScript")>=0&&d.arguments.length>=3){return d.arguments[b=="trigger"?0:1];}if(["runClientScript","makeAsyncCall","invokeOn"].indexOf(f)>=0){return g;}h++;}var e=(Error().stack||"").split("\n");if(e[e.length-1].indexOf("runScript")>=0){return g;}return b=="scriptid"?"global":null;}function nsapiFireOnChange(d,a,f){var e=!!f&&a||!f&&!(nsapiIsInternal()&&a==false);if(e){var b="";var c=d.checkvalid;var g=nsapiIsInternal();if(a==false&&document.forms.main_form.elements.nlapiFC!=null){b=document.forms.main_form.elements.nlapiFC.value;document.forms.main_form.elements.nlapiFC.value="";}try{d.checkvalid=true;nsapiSetIsInternal(true);fireProperOnChange(d);}finally{if(b.length>0){document.forms.main_form.elements.nlapiFC.value=b;}d.checkvalid=c;nsapiSetIsInternal(g);}}NS.event.dispatch(NS.event.type.FIELD_CHANGED,{field:d});}var nsUpdatedMachines=new Object();function nsapiUpdateMachines(){for(var s in nsUpdatedMachines){if(nsUpdatedMachines.hasOwnProperty(s)){var mch=eval(String(s)+"_machine");if(mch!=null){mch.buildtable();}}}nsUpdatedMachines=new Object();}var nsDisabledFields=new Object();var nsTasklinks;var nsRecordTypes;var nsStandaloneSearchTypes;function nsapiGetTaskLink(a){if(nsTasklinks==null){nsTasklinks=nsServerCall(nsJSONProxyURL,"getTaskLinks");}return nsTasklinks[a];}function nsapiInitRecords(){if(nsRecordTypes==null){nsRecordTypes=nsServerCall(nsJSONProxyURL,"getRecordTypes");}}function nsapiGetRecord(a){nsapiCheckArgs([a],["type"],"nsapiGetRecord");nsapiInitRecords();return nsRecordTypes[a.toLowerCase()];}function isStandaloneSearchType(a){if(!nsStandaloneSearchTypes){nsStandaloneSearchTypes=nsServerCall(nsJSONProxyURL,"getStandaloneSearchTypes");}return nsStandaloneSearchTypes&&nsStandaloneSearchTypes.indexOf(a.toLowerCase())>=0;}function nsapiGetRecordURL(b,e){nsapiInitRecords();var d=nsapiGetRecord(b);if(d!=null){var a=d.url;var c=d.urlparams;if(c!=null&&c.indexOf(",")!=-1){c=c.replace(",","&");}if(!isValEmpty(e)){a=addParamToURL(a,"id",e);}if((isValEmpty(e)||d.type=="OTHER")&&c!=null&&a.indexOf(c)==-1){a=addNextParamPrefixToURL(a)+c;}return a;}else{return null;}}function nsapiModifyLoadArg(a){if(a=="customform"){a="cf";}return a;}var nsUsageCosts=null;function nsapiCheckUsage(){if(nsUsageCosts==null){nsUsageCosts=nsServerCall(nsJSONProxyURL,"getUsageUnits");}if(nlapiGetContext().getRemainingUsage()<0){throw new nlapiCreateError("SCRIPT_EXECUTION_USAGE_LIMIT_EXCEEDED","Script Execution Usage Limit Exceeded");}}function nsapiLogUsage(b,a){nlapiGetContext().setUsage(b,a);}function nsapiCheckType(a,b,d){var c=nsapiGetRecord(a);if(c==null||(d&&c.scriptable==false)){throw nlapiCreateError("SSS_INVALID_RECORD_TYPE",(b!=null?b+": ":"")+"type argument "+a+" is not a valid record or is not available in your account. Please see the documentation for a list of supported record types.");}return true;}function nsapiCheckSearchType(a,b){if(!nsapiGetRecord(a)&&!isStandaloneSearchType(a)){throw nlapiCreateError("SSS_INVALID_RECORD_TYPE",(b!=null?b+": ":"")+"type argument "+a+" is not a valid record or standalone search type or is not available in your account. Please see the documentation for a list of supported record types.");}return true;}function nsapiCheckArray(a,b,d){if(!isArray(a)){return;}for(var c=0;c<a.length;c++){nsapiAssertTrue((a[c]||a[c]===0));nsapiAssertTrue((d===Object(d)&&a[c] instanceof d)||typeof a[c]===d||(a[c].constructor&&a[c].constructor.name&&a[c].constructor.name===d)||a[c].toString()===d,"SSS_INVALID_ARRAY_ARGUMENT",b+"["+c+"]");}}function nsapiResolveField(e,b,a,d){var c=null;if(d==null){if(e==null){var f=typeof(ftabs)!="undefined"&&ftabs[getFieldName(b)]!=null?document.forms[ftabs[getFieldName(b)]+"_form"]:document.forms.main_form;c=f.elements[b];if(c==null){c=getFormElement(f,getFieldName(b)+"_send");}}else{var f=document.forms[e+"_form"];c=f.elements[isEditMachine(e)?b:b+a];}}else{c=a!=null?getMatrixField(e,b,a,d):getMatrixHeaderField(e,b,d);}return c;}function nsapiIsLookup(a){return a!=null&&a.length==1&&nsapiIsSearchFilterObject(a[0])&&a[0].getName().toLowerCase()=="internalid"&&a[0].getOperator().toLowerCase()=="anyof"&&a[0].getSummaryType()==null&&a[0].getFormula()==null;}function nsapiExtractSearchResults(e,d){var g=[];var a=nsapiColumnsAsArray(d);if(e!=null){for(var c=0;e.columns!=null&&c<e.columns.length;c++){var f=null;var b=e.columns[c];if(b.userindex==-1){f=nsapiUnmarshalSearchColumn(b);}else{if(a!=null){f=a[b.userindex-1];}}f.index=b.index;f.type=b.type;e.columns[c]=f;}for(var c=0;c<e.rows.length;c++){g[g.length]=new nlobjSearchResult(e.rows[c].recordType,e.rows[c].id,e.rows[c].cells,e.columns);}}return g.length==0?null:g;}function nsapiExtractRecord(c){var l=nsSelectValue(c,"@id");var a=nsSelectValue(c,"@recordType");var g=new nlobjRecord(a,l);g.fieldnames=nsSelectValue(c,"@fields").split(",");var d=nsSelectNodes(c,"*");nsapiExtractFields(g,d);var k=nsSelectNodes(c,"machine");for(var e=0;k!=null&&e<k.length;e++){var f=k[e];var j=f.getAttribute("name");var b=nsSelectNodes(f,"line");g.linetypes[j]=f.getAttribute("type");g.linefields[j]=f.getAttribute("fields").split(",");if(f.getAttribute("matrixfields")!=null){g.matrixfields[j]=f.getAttribute("matrixfields").split(",");}for(var n=0;b!=null&&n<b.length;n++){var i=b[n];var h=nsSelectNodes(i,"*");nsapiExtractFields(g,h,j,n+1);}}g.initialized=true;return g;}function nsapiExtractFields(record,fields,machine,linenum){var buffer=new Array();for(var i=0;fields!=null&&i<fields.length;i++){var field=fields[i];var fieldName=field.nodeName;if(fieldName=="machine"&&field.getAttribute("type")!=null){continue;}var fieldValue=nsGetXMLValue(field);var fieldValues=buffer[fieldName]!=null?buffer[fieldName]:new Array();fieldValues[fieldValues.length]=fieldValue;buffer[fieldName]=fieldValues;eval(machine!=null?"record.setAndCommitLineItemValue( machine, fieldName, linenum, fieldValues.length == 1 ? fieldValues[0] : fieldValues )":"record.setFieldValue( fieldName, fieldValues.length == 1 ? fieldValues[0] : fieldValues )");}}function nsapiSerializeRecord(a){var d=nsStringToXML("<record></record>");d.documentElement.setAttribute("recordType",a.getRecordType());if(a.getId()!=null){d.documentElement.setAttribute("id",a.getId());}var b=nsSetChildValue(d.documentElement,"operations");nsapiSerializeOperation(a.operations[0],b,"load");for(var c=1;c<a.operations.length;c++){nsapiSerializeOperation(a.operations[c],b,"data");}return d;}function nsapiSerializeOperation(h,d,f){var c=nsSetChildValue(d,"operation");c.setAttribute("type",f);c.setAttribute("name",h.operation);for(var a in h.args){if(!h.args.hasOwnProperty(a)){continue;}if(isArray(h.args[a])){for(var e=0;e<h.args[a].length;e++){nsSetChildValue(c,a,h.args[a][e]);}}else{if(typeof h.args[a]=="object"){var b=nsSetChildValue(c,a);for(var g in h.args[a]){if(h.args[a].hasOwnProperty(g)){nsSetChildValue(b,g,h.args[a][g]);}}}else{nsSetChildValue(c,a,h.args[a]);}}}}var nsProxyURL="/app/common/scripting/nlapihandler.nl";var nsJSONProxyURL="/app/common/scripting/nlapijsonhandler.nl";function nsapiAjaxResponse(c,b){var e=c.getError();if(e!=null){e=nlapiCreateError(e);if(b==null){throw e;}}var f=c.getCode();var a=c.getBody();var g=c.getHeaders();var d=[];if(g[nsHeaderPrefix+"-Code"]!=null){f=g[nsHeaderPrefix+"-Code"];for(var h in g){if(g.hasOwnProperty(h)){if(h.indexOf(nsHeaderPrefix)==0){d[h.substring(nsHeaderPrefix.length+1)]=g[h];}}}}else{d=g;}var c=new nlobjServerResponse(f,a,d,e);if(typeof(b)=="function"){b(c);}return c;}function nsapiCheckArgs(c,d,b){for(var a=0;a<c.length;a++){if(c[a]==null||(typeof c[a]=="string"&&isValEmpty(c[a]))){throw nlapiCreateError("SSS_MISSING_REQD_ARGUMENT",(b!=null?b+": ":"")+"Missing a required argument: "+d[a]);}}}function nsapiAssertTrue(c,b,a){if(!c){throw nlapiCreateError(b,a);}}function nsapiExtractMap(c){if(c==null){return null;}var b=new Object();for(var a in c){if(c.hasOwnProperty(a)){b[a]=c[a];}}return b;}function nsapiGetCurrentSegment(a){var b=null;if(document.forms[a+"_main_form"]!=null){b=document.forms[a+"_main_form"].elements[a+"range"];}return b!=null?parseInt(getSelectValue(b)):1;}function nsapiGetSegmentForLine(b,a){var c=null;if(document.forms[b+"_main_form"]!=null){c=document.forms[b+"_main_form"].elements[b+"segmentsize"];}return c!=null?Math.floor((a-1)/parseInt(c.value)):1;}function nsapiSelectSegmentForLine(type,linenum){var sel=null;if(document.forms[type+"_main_form"]!=null){sel=document.forms[type+"_main_form"].elements[type+"range"];}if(sel!=null){var currentSegment=nsapiGetCurrentSegment(type);var targetSegment=nsapiGetSegmentForLine(type,linenum);if(currentSegment!=targetSegment){setSelectValue(sel,targetSegment);eval("Sync"+type+"range(true);");}}}function process_slaving_result(a){var b=nsapiIsInternal();try{nsapiSetIsInternal(true);process_slaving_result_original(a);}finally{nsapiSetIsInternal(b);}}function nlapiShowSaveConfirmation(b){if(NS.form.isChanged()&&window.bautosave){if(window.bautosave=="F"){nlShowSaveConf("You have made changes to this page. Would you like to save before continuing?","Information",null,b);}else{if((!document.forms.main_form.onsubmit||document.forms.main_form.onsubmit())){var c=document.forms.main_form;var a=document.createElement("input");a.id="setclientredirecturl";a.name="setclientredirecturl";a.type="hidden";a.value=b;c.appendChild(a);document.forms.main_form.submit();}}return true;}else{return false;}}function nlapiGetLineItemLabel(type,fldnam){nsapiCheckArgs([type,fldnam],["type","fldnam"],"nlapiGetLineItemLabel");if(hasMachine(type)){var mch=eval(String(type)+"_machine");return mch.getFormElementLabel(mch.getArrayPosition(fldnam));}else{}return null;}function nlapiViewCurrentLineItemSubrecord(c,b){nsapiAssertTrue(isSubrecordField(c,b),"SSS_INVALID_FIELD_ON_SUBRECORD_OPERATION");var a=nlapiGetCurrentLineItemIndex(c);return nlapiViewLineItemSubrecord(c,b,a);}function nlapiViewLineItemSubrecord(d,c,b){nsapiAssertTrue(isSubrecordField(d,c),"SSS_INVALID_FIELD_ON_SUBRECORD_OPERATION");var a=NLGetSubRecord(d,c,b);return a;}function nlapiRemoveCurrentLineItemSubrecord(d,c){nsapiAssertTrue(isSubrecordField(d,c),"SSS_INVALID_FIELD_ON_SUBRECORD_OPERATION");var b=nlapiGetCurrentLineItemIndex(d);var a=NLGetSubRecord(d,c,b);if(a){a.remove();}}function nlapiViewSubrecord(b){nsapiAssertTrue(isSubrecordField(null,b),"SSS_INVALID_FIELD_ON_SUBRECORD_OPERATION");var a=NLGetSubRecord(null,b,1);return a;}function nlapiRemoveSubrecord(b){nsapiAssertTrue(isSubrecordField(null,b),"SSS_INVALID_FIELD_ON_SUBRECORD_OPERATION");var a=NLGetSubRecord(null,b,1);if(a){a.remove();}}function isSubrecordField(d,b){if(typeof(NLGetUIForm)!="function"||typeof(NLGetBusinessObject)!="function"){return false;}try{if(isValEmpty(d)){var a=NLGetUIForm()==null?null:NLGetUIForm().recordManager;if(a!=null&&a.getField(b)!=null){return a.getField(b)["type"]=="summary";}}else{var a=NLGetBusinessObject()==null?null:NLGetBusinessObject().getRecordManager(d);if(a!=null&&a.getField(b)!=null){return a.getField(b)["type"]=="summary";}}}catch(c){return false;}return false;}function getFieldName(a){if(a=="type"){return a;}var b=nlapiGetFieldValue("type");if(b=="userpreferences"||b=="setupcompany"||b=="acctsetup"||b=="duplicatedetectsetup"){return a;}else{return a.toLowerCase();}}function clientScriptErrorDebug(f){var e=stacktrace();var b="/core/pages/logJavascriptError.nl?";var c=new NLXMLHttpRequest();var d="winHref="+encodeURIComponent(window.location.href);d=d+"&mesg="+encodeURIComponent("NLAPI Error "+f);d=d+"&stcktrc="+encodeURIComponent(e);var a=c.requestURL(b+d,d);}function nlapiCalculateTax(){if(typeof TaxCalculationEngine==="undefined"){throw nlapiCreateError("SSS_UNSUPPORTED_METHOD","Unsupported method");}try{var a=TaxCalculationEngine.getInstance();a.calculateTax();}catch(b){if(b.code==="TAX_REGISTRATION_DETERMINATION_WAS_NOT_SUCCESSFUL_PLEASE_MAKE_SURE_YOUR_NEXUSES_AND_TAX_REGISTRATIONS_ARE_SET_UP_CORRECTLY"){throw nlapiCreateError("SSS_TAX_REGISTRATION_REQUIRED","Tax registration required. Please ensure all nexuses and tax registrations are set up correctly.");}throw nlapiCreateError(b);}}function nlapiCreateCurrentLineItemSubrecord(d,c){nsapiAssertTrue(isSubrecordField(d,c),"SSS_INVALID_FIELD_ON_SUBRECORD_OPERATION");var b=nlapiGetCurrentLineItemIndex(d);var a=NLCreateSubRecord(d,c,b);return a;}function nlapiEditCurrentLineItemSubrecord(d,c){nsapiAssertTrue(isSubrecordField(d,c),"SSS_INVALID_FIELD_ON_SUBRECORD_OPERATION");var b=nlapiGetCurrentLineItemIndex(d);var a=NLEditSubRecord(d,c,b);return a;}function nlapiLoadCurrentLineItemSubrecord(d,b,c){var a=nlapiEditCurrentLineItemSubrecord(d,b);if(!a&&c){a=nlapiCreateCurrentLineItemSubrecord(d,b);}return a;}function nlapiEditSubrecord(b){nsapiAssertTrue(isSubrecordField(null,b),"SSS_INVALID_FIELD_ON_SUBRECORD_OPERATION");var a=NLEditSubRecord(null,b,1);return a;}function nlapiCreateSubrecord(b){nsapiAssertTrue(isSubrecordField(null,b),"SSS_INVALID_FIELD_ON_SUBRECORD_OPERATION");var a=NLCreateSubRecord(null,b,1);return a;}function nlapiLoadSubrecord(b){var a=nlapiEditSubrecord(b);if(!a){a=nlapiCreateSubrecord(b);}return a;}function nlapiEditLineItemSubrecord(d,c,b){nsapiAssertTrue(false,"SSS_INVALID_FIELD_ON_SUBRECORD_OPERATION");nsapiAssertTrue(isSubrecordField(d,c),"SSS_INVALID_FIELD_ON_SUBRECORD_OPERATION");var a=NLEditSubRecord(d,c,b);return a;}function nlapiCreateLineItemSubrecord(d,c,b){nsapiAssertTrue(false,"SSS_INVALID_FIELD_ON_SUBRECORD_OPERATION");nsapiAssertTrue(isSubrecordField(d,c),"SSS_INVALID_FIELD_ON_SUBRECORD_OPERATION");var a=NLCreateSubRecord(d,c,b);return a;}function nlapiLoadLineItemSubrecord(d,c,b){nsapiAssertTrue(false,"SSS_INVALID_FIELD_ON_SUBRECORD_OPERATION");var a=nlapiEditLineItemSubrecord(d,c,b);if(!a){a=nlapiCreateLineItemSubrecord(d,c,b);}return a;}slavingUtil=function(){var MULTISELECT="multiselect";var SlavingMetadataKey={QUERY_URL:"queryurl",EDIT:"edit",DISPLAY_ONLY:"displayonly",AUX_FIELDS:"auxfields",MULTILINE:"ln",MASTER:"master",FIELD_OBJECT:{NAME:"name",MACHINE:"machine",HTML_REF:"htmlReference",REQUIRED:"required",REQUIRED_SCRIPT:"requiredScript",IS_REQUIRED:"isRequired"}};var QueryRequst={URL:"url",PAYLOAD:"payload"};var SlaveResultKey={NAME:"name",MACHINE_NAME:"machine",FIRE_FIELDCHANGE:"firechange",IS_CLIENT_SLAVING:"isClientSlaving",OPTIONS:"options",VALUE:"value",TEXT:"text",NO_OVERRIDE:"nooverride",CONDITION:"condition"};function RemoteRecordDelegate(recordDelegate){var record=recordDelegate.currentRecord;var recordUtil=recordDelegate.util;function getFieldOptionIndexById(options,id){for(var i=0;i<options.length;i++){if(options[i].id==id){return i;}}return -1;}function getFieldOptions(){return recordUtil.getFieldOptions();}function setFieldNoSlaving(fieldInfo,noslaving){recordUtil.setFieldNoSlaving(fieldInfo.machineName,fieldInfo.fieldName,fieldInfo.lineNum,noslaving);}function getValue(params){var value="";if(params.isMachineField===true){if(params.ln&&params.ln!==-1){value=record.getLineItemValue(params.machineName,params.fieldName,params.ln);value=value===null||value===undefined?"":value;}else{value=record.getCurrentLineItemValue(params.machineName,params.fieldName);}}else{if(params.isMultiSelectField){value=record.getFieldValues(params.fieldName);}else{value=record.getFieldValue(params.fieldName);}}return value;}function setValue(params,value,fireFieldChange,isClientSlaving){var noslaving=isClientSlaving?false:true;if(params.isMachineField===true){record.setCurrentLineItemValue(params.machineName,params.fieldName,value,fireFieldChange,noslaving);}else{if(params.isMultiSelectField){record.setFieldValues(params.fieldName,value,fireFieldChange,noslaving);}else{record.setFieldValue(params.fieldName,value,fireFieldChange,noslaving);}}}function setSelectValue(params,value,text,fireFieldChange){if(!value&&value!==""){if(params.isMachineField===true){record.setCurrentLineItemText(params.machineName,params.fieldName,text,fireFieldChange,true);}else{record.setText({fieldId:params.fieldName,value:value,fireFieldChange:fireFieldChange,noslaving:true});}}else{setValue(params,value,fireFieldChange);}}function getFieldOptionFromCache(params){if(getFieldOptions()!==null&&getFieldOptions().get(params.machineName,params.fieldName,params.lineNum)===null){putFieldOptionInCache(params,[]);}return getFieldOptions().get(params.machineName,params.fieldName,params.lineNum);}function putFieldOptionInCache(params,obj){getFieldOptions().put(params.machineName,params.fieldName,params.lineNum,obj);}function removeOption(params,value){var options=getFieldOptionFromCache(params);if(options.length>0){if(value||value===0){var idx=getFieldOptionIndexById(options,value);options.splice(idx,1);}else{options.splice(0,options.length);}}}function insertOption(params,value,text){var options=getFieldOptionFromCache(params);if(options&&options instanceof Array){options.push({text:text,id:value});}}this.setFieldNoSlaving=setFieldNoSlaving;this.getValue=getValue;this.setValue=setValue;this.setSelectValue=setSelectValue;this.removeOption=removeOption;this.insertOption=insertOption;this.isEditableSublist=recordUtil.isEditableSublist;this.isFieldMultiSelect=recordUtil.isFieldMultiSelect;this.returnEmptyIfNull=returnEmptyIfNull;this.isValEmpty=isValEmpty;this.getCurrentLineItemIndex=function(sublist){return record.getCurrentSublistIndex({sublistId:sublist});};this.triggerPostSourcing=recordUtil.postSourcing;}function BrowserRecordDelegate(){function setFieldNoSlaving(fieldInfo,noslaving){var field=getFieldObject(fieldInfo);if(field){field.noslaving=noslaving;}}function getFieldObject(params){if(params.isMachineField===true){return nlapiGetLineItemField(params.machineName,params.fieldName,params.lineNum);}else{return nlapiGetField(params.fieldName);}}function getValue(params){var value="";if(params.isMachineField===true){if(params.ln){value=returnEmptyIfNull(nlapiGetLineItemValue(params.machineName,params.fieldName,params.ln));}else{value=nlapiGetCurrentLineItemValue(params.machineName,params.fieldName);}}else{if(params.isMultiSelectField){value=nlapiGetFieldValues(params.fieldName);}else{value=nlapiGetFieldValue(params.fieldName);}}return value;}function setValue(params,value,fireFieldChange){if(params.isMachineField===true){nlapiSetCurrentLineItemValue(params.machineName,params.fieldName,value,fireFieldChange,true);}else{if(params.isMultiSelectField){nlapiSetFieldValues(params.fieldName,value,fireFieldChange,true);}else{nlapiSetFieldValue(params.fieldName,value,fireFieldChange,true);}}}function setSelectValue(params,value,text,fireFieldChange){if(params.isMachineField===true){nlapiSetCurrentLineItemSelectValue(params.machineName,params.fieldName,value,text,fireFieldChange,getSlavingAsync());}else{nlapiSetSelectValue(params.fieldName,text,fireFieldChange,getSlavingAsync());}}function insertSelectOption(fieldName,value,text){var form=typeof(ftabs)!="undefined"&&ftabs[getFieldName(fieldName)]!=null?document.forms[ftabs[getFieldName(fieldName)]+"_form"]:document.forms[0];doInsertSelectOption(form,fieldName,text,value);}function insertLineItemOption(machineName,fieldName,value,text){var form=document.forms[machineName+"_form"];doInsertSelectOption(form,fieldName,text,value);}function doInsertSelectOption(form,fieldName,text,value){var fld=getFormElement(form,getFieldName(fieldName));if(fld!=null){addSelectOption(document,fld,text,value);}}function removeSelectOption(fieldName,value){var form=typeof(ftabs)!="undefined"&&ftabs[getFieldName(fieldName)]!=null?document.forms[ftabs[getFieldName(fieldName)]+"_form"]:document.forms[0];doRemoveSelectOption(form,fieldName,value);}function removeLineItemOption(machineName,fieldName,value){var form=document.forms[machineName+"_form"];doRemoveSelectOption(form,fieldName,value);}function doRemoveSelectOption(form,fieldName,value){var fld=getFormElement(form,getFieldName(fieldName));if(fld!=null){if(value!=null){deleteOneSelectOption(fld,value);}else{deleteAllSelectOptions(fld,window);}}}function removeOption(params,value){if(params.isMachineField===true){removeLineItemOption(params.machineName,params.fieldName,value);}else{removeSelectOption(params.fieldName,value);}}function insertOption(params,value,text){if(params.isMachineField===true){insertLineItemOption(params.machineName,params.fieldName,value,text);}else{insertSelectOption(params.fieldName,value,text);}}function isFieldMultiSelect(sublistId,fieldId,line){var field=getFieldObject({isMachineField:!!sublistId,machineName:sublistId,fieldName:fieldId,lineNum:line});return field?field.getType()===MULTISELECT:false;}this.setFieldNoSlaving=setFieldNoSlaving;this.getValue=getValue;this.setValue=setValue;this.setSelectValue=setSelectValue;this.removeOption=removeOption;this.insertOption=insertOption;this.isEditableSublist=isEditMachine;this.isFieldMultiSelect=isFieldMultiSelect;this.serverCall=nsServerCall;this.returnEmptyIfNull=emptyIfNull;this.isValEmpty=isValEmpty;this.getCurrentLineItemIndex=nlapiGetCurrentLineItemIndex;}function getQueryRequest(metadata,masterInfo,recordDelegate){var IS_EDIT="e";var RECORD_ID="id";var QUERY_PARAMETER_NAME="q";var QUERY_PARAMETER_VALUE="si";var MACHINE_NAME="machine";var QUERYREQUEST_SLAVING_FIELD="f";var LIST_MACHINE_LINE_NUMBER="ln";var RecordDelegate=(recordDelegate)?new RemoteRecordDelegate(recordDelegate):new BrowserRecordDelegate();var isBrowserRequest=(recordDelegate)?false:true;var lineNum=masterInfo.hasOwnProperty("lineNum")&&masterInfo.lineNum!=null?masterInfo.lineNum:null;var sublistName=masterInfo.sublistName;var result=cleanupQueryURL(metadata[SlavingMetadataKey.QUERY_URL]);var url=result[QueryRequst.URL];var payload=result[QueryRequst.PAYLOAD];if(metadata[SlavingMetadataKey.EDIT]==="T"){var id=(recordDelegate?recordDelegate.currentRecord.id:RecordDelegate.getValue({fieldName:"id"}));if(id||id===0){payload[RECORD_ID]=String(id);}if(metadata[SlavingMetadataKey.DISPLAY_ONLY]!=="T"){payload[IS_EDIT]="T";}}payload[QUERY_PARAMETER_NAME]=masterInfo.queryFieldName;payload[QUERY_PARAMETER_VALUE]=masterInfo.queryFieldValue;if(sublistName){payload[MACHINE_NAME]=sublistName;}if(masterInfo.fieldspec.length!=0){payload[QUERYREQUEST_SLAVING_FIELD]=masterInfo.fieldspec;}if(metadata[SlavingMetadataKey.MULTILINE]==="T"&&lineNum>0){payload[LIST_MACHINE_LINE_NUMBER]=String(lineNum);}var valid=addAuxFieldValueToPayloadAndReturnFalseWhenInvalid(isBrowserRequest,metadata,lineNum,payload,RecordDelegate);if(!valid){return null;}addMasterValueToPayload(metadata,lineNum,payload,RecordDelegate);return{url:url,payload:payload};}function addAuxFieldValueToPayloadAndReturnFalseWhenInvalid(isBrowserRequest,metadata,lineNum,payload,RecordDelegate){var auxfields=metadata[SlavingMetadataKey.AUX_FIELDS];for(var idx=0;auxfields&&idx<auxfields.length;idx++){var auxfld=auxfields[idx];var fieldName=auxfld.hasOwnProperty(SlavingMetadataKey.FIELD_OBJECT.NAME)?auxfld[SlavingMetadataKey.FIELD_OBJECT.NAME]:"";var machineName=auxfld.hasOwnProperty(SlavingMetadataKey.FIELD_OBJECT.MACHINE)?auxfld[SlavingMetadataKey.FIELD_OBJECT.MACHINE]:null;var htmlReference=auxfld.hasOwnProperty(SlavingMetadataKey.FIELD_OBJECT.HTML_REF)?auxfld[SlavingMetadataKey.FIELD_OBJECT.HTML_REF]:null;var fieldValue=RecordDelegate.getValue({isMachineField:machineName!==null,machineName:machineName,fieldName:fieldName,ln:lineNum});if(isBrowserRequest&&!fieldValue&&fieldValue!==0&&fieldValue!==""){fieldValue=eval(htmlReference);}if(isInvalidRequiredAuxField(auxfld,fieldValue,(auxfld[SlavingMetadataKey.FIELD_OBJECT.REQUIRED]==="T"))){return false;}payload["si_"+fieldName]=fieldValue;}return true;}function addMasterValueToPayload(metadata,lineNum,payload,RecordDelegate){if(metadata[SlavingMetadataKey.MASTER]&&metadata[SlavingMetadataKey.MASTER]!==""){var fld=metadata[SlavingMetadataKey.MASTER];var masterFieldName=fld[SlavingMetadataKey.FIELD_OBJECT.NAME];var machineName=fld.hasOwnProperty(SlavingMetadataKey.FIELD_OBJECT.MACHINE)?fld[SlavingMetadataKey.FIELD_OBJECT.MACHINE]:null;payload["si_"+masterFieldName]=RecordDelegate.getValue({isMachineField:machineName!==null,machineName:machineName,fieldName:masterFieldName,ln:lineNum});}}function cleanupQueryURL(url){var payload={};if(url.indexOf("?")!==-1){var list=url.split("?");url=list[0];if(list[1].length>0){var params=list[1].split("&");for(var i=0;i<params.length;i++){if(params[i].length>0){var pair=params[i].split("=");payload[pair[0]]=String(pair[1]);}}}}return{url:url,payload:payload};}function isInvalidRequiredAuxField(field,value,required){var requiredScriptCondition=true;if(field.hasOwnProperty(SlavingMetadataKey.FIELD_OBJECT.REQUIRED_SCRIPT)){requiredScriptCondition=(eval(field[SlavingMetadataKey.FIELD_OBJECT.REQUIRED_SCRIPT]))?true:false;}if(field.hasOwnProperty(SlavingMetadataKey.FIELD_OBJECT.IS_REQUIRED)&&field.isRequired){requiredScriptCondition=true;}var isValidValue=(value&&value.length!=0)?true:false;return required&&requiredScriptCondition&&!isValidValue;}function getURL(metadata,masterInfo){var requestObj=getQueryRequest(metadata,masterInfo,undefined);var fullUrl=requestObj.url;var payload=requestObj.payload;if(fullUrl.indexOf("?")==-1){fullUrl+="?";}var first=true;for(var key in payload){if(!first){fullUrl+="&";}else{first=false;}if(key.indexOf("si_")===0||key==="q"||key==="si"||key==="id"){fullUrl=fullUrl+key+"="+encodeURIComponent(emptyIfNull(payload[key]));}else{fullUrl=fullUrl+key+"="+emptyIfNull(payload[key]);}}return fullUrl;}function addEscaping(value){value=value.replace(/\\/g,"\\\\");value=value.replace(/'/g,"\\'");value=value.replace(/"/g,'\\"');return value;}function verifySlavingValues(fields,slavingValues){try{for(var j=0;fields&&j<fields.length;j++){for(var idx=0;slavingValues&&idx<slavingValues.length;idx++){var slaveInfo=slavingValues[idx];if(isFunction(slaveInfo)){continue;}if(slaveInfo.name!=fields[j][0]||(slaveInfo.machine!=null&&slaveInfo.machine!=fields[j][1]||slaveInfo.machine==null&&fields[j][1]!="")){continue;}var options=slaveInfo.options;var fld=nlapiGetLineItemField(slaveInfo.machine,slaveInfo.name);if(slaveInfo.machine!=null){if(options!=null){var legacyValues=getLineItemOptionValues(slaveInfo.machine,slaveInfo.name,fld.type);var legacyTexts=getLineItemOptionTexts(slaveInfo.machine,slaveInfo.name,fld.type);if(legacyValues.length!=options.length){nsServerCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",["Json option Length mismatch","Options length do not match. Field name:"+slaveInfo.name+" ,path = "+window.location.pathname]);}else{for(var i=0;options&&i<options.length;i++){var option=options[i];var legacyValue=addEscaping(legacyValues[i]);var legacyText=addEscaping(legacyTexts[i]);legacyText=legacyText.replace("\n","");if(option[0]!=legacyValue){nsServerCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",["Json option Value mismatch","Options slaving value do not match. Field name:"+slaveInfo.name+" jsonValue ="+option[0]+" legacyValue = "+legacyValues[i]+" ,path = "+window.location.pathname]);break;}if(option[1]!=legacyText){nsServerCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",["Json option Value mismatch","Options slaving text do not match. Field name:"+slaveInfo.name+" jsonValue ="+option[1]+" legacyValue = "+legacyTexts[i]+" ,path = "+window.location.pathname]);break;}}}}if(slaveInfo.nooverride!=null){continue;}if(slaveInfo.condition!=null){if(!eval(slaveInfo.condition)){continue;}}var oldvalue=nlapiGetCurrentLineItemValue(slaveInfo.machine,slaveInfo.name);oldvalue=addEscaping(oldvalue);if(slaveInfo.value!=null&&slaveInfo.value!=oldvalue){nsServerCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",["Json Value mismatch","Value slaving result do not match. Field name:"+slaveInfo.name+", jsonText = "+slaveInfo.value+", actualValue  = "+oldvalue+" ,path = "+window.location.pathname]);}if(slaveInfo.text!=null){var oldtext=nlapiGetCurrentLineItemText(slaveInfo.machine,slaveInfo.name);oldtext=addEscaping(oldtext);if(slaveInfo.text!=oldtext){nsServerCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",["Json Value mismatch","Value slaving result do not match. Field name:"+slaveInfo.name+", jsonText = "+slaveInfo.text+", actualValue  = "+oldtext+" ,path = "+window.location.pathname]);}}}else{var oldvalue=nlapiGetFieldValue(slaveInfo.name);oldvalue=addEscaping(oldvalue);var options=slaveInfo.options;var fld=nlapiGetField(slaveInfo.name);if(options!=null){var legacyValues=getOptionValues(slaveInfo.name,fld.type);var legacyTexts=getOptionTexts(slaveInfo.name,fld.type);if(legacyValues.length!=options.length){nsServerCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",["Json option Length mismatch","Options length do not match. Field name:"+slaveInfo.name+" ,path = "+window.location.pathname]);}else{for(var i=0;options&&i<options.length;i++){var option=options[i];var legacyValue=addEscaping(legacyValues[i]);var legacyText=addEscaping(legacyTexts[i]);legacyText=legacyText.replace("\n","");if(option[0]!=legacyValue){nsServerCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",["Json option Value mismatch","Options slaving value do not match. Field name:"+slaveInfo.name+" jsonValue ="+option[0]+" legacyValue = "+legacyValues[i]+" ,path = "+window.location.pathname]);break;}if(option[1]!=legacyText){nsServerCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",["Json option Value mismatch","Options slaving text do not match. Field name:"+slaveInfo.name+" jsonValue ="+option[1]+" legacyValue = "+legacyText[i]+" ,path = "+window.location.pathname]);break;}}}}if(slaveInfo.nooverride!=null){continue;}if(slaveInfo.condition!=null){if(!eval(slaveInfo.condition)){continue;}}if(slaveInfo.value!=null&&slaveInfo.value!=oldvalue){nsServerCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",["Json Value mismatch","Value slaving result do not match. Field name:"+slaveInfo.name+", jsonText = "+slaveInfo.value+", actualValue  = "+oldvalue+" ,path = "+window.location.pathname]);}if(slaveInfo.text!=null){var oldtext=nlapiGetFieldText(slaveInfo.name);oldtext=addEscaping(oldtext);if(slaveInfo.text!=oldtext){nsServerCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",["Json Value mismatch","Value slaving result do not match. Field name:"+slaveInfo.name+", jsonText = "+slaveInfo.text+", actualValue  = "+oldtext+" ,path = "+window.location.pathname]);}}}}}}catch(err){nsServerCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",["Excepion in verifying values",err.msg+" ,path = "+window.location.pathname]);}}function isFunction(obj){return Object.prototype.toString.call(obj)==="[object Function]";}function processSlavingValues(slavingValues,record,evalFunc){var RecordDelegate=(record)?new RemoteRecordDelegate(record):new BrowserRecordDelegate();for(var idx=0;slavingValues&&idx<slavingValues.length;idx++){var slaveResult=slavingValues[idx];var fieldName=slaveResult[SlaveResultKey.NAME];var isMachineField=slaveResult.hasOwnProperty(SlaveResultKey.MACHINE_NAME);var machineName=(isMachineField)?slaveResult[SlaveResultKey.MACHINE_NAME]:null;var lineNum=(isMachineField)?RecordDelegate.getCurrentLineItemIndex(machineName):-1;var fieldInfo={isMachineField:isMachineField,machineName:machineName,fieldName:fieldName,lineNum:lineNum};fieldInfo.isMultiSelectField=RecordDelegate.isFieldMultiSelect(machineName,fieldName,lineNum);if(isFunction(slaveResult)){if(!!evalFunc){evalFunc(slaveResult.toString()+";"+slaveResult.name+"();");}else{slaveResult(RecordDelegate);}continue;}try{applySlaveValueToRecord(RecordDelegate,slaveResult,fieldInfo);}catch(err){if(RecordDelegate instanceof BrowserRecordDelegate){RecordDelegate.serverCall("/app/common/scripting/nlapijsonhandler.nl","logSlavingError",["Excepion in processing values",err.msg+",path =  "+((record)?"":window.location.pathname)]);}else{throw err;}}finally{if(record==null){RecordDelegate.setFieldNoSlaving(fieldInfo,false);}}}}function applySlaveValueToRecord(RecordDelegate,slaveResult,fieldInfo){var fireFieldChangeEvent=slaveResult.hasOwnProperty(SlaveResultKey.FIRE_FIELDCHANGE);var isClientSlaving=slaveResult.hasOwnProperty(SlaveResultKey.IS_CLIENT_SLAVING);RecordDelegate.setFieldNoSlaving(fieldInfo,!fireFieldChangeEvent);var options=slaveResult[SlaveResultKey.OPTIONS];if(options){var oldValue=RecordDelegate.getValue(fieldInfo);var isOldValueInOptions=false;RecordDelegate.removeOption(fieldInfo);for(var j=0;j<options.length;j++){var option=options[j];RecordDelegate.insertOption(fieldInfo,option[0],option[1]);if(oldValue===option[0]){isOldValueInOptions=true;}}var preserveOriginalValueWhenOptionSlavingOnly=(RecordDelegate.isValEmpty(slaveResult[SlaveResultKey.VALUE])&&!RecordDelegate.isValEmpty(oldValue)&&isOldValueInOptions);if(preserveOriginalValueWhenOptionSlavingOnly){RecordDelegate.setValue(fieldInfo,oldValue,false);}}if(slaveResult[SlaveResultKey.NO_OVERRIDE]!=null&&!RecordDelegate.isValEmpty(RecordDelegate.getValue(fieldInfo))){return;}var slavingCondition=typeof slaveResult[SlaveResultKey.CONDITION]==="boolean"?slaveResult[SlaveResultKey.CONDITION]:eval(slaveResult[SlaveResultKey.CONDITION]);if(slaveResult.hasOwnProperty(SlaveResultKey.CONDITION)&&!slavingCondition){return;}if(slaveResult.hasOwnProperty(SlaveResultKey.TEXT)){RecordDelegate.setSelectValue(fieldInfo,slaveResult[SlaveResultKey.VALUE],slaveResult[SlaveResultKey.TEXT],fireFieldChangeEvent,isClientSlaving);}else{if(slaveResult.hasOwnProperty(SlaveResultKey.VALUE)){RecordDelegate.setValue(fieldInfo,slaveResult[SlaveResultKey.VALUE],fireFieldChangeEvent,isClientSlaving);}}}function redrawEditMachines(machinedata){for(var machineName in machinedata){var slaveMachineData=machinedata[machineName];if(slaveMachineData.edit!=null&&(slaveMachineData.nooverride==null||document.forms[0].elements["next"+machineName+"idx"].value==1)){var data=slaveMachineData.data;var strValue="";for(var i=0;data&&i<data.length;i++){var row=data[i];for(var j=0;row&&j<row.length;j++){if(strValue!=""){strValue+=String.fromCharCode(1);}strValue+=row[j];}if(i!=data.length-1){strValue+=String.fromCharCode(2);}}document.forms[0].elements[machineName+"data"].value=strValue;clearLineArray(name);document.forms[0].elements["next"+machineName+"idx"].value=data==null?1:data.length+1;document.forms[0].elements[machineName+"valid"].value="T";setMachineContentUpdated(machineName,true);clearLineArray(name);if(parent.document.forms.main_form.elements[machineName+"loaded"]!=null){parent.document.forms.main_form.elements[machineName+"loaded"].value="T";}if(parent.document.forms.main_form.elements[machineName+"dotted"]!=null){parent.document.forms.main_form.elements[machineName+"dotted"].value="T";}if(window[machineName+"_machine"]!=null){window[machineName+"_machine"].refresheditmachine(true);window[machineName+"_machine"].recalc();}var tabTD=parent.document.getElementById(machineName+"lnkdot");if(tabTD!=null){tabTD.style.display="";}}if(isFunction(slaveMachineData.metadata)){slaveMachineData.metadata.call();continue;}}}function getOptionValues(fldnam,type){var form=typeof(ftabs)!="undefined"&&ftabs[getFieldName(fldnam)]!=null?document.forms[ftabs[getFieldName(fldnam)]+"_form"]:document.forms[0];var fld=getFormElement(form,getFieldName(fldnam));if(fld!=null){if(type===MULTISELECT){return getMultiDropdown(fld,window).getValues();}else{return getDropdown(fld,window).getValues();}}else{return null;}}function getOptionTexts(fldnam,type){var form=typeof(ftabs)!="undefined"&&ftabs[getFieldName(fldnam)]!=null?document.forms[ftabs[getFieldName(fldnam)]+"_form"]:document.forms[0];var fld=getFormElement(form,getFieldName(fldnam));if(fld!=null){if(type===MULTISELECT){return getMultiDropdown(fld,window).textArray;}else{return getDropdown(fld,window).getTexts();}}else{return null;}}function getLineItemOptionValues(machine,fldnam,type){var form=document.forms[machine+"_form"];var fld=getFormElement(form,getFieldName(fldnam));if(fld!=null){if(type===MULTISELECT){return getMultiDropdown(fld,window).getValues();}else{return getDropdown(fld,window).getValues();}}else{return null;}}function getLineItemOptionTexts(machine,fldnam,type){var form=document.forms[machine+"_form"];var fld=getFormElement(form,getFieldName(fldnam));if(fld!=null){if(type===MULTISELECT){return getMultiDropdown(fld,window).textArray;}else{return getDropdown(fld,window).getTexts();}}else{return null;}}function isValEmpty(val){if(val===null||val===undefined){return true;}val=String(val);return(val.length===0)||!/\S/.test(val);}function returnEmptyIfNull(str){return str!=null?str:"";}return{cleanupQueryURL:cleanupQueryURL,getQueryRequest:getQueryRequest,getURL:getURL,processSlavingValues:processSlavingValues,verifySlavingValues:verifySlavingValues,redrawEditMachines:redrawEditMachines};}();if(typeof Object.freeze=="function"){slavingUtil=Object.freeze(slavingUtil);}function resolveDeprecatedFieldText(c,b){var a=nlapiGetRecordType()+"/"+c+"/"+b;if(a=="address/country/United Kingdom (GB)"){return"United Kingdom";}return b;}function getMachineByName(a){return getMachine(a);}function getMachine(a){if(window.machines){return window.machines[a];}return null;}function getFieldSetDisplayText(k,o,q,m,r){var l="";if(m==null){m=false;}var b=0;for(var s=0;s<k.countFormElements();s++){if(k.getFormElementFieldSet(s)!=o){continue;}b++;var a=k.getFormElementName(s);var t=k.getFormElement(s);var n=k.getFormElementLabel(s);var p=q==null?getFormValue(t):getEncodedValue(k.name,q,a);if(q==null&&t!=null){var c=k.name+"_"+(a.indexOf("_display")==-1?a:k.getFormElementName(s+1))+"_fs";var j=document.getElementById(c);if(j!=null&&j.style.display=="none"){p="";}}if(p!=null&&p.length>0){var e=k.getFormElementType(s);var u=e=="checkbox";var g=n.length>0&&(!u||p=="T");var d=false;if(g&&(r==null||r.indexOf(n)==-1)){l+=n;if(!u){l+=": ";}d=true;}if(!u){if(k.isElementPopupDisplayField(s)){var h=a.indexOf("_display");var f=q==null?getFormValue(k.getFormElement(s+1)):getEncodedValue(k.name,q,k.getFormElementName(s+1));if(h!=-1&&!isValEmpty(f)){l+=p.replace(/\u0005/g,", ").replace(/\r/g,"").replace(/\n/g,", ");d=true;}}else{d=true;if(e=="select"){if(isMultiSelect(t)){l+=getmultiselectlisttext(t,p);}else{l+=getlisttext(t,p);}}else{if(e=="currency"){l+=format_currency(parseFloat(p));}else{if(e=="radio"){l+=getradiotext(t,p);}else{if(e=="namevaluelist"){l+=getnamevaluelisttext(p,", ");}else{if(e=="timeselector"){l+=t.parentNode.controller.getTextForValue(p);}else{if(e!="slaveselect"&&a.indexOf("_labels")==-1){l+=p.replace(/\r/g,"").replace(/\r/g,"").replace(/\n/g,", ");}else{d=false;}}}}}}}}if(d){l+=m?" ":"<br>";}}}return l;}window.fieldnamesArray={};window.haslineitemgroupArray={};function hasLineItemGroup(a){if(window.haslineitemgroupArray[a]==null){window.haslineitemgroupArray[a]=document.forms.main_form.elements[a+"data"]!=null;}return window.haslineitemgroupArray[a];}function allowAddLines(a){return hasMachine(a);}function hasMachine(machine_name){return hasLineItemGroup(machine_name)&&eval("typeof("+machine_name+"_machine)")!="undefined";}function isEditMachine(a){return getMachine(a)&&(getMachine(a).type==EDIT_MACHINE);}window.lineitemFieldTypeArray={};function getEncodedFieldType(b,g,d){if(hasEncodedField(b,g)){if(window.lineitemFieldTypeArray[b]==null||window.lineitemFieldTypeArray[b][g]==null){window.lineitemFieldTypeArray[b]={};var e=splitIntoCells(document.forms.main_form.elements[b+"fields"].value);var a=splitIntoCells(document.forms.main_form.elements[b+"types"].value);var j=document.forms.main_form.elements[b+"origtypes"];var c=j?splitIntoCells(j.value):null;for(var f=0;f<e.length;f++){var h=a[f];if(f>0&&(h=="slaveselect"||h=="integer")&&e[f-1]==e[f]+"_display"){h=(a[f-1]=="textarea")?"multiselect":"select";}window.lineitemFieldTypeArray[b][e[f]]=h;if(c&&c[f]){window.lineitemFieldTypeArray[b][e[f]+"_origtype"]=c[f];}}}if(d&&window.lineitemFieldTypeArray[b][g+"_origtype"]){g+="_origtype";}return window.lineitemFieldTypeArray[b][g];}return null;}window.lineitemFieldlabelArray={};function getEncodedFieldLabel(e,a){if(hasEncodedField(e,a)){if(window.lineitemFieldlabelArray[e]==null||window.lineitemFieldlabelArray[e][a]==null){window.lineitemFieldlabelArray[e]={};var f=splitIntoCells(document.forms.main_form.elements[e+"fields"].value);var d=splitIntoCells(document.forms.main_form.elements[e+"labels"].value);for(var c=0;c<f.length;c++){var b=d[c];if(c>0&&f[c-1]==f[c]+"_display"){b=d[c-1];}window.lineitemFieldlabelArray[e][f[c]]=b;}}return window.lineitemFieldlabelArray[e][a];}return null;}window.lineitemFieldParentArray={};function getEncodedFieldParent(c,a){if(hasEncodedField(c,a)){if(window.lineitemFieldParentArray[c]==null||window.lineitemFieldParentArray[c][a]==null){window.lineitemFieldParentArray[c]={};var e=splitIntoCells(document.forms.main_form.elements[c+"fields"].value);var d=splitIntoCells(document.forms.main_form.elements[c+"parents"].value);for(var b=0;b<e.length;b++){window.lineitemFieldParentArray[c][e[b]]=d[b];}}return window.lineitemFieldParentArray[c][a];}return null;}function getFieldLineNum(g,e){var c=getFieldNamesArray(g);var b=e.name;var a=-1;for(var d=0;d<c.length;d++){var f=new RegExp("^"+c[d]+"([0-9]+)$");if(f.test(b)){a=parseInt(RegExp.$1,10);break;}}return a;}function getLineItemField(f,d,a){var c=null;var e=f+"_form";if(getEncodedFieldType(f,d)=="radio"){var b=getFormElementViaFormName(e,d);c=b[a-1];}else{c=getFormElementViaFormName(e,d+(a!=null?a:""));}return c;}function getLineCount(b){var a=getMachine(b);if(a){return a.getNumRows();}return doGetLineCount(b);}function getLineArray(b){var a=getMachine(b);if(a){return a.getLineArray();}return doGetLineArray(b);}function getLineArrayLine(c,a){var b=getMachine(c);if(b){return b.getLineArrayLine(a);}return doGetLineArrayLine(c,a);}function setLineArray(b,c){var a=getMachine(b);if(a){a.setLineArray(c);}else{doSetLineArray(b,c);}}function setLineArrayLine(c,a,d){var b=getMachine(c);if(b){b.setLineArrayLine(a,d);}else{doSetLineArrayLine(c,a,d);}}function hasLineArray(b){var a=getMachine(b);if(a){return a.hasLineArray();}return doHasLineArray(b);}function setMachineContentUpdated(c,b){var a=getMachine(c);if(a){a.setContentUpdated(b);}}function clearLineArray(b){var a=getMachine(b);if(a){a.clearLineArray();}else{doClearLineArray(b);}}function Machine_deleteLineItems(b,d,a){var c=getMachine(b);if(c){return c.deletelines(d,a);}else{return doDeleteLineItems(b,d,a);}}function Machine_clearLineItems(a,b){var c=getMachine(a);if(c){return c.removeAllLines(b);}}function writeLineArray(b){var a=getMachine(b);if(a){a.writeLineArray();}else{doWriteLineArray(b);}}function getEncodedValue(d,b,a){var c=getMachine(d);if(c){return c.getFieldValue(a,b,true);}return doGetEncodedValue(d,b,a);}function findEncodedValue(d,a,c){var b=getMachine(d);if(b){return b.findEncodedValue(a,c,true);}return doFindEncodedValue(d,a,c);}function setEncodedValue(e,b,a,d){var c=getMachine(e);if(c){c.setFieldValue(b,a,d);}else{doSetEncodedValue(e,b,a,d);}}function setEncodedValues(d,a,c){var b=getMachine(d);if(b){b.setEncodedValues(a,c);}else{doSetEncodedValues(d,a,c);}}function setFormValues(f,b,e,c,a){var d=getMachine(f);if(d){d.setFormValues(b,e,c,a);}else{doSetFormValues(f,b,e,c,a);}}function getEncodedFieldPosition(c,a){var b=getMachine(c);if(b){return b.getFieldPosition(a);}return doGetEncodedFieldPosition(c,a);}function hasEncodedField(c,a){var b=getMachine(c);if(b){return b.hasEncodedField(a);}return doHasEncodedField(c,a);}function getFieldNamesArray(a){return doGetFieldNamesArray(a);}function syncMachineSegment(d,f,c,a){var e=getMachine(d);if(e){e.updateFormElements(c,a);}if(c==-1){c=1;}if(a==-1||a>document.forms[0].elements["next"+d+"idx"].value-1){a=document.forms[0].elements["next"+d+"idx"].value-1;}for(var b=c;b<=a;b++){setFormValues(d,b,f);}}function doGetLineCount(a){return doGetLineArray(a)!=null?doGetLineArray(a).length:0;}var MACHINE_NAME_PREPEND="mch_";window.linearrayArray={};function doGetLineArray(b){var a=MACHINE_NAME_PREPEND+b;if(window.linearrayArray[a]==null){if(hasLineItemGroup(b)){window.linearrayArray[a]=splitIntoRows(document.forms.main_form.elements[b+"data"].value);}}return window.linearrayArray[a];}function doGetLineArrayLine(b,a){var c=doGetLineArray(b);if(c[a]!=null&&typeof c[a]=="string"){c[a]=splitIntoCells(c[a]);}return c[a];}function doSetLineArray(b,c){var a=MACHINE_NAME_PREPEND+b;window.linearrayArray[a]=c;}function doSetLineArrayLine(c,b,a){var d=doGetLineArray(c);d[b]=a;}function doHasLineArray(a,b){return window.linearrayArray!=null&&window.linearrayArray[MACHINE_NAME_PREPEND+a]!=null;}function doClearLineArray(a){if(window.linearrayArray!=null){window.linearrayArray[MACHINE_NAME_PREPEND+a]=null;}}function doWriteLineArray(a){if(doHasLineArray(a)){var b=doGetLineArray(a);doWriteLineArrayData(a,b);}}function doWriteLineArrayData(b,c){if(c&&c.length>0){for(var a=0;a<c.length;a++){if(c[a]!=null&&typeof(c[a])!="string"){c[a]=c[a].join(String.fromCharCode(1));}}document.forms.main_form.elements[b+"data"].value=doGetLineArray(b).join(String.fromCharCode(2));}else{document.forms.main_form.elements[b+"data"].value="";}}function doGetEncodedValue(e,c,b){var a=doGetLineArrayLine(e,c-1);if(a==null){return null;}var d=doGetEncodedFieldPosition(e,b);if(d!=-1){return a[d];}return"";}function doFindEncodedValue(f,c,e){var d=doGetEncodedFieldPosition(f,c);if(d==-1){return -1;}for(var b=0;b<doGetLineCount(f);b++){var a=doGetLineArrayLine(f,b);if(e==a[d]){return b+1;}}return -1;}function doSetEncodedValue(f,c,b,e){if(!hasLineItemGroup(f)){return;}var a=doGetLineArrayLine(f,c-1);if(a==null){a=[];}var d=doGetEncodedFieldPosition(f,b);if(d==-1){return;}a[d]=e!=null?String(e):"";doSetLineArrayLine(f,c-1,a);}function doSetEncodedValues(e,h,a){if(!hasLineItemGroup(e)){return;}if(a==null){a=document.forms[e+"_form"];}var c=doGetFieldNamesArray(e);var k=splitIntoCells(document.forms.main_form.elements[e+"flags"].value);var l=new Array(c.length);var b=getLineArrayLine(e,h-1);for(var g=0;g<c.length;g++){if(isValEmpty(c[g])){continue;}if((k[g]&4)==0){l[g]=b[g];}else{var d;if(a.elements[c[g]]!=null&&a.elements[c[g]][0]!=null&&a.elements[c[g]][0].type=="radio"){for(var f=0;f<a.elements[c[g]].length;f++){if(a.elements[c[g]][f].value==h){d=a.elements[c[g]][f];}}}else{if((k[g]&8)!=0){d=a.elements[c[g+1]+h.toString()+"_display"];}else{d=a.elements[c[g]+h.toString()];}}if(d!=null){if(d.type=="checkbox"||d.type=="radio"){l[g]=d.checked?"T":"F";}else{if(d.type=="select-one"){l[g]=d.options[d.selectedIndex].value;}else{if(d.type=="textarea"){l[g]=d.value.replace(/\r/g,"").replace(/\n/g,String.fromCharCode(5));}else{l[g]=d.value;}}}}else{l[g]=b[g];}}}setLineArrayLine(e,h-1,l);}function doSetFormValues(d,f,a,g,j){if(!hasLineItemGroup(d)||isEditMachine(d)){return;}var b=doGetFieldNamesArray(d);var h=splitIntoCells(document.forms.main_form.elements[d+"flags"].value);var k=getLineArrayLine(d,f-1);for(var e=0;e<b.length;e++){if(isValEmpty(b[e])||(g!=null&&b[e]!=g)){continue;}if((h[e]&4)!=0){var c;if(a.elements[b[e]]!=null&&a.elements[b[e]][0]!=null&&a.elements[b[e]][0].type=="radio"){c=a.elements[b[e]][f-1];}else{if((h[e]&8)!=0){c=a.elements[b[e+1]+f.toString()+"_display"];}else{c=a.elements[b[e]+f.toString()];}}if(c!=null){if(c.type=="radio"){c.checked=k[e]=="T";}else{if(c.type=="checkbox"){setFormValue(c,k[e]=="T");}else{if(c.type=="textarea"){c.value=k[e].replace(/\u0005/g,"\n");}else{setFormValue(c,k[e],null,j);}}}}}}}function doDeleteLineItems(name,start,end){var machine=eval(name+"_machine");var linearray=getLineArray(machine.name);setLineArray(machine.name,linearray.slice(0,start).concat(linearray.slice(end)));machine.setIndex(machine.getNextIndex()-(end-start));return true;}function doGetEncodedFieldPosition(c,b){var a=doGetFieldNamesArray(c);if(a!=null){return a[b]!=null?a[b]:-1;}return -1;}function doHasEncodedField(b,a){if(doGetEncodedFieldPosition(b,a)<0){return false;}return true;}function doGetFieldNamesArray(b){if(window.fieldnamesArray[b]==null){if(document.forms.main_form.elements[b+"fields"]!=null){window.fieldnamesArray[b]=splitIntoCells(document.forms.main_form.elements[b+"fields"].value);for(var a=0;a<window.fieldnamesArray[b].length;a++){window.fieldnamesArray[b][window.fieldnamesArray[b][a]]=a;}}}return window.fieldnamesArray[b];}function doGetWrongFieldVisibilities(a){var g=nlapiServerCall(a,"getItemFieldVisibilities",[]);var f=doGetFieldNamesArray("item");var d=f.length;var c={};for(var b=0;b<d;b++){var e=nlapiGetLineItemField("item",f[b]);if(!!e&&g.hasOwnProperty(f[b])){if(g[f[b]]&&!e.isHidden()){c[f[b]]=false;}else{if(!g[f[b]]&&e.isHidden()){c[f[b]]=true;}}}}return c;}var nsHeaderPrefix="Custom-Header";var nsScriptErrorMsg="An unexpected error occurred in a script running on this page.";var nsYesString="Yes";var nsNoString="No";var validationFlowSwitch={};if(Object.defineProperty){Object.defineProperty(validationFlowSwitch,"usesNewPath",{value:false,writeable:false});}else{validationFlowSwitch.usesNewPath=false;}